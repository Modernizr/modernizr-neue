var requirejs,require,define,xpcUtil;!function(console,args,readFileFunc){var fileName,env,fs,vm,path,exec,rhinoContext,dir,nodeRequire,nodeDefine,exists,reqMain,loadedOptimizedLib,existsForNode,Cc,Ci,version="2.3.6",jsSuffixRegExp=/\.js$/,commandOption="",useLibLoaded={},rhinoArgs=args,xpconnectArgs=args,readFile=void 0!==readFileFunc?readFileFunc:null;function showHelp(){console.log("See https://github.com/requirejs/r.js for usage.")}function loadLib(){var prim,root,factory;if(!function(){var pathRegExp=/(\/|^)env\/|\{env\}/,env="unknown";"undefined"!=typeof process&&process.versions&&process.versions.node?env="node":"undefined"!=typeof Packages?env="rhino":"undefined"!=typeof navigator&&"undefined"!=typeof document||"undefined"!=typeof importScripts&&"undefined"!=typeof self?env="browser":"undefined"!=typeof Components&&Components.classes&&Components.interfaces&&(env="xpconnect"),define("env",{get:function(){return env},load:function(name,req,load,config){config.env&&(env=config.env),req([name=name.replace(pathRegExp,function(match,prefix){return-1===match.indexOf("{")?prefix+env+"/":env})],function(mod){load(mod)})}})}(),define("lang",function(){"use strict";var lang,isJavaObj,hasOwn=Object.prototype.hasOwnProperty;function hasProp(obj,prop){return hasOwn.call(obj,prop)}function TMP(){}return isJavaObj=function(){return!1},"undefined"!=typeof java&&java.lang&&java.lang.Object&&"undefined"!=typeof importPackage&&(isJavaObj=function(obj){return obj instanceof java.lang.Object}),lang={backSlashRegExp:/\\/g,ostring:Object.prototype.toString,isArray:Array.isArray||function(it){return"[object Array]"===lang.ostring.call(it)},isFunction:function(it){return"[object Function]"===lang.ostring.call(it)},isRegExp:function(it){return it&&it instanceof RegExp},hasProp:hasProp,falseProp:function(obj,prop){return!hasProp(obj,prop)||!obj[prop]},getOwn:function(obj,prop){return hasProp(obj,prop)&&obj[prop]},_mixin:function(dest,source,override){var name;for(name in source)!source.hasOwnProperty(name)||!override&&dest.hasOwnProperty(name)||(dest[name]=source[name]);return dest},mixin:function(dest){var override,i,l,parameters=Array.prototype.slice.call(arguments);for(dest=dest||{},2<parameters.length&&"boolean"==typeof arguments[parameters.length-1]&&(override=parameters.pop()),i=1,l=parameters.length;i<l;i++)lang._mixin(dest,parameters[i],override);return dest},deepMix:function(dest,source){return lang.eachProp(source,function(value,prop){"object"!=typeof value||!value||lang.isArray(value)||lang.isFunction(value)||value instanceof RegExp?dest[prop]=value:(dest[prop]||(dest[prop]={}),lang.deepMix(dest[prop],value))}),dest},deeplikeCopy:function(obj,ignoredProps){var type,result;return lang.isArray(obj)?(result=[],obj.forEach(function(value){result.push(lang.deeplikeCopy(value,ignoredProps))}),result):(type=typeof obj,null==obj||"boolean"==type||"string"==type||"number"==type||lang.isFunction(obj)||lang.isRegExp(obj)||isJavaObj(obj)?obj:(result={},lang.eachProp(obj,function(value,key){ignoredProps&&hasProp(ignoredProps,key)||(result[key]=lang.deeplikeCopy(value,ignoredProps))}),result))},delegate:function(obj,props){TMP.prototype=obj;var tmp=new TMP;return TMP.prototype=null,props&&lang.mixin(tmp,props),tmp},each:function(ary,func){var i;if(ary)for(i=0;i<ary.length&&!func(ary[i],i,ary);i+=1);},eachProp:function(obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break},bind:function(obj,fn){return function(){return fn.apply(obj,arguments)}},jsEscape:function(content){return content.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}}}),function(){"use strict";var hasOwn=Object.prototype.hasOwnProperty;function hasProp(obj,prop){return hasOwn.call(obj,prop)}function each(ary,func){var i;if(ary)for(i=0;i<ary.length;i+=1)ary[i]&&func(ary[i],i,ary)}function check(p){if(!hasProp(p,"e")&&!hasProp(p,"v"))return 1;if(!prim.hideResolutionConflict)throw new Error("Prim promise already resolved: "+JSON.stringify(p))}function notify(ary,value){prim.nextTick(function(){each(ary,function(item){item(value)})})}(prim=function prim(){var p,ok=[],fail=[];return p={callback:function(yes,no){no&&p.errback(no),hasProp(p,"v")?prim.nextTick(function(){yes(p.v)}):ok.push(yes)},errback:function(no){hasProp(p,"e")?prim.nextTick(function(){no(p.e)}):fail.push(no)},finished:function(){return hasProp(p,"e")||hasProp(p,"v")},rejected:function(){return hasProp(p,"e")},resolve:function(v){return check(p)&&(p.v=v,notify(ok,v)),p},reject:function(e){return check(p)&&(p.e=e,notify(fail,e)),p},start:function(fn){return p.resolve(),p.promise.then(fn)},promise:{then:function(yes,no){var next=prim();return p.callback(function(v){try{yes&&"function"==typeof yes&&(v=yes(v)),v&&v.then?v.then(next.resolve,next.reject):next.resolve(v)}catch(e){next.reject(e)}},function(e){var err;try{no&&"function"==typeof no?(err=no(e))&&err.then?err.then(next.resolve,next.reject):next.resolve(err):next.reject(e)}catch(e2){next.reject(e2)}}),next.promise},fail:function(no){return p.promise.then(null,no)},end:function(){p.errback(function(e){throw e})}}}}).serial=function(ary){var result=prim().resolve().promise;return each(ary,function(item){result=result.then(function(){return item()})}),result},prim.nextTick="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&process.nextTick?process.nextTick:"undefined"!=typeof setTimeout?function(fn){setTimeout(fn,0)}:function(fn){fn()},"function"==typeof define&&define.amd?define("prim",function(){return prim}):"undefined"!=typeof module&&module.exports&&(module.exports=prim)}(),"browser"===env&&define("browser/assert",function(){return{}}),"node"===env&&define("node/assert",["assert"],function(assert){return assert}),"rhino"===env&&define("rhino/assert",function(){return{}}),"xpconnect"===env&&define("xpconnect/assert",function(){return{}}),"browser"===env&&define("browser/args",function(){return[]}),"node"===env&&define("node/args",function(){var args=process.argv.slice(2);return args[0]&&0===args[0].indexOf("-")&&(args=args.slice(1)),args}),"rhino"===env){var jsLibRhinoArgs=void 0!==rhinoArgs&&rhinoArgs||[].concat(Array.prototype.slice.call(arguments,0));define("rhino/args",function(){var args=jsLibRhinoArgs;return args[0]&&0===args[0].indexOf("-")&&(args=args.slice(1)),args})}if("xpconnect"===env){var jsLibXpConnectArgs=void 0!==xpconnectArgs&&xpconnectArgs||[].concat(Array.prototype.slice.call(arguments,0));define("xpconnect/args",function(){var args=jsLibXpConnectArgs;return args[0]&&0===args[0].indexOf("-")&&(args=args.slice(1)),args})}"browser"===env&&define("browser/load",["./file"],function(file){function load(fileName){eval(file.readFile(fileName))}return load}),"node"===env&&define("node/load",["fs"],function(fs){return function(fileName){var contents=fs.readFileSync(fileName,"utf8");process.compile(contents,fileName)}}),"rhino"===env&&define("rhino/load",function(){return load}),"xpconnect"===env&&define("xpconnect/load",function(){return load}),"browser"===env&&define("browser/file",["prim"],function(prim){var file,currDirRegExp=/^\.(\/|$)/;return file={backSlashRegExp:/\\/g,exclusionRegExp:/^\./,getLineSeparator:function(){return"/"},exists:function(fileName){return path=fileName,(xhr=new XMLHttpRequest).open("HEAD",path,!1),xhr.send(),200===(status=xhr.status)||304===status;var path,status,xhr},parent:function(fileName){var parts=fileName.split("/");return parts.pop(),parts.join("/")},absPath:function(fileName){var dir;return currDirRegExp.test(fileName)&&(-1!==(dir=location.href.replace(/\\/g,"/")).indexOf("/")&&((dir=dir.split("/")).splice(0,3),dir.pop(),dir="/"+dir.join("/")),fileName=dir+fileName.substring(1)),fileName},normalize:function(fileName){return fileName},isFile:function(path){return!0},isDirectory:function(path){return!1},getFilteredFileList:function(startDir,regExpFilters,makeUnixPaths){console.log("file.getFilteredFileList is no-op in browser")},copyDir:function(srcDir,destDir,regExpFilter,onlyCopyNew){console.log("file.copyDir is no-op in browser")},copyFile:function(srcFileName,destFileName,onlyCopyNew){console.log("file.copyFile is no-op in browser")},renameFile:function(from,to){console.log("file.renameFile is no-op in browser")},readFile:function(path,encoding){var xhr=new XMLHttpRequest;return xhr.open("GET",path,!1),xhr.send(),xhr.responseText},readFileAsync:function(path,encoding){var xhr=new XMLHttpRequest,d=prim();return xhr.open("GET",path,!0),xhr.send(),xhr.onreadystatechange=function(){4===xhr.readyState&&(400<xhr.status?d.reject(new Error("Status: "+xhr.status+": "+xhr.statusText)):d.resolve(xhr.responseText))},d.promise},saveUtf8File:function(fileName,fileContents){file.saveFile(fileName,fileContents,"utf8")},saveFile:function(fileName,fileContents,encoding){requirejs.browser.saveFile(fileName,fileContents,encoding)},deleteFile:function(fileName){console.log("file.deleteFile is no-op in browser")},deleteEmptyDirs:function(startDir){console.log("file.deleteEmptyDirs is no-op in browser")}}}),"node"===env&&define("node/file",["fs","path","prim"],function(fs,path,prim){var file,isWindows="win32"===process.platform,windowsDriveRegExp=/^[a-zA-Z]\:\/$/;function frontSlash(path){return path.replace(/\\/g,"/")}function exists(path){isWindows&&"/"===path.charAt(path.length-1)&&":"!==path.charAt(path.length-2)&&(path=path.substring(0,path.length-1));try{return fs.statSync(path),!0}catch(e){return!1}}function mkFullDir(dir){var parts=dir.split("/"),currDir="";parts.forEach(function(part){var dir;currDir+=part+"/",part&&(exists(dir=currDir)||isWindows&&windowsDriveRegExp.test(dir)||fs.mkdirSync(dir,511))})}return file={backSlashRegExp:/\\/g,exclusionRegExp:/^\./,getLineSeparator:function(){return"/"},exists:function(fileName){return exists(fileName)},parent:function(fileName){var parts=fileName.split("/");return parts.pop(),parts.join("/")},absPath:function(fileName){return frontSlash(path.normalize(frontSlash(fs.realpathSync(fileName))))},normalize:function(fileName){return frontSlash(path.normalize(fileName))},isFile:function(path){return fs.statSync(path).isFile()},isDirectory:function(path){return fs.statSync(path).isDirectory()},getFilteredFileList:function(startDir,regExpFilters,makeUnixPaths){var topDir,regExpInclude,regExpExclude,dirFileArray,i,stat,filePath,ok,fileName,files=[];if(topDir=startDir,regExpInclude=regExpFilters.include||regExpFilters,regExpExclude=regExpFilters.exclude||null,file.exists(topDir))for(dirFileArray=fs.readdirSync(topDir),i=0;i<dirFileArray.length;i++)fileName=dirFileArray[i],filePath=path.join(topDir,fileName),(stat=fs.statSync(filePath)).isFile()?(makeUnixPaths&&-1===filePath.indexOf("/")&&(filePath=frontSlash(filePath)),ok=!0,regExpInclude&&(ok=filePath.match(regExpInclude)),ok&&regExpExclude&&(ok=!filePath.match(regExpExclude)),!ok||file.exclusionRegExp&&file.exclusionRegExp.test(fileName)||files.push(filePath)):!stat.isDirectory()||file.exclusionRegExp&&file.exclusionRegExp.test(fileName)||this.getFilteredFileList(filePath,regExpFilters,makeUnixPaths).forEach(function(dirFile){files.push(dirFile)});return files},copyDir:function(srcDir,destDir,regExpFilter,onlyCopyNew){regExpFilter=regExpFilter||/\w/,srcDir=frontSlash(path.normalize(srcDir)),destDir=frontSlash(path.normalize(destDir));var i,srcFileName,destFileName,fileNames=file.getFilteredFileList(srcDir,regExpFilter,!0),copiedFiles=[];for(i=0;i<fileNames.length;i++)destFileName=(srcFileName=fileNames[i]).replace(srcDir,destDir),file.copyFile(srcFileName,destFileName,onlyCopyNew)&&copiedFiles.push(destFileName);return copiedFiles.length?copiedFiles:null},copyFile:function(srcFileName,destFileName,onlyCopyNew){var parentDir;return!(onlyCopyNew&&file.exists(destFileName)&&fs.statSync(destFileName).mtime.getTime()>=fs.statSync(srcFileName).mtime.getTime())&&(parentDir=path.dirname(destFileName),file.exists(parentDir)||mkFullDir(parentDir),fs.writeFileSync(destFileName,fs.readFileSync(srcFileName,"binary"),"binary"),!0)},renameFile:function(from,to){return fs.renameSync(from,to)},readFile:function(path,encoding){"utf-8"===encoding&&(encoding="utf8"),encoding=encoding||"utf8";var text=fs.readFileSync(path,encoding);return 0===text.indexOf("\ufeff")&&(text=text.substring(1,text.length)),text},readFileAsync:function(path,encoding){var d=prim();try{d.resolve(file.readFile(path,encoding))}catch(e){d.reject(e)}return d.promise},saveUtf8File:function(fileName,fileContents){file.saveFile(fileName,fileContents,"utf8")},saveFile:function(fileName,fileContents,encoding){var parentDir;"utf-8"===encoding&&(encoding="utf8"),encoding=encoding||"utf8",parentDir=path.dirname(fileName),file.exists(parentDir)||mkFullDir(parentDir),fs.writeFileSync(fileName,fileContents,encoding)},deleteFile:function(fileName){var files,i;if(file.exists(fileName))if(fs.lstatSync(fileName).isDirectory()){for(files=fs.readdirSync(fileName),i=0;i<files.length;i++)this.deleteFile(path.join(fileName,files[i]));fs.rmdirSync(fileName)}else fs.unlinkSync(fileName)},deleteEmptyDirs:function(startDir){var dirFileArray,i,fileName,filePath;if(file.exists(startDir)){for(dirFileArray=fs.readdirSync(startDir),i=0;i<dirFileArray.length;i++)fileName=dirFileArray[i],filePath=path.join(startDir,fileName),fs.lstatSync(filePath).isDirectory()&&file.deleteEmptyDirs(filePath);0===fs.readdirSync(startDir).length&&file.deleteFile(startDir)}}}}),"rhino"===env&&define("rhino/file",["prim"],function(prim){var file={backSlashRegExp:/\\/g,exclusionRegExp:/^\./,getLineSeparator:function(){return file.lineSeparator},lineSeparator:java.lang.System.getProperty("line.separator"),exists:function(fileName){return new java.io.File(fileName).exists()},parent:function(fileName){return file.absPath(new java.io.File(fileName).getParentFile())},normalize:function(fileName){return file.absPath(fileName)},isFile:function(path){return new java.io.File(path).isFile()},isDirectory:function(path){return new java.io.File(path).isDirectory()},absPath:function(fileObj){return"string"==typeof fileObj&&(fileObj=new java.io.File(fileObj)),(fileObj.getCanonicalPath()+"").replace(file.backSlashRegExp,"/")},getFilteredFileList:function(startDir,regExpFilters,makeUnixPaths,startDirIsJavaObject){var topDir,regExpInclude,regExpExclude,dirFileArray,i,fileObj,filePath,ok,files=[];if(topDir=startDir,startDirIsJavaObject||(topDir=new java.io.File(startDir)),regExpInclude=regExpFilters.include||regExpFilters,regExpExclude=regExpFilters.exclude||null,topDir.exists())for(dirFileArray=topDir.listFiles(),i=0;i<dirFileArray.length;i++)(fileObj=dirFileArray[i]).isFile()?(filePath=fileObj.getPath(),makeUnixPaths&&-1===(filePath=String(filePath)).indexOf("/")&&(filePath=filePath.replace(/\\/g,"/")),ok=!0,regExpInclude&&(ok=filePath.match(regExpInclude)),ok&&regExpExclude&&(ok=!filePath.match(regExpExclude)),!ok||file.exclusionRegExp&&file.exclusionRegExp.test(fileObj.getName())||files.push(filePath)):!fileObj.isDirectory()||file.exclusionRegExp&&file.exclusionRegExp.test(fileObj.getName())||this.getFilteredFileList(fileObj,regExpFilters,makeUnixPaths,!0).forEach(function(dirFile){files.push(dirFile)});return files},copyDir:function(srcDir,destDir,regExpFilter,onlyCopyNew){regExpFilter=regExpFilter||/\w/;var i,srcFileName,destFileName,fileNames=file.getFilteredFileList(srcDir,regExpFilter,!0),copiedFiles=[];for(i=0;i<fileNames.length;i++)destFileName=(srcFileName=fileNames[i]).replace(srcDir,destDir),file.copyFile(srcFileName,destFileName,onlyCopyNew)&&copiedFiles.push(destFileName);return copiedFiles.length?copiedFiles:null},copyFile:function(srcFileName,destFileName,onlyCopyNew){var srcFile,parentDir,srcChannel,destChannel,destFile=new java.io.File(destFileName);if(onlyCopyNew&&(srcFile=new java.io.File(srcFileName),destFile.exists()&&destFile.lastModified()>=srcFile.lastModified()))return!1;if(!(parentDir=destFile.getParentFile()).exists()&&!parentDir.mkdirs())throw"Could not create directory: "+parentDir.getCanonicalPath();return srcChannel=new java.io.FileInputStream(srcFileName).getChannel(),(destChannel=new java.io.FileOutputStream(destFileName).getChannel()).transferFrom(srcChannel,0,srcChannel.size()),srcChannel.close(),destChannel.close(),!0},renameFile:function(from,to){return new java.io.File(from).renameTo(new java.io.File(to))},readFile:function(path,encoding){encoding=encoding||"utf-8";var stringBuffer,line,fileObj=new java.io.File(path),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(fileObj),encoding));try{for(stringBuffer=new java.lang.StringBuffer,(line=input.readLine())&&line.length()&&65279===line.charAt(0)&&(line=line.substring(1));null!==line;)stringBuffer.append(line),stringBuffer.append(file.lineSeparator),line=input.readLine();return String(stringBuffer.toString())}finally{input.close()}},readFileAsync:function(path,encoding){var d=prim();try{d.resolve(file.readFile(path,encoding))}catch(e){d.reject(e)}return d.promise},saveUtf8File:function(fileName,fileContents){file.saveFile(fileName,fileContents,"utf-8")},saveFile:function(fileName,fileContents,encoding){var outWriter,parentDir,os,outFile=new java.io.File(fileName);if(!(parentDir=outFile.getAbsoluteFile().getParentFile()).exists()&&!parentDir.mkdirs())throw"Could not create directory: "+parentDir.getAbsolutePath();outWriter=encoding?new java.io.OutputStreamWriter(new java.io.FileOutputStream(outFile),encoding):new java.io.OutputStreamWriter(new java.io.FileOutputStream(outFile)),os=new java.io.BufferedWriter(outWriter);try{"undefined"!=typeof importPackage?os.write(fileContents):os.write(new java.lang.String(fileContents))}finally{os.close()}},deleteFile:function(fileName){var files,i,fileObj=new java.io.File(fileName);if(fileObj.exists()){if(fileObj.isDirectory())for(files=fileObj.listFiles(),i=0;i<files.length;i++)this.deleteFile(files[i]);fileObj.delete()}},deleteEmptyDirs:function(startDir,startDirIsJavaObject){var dirFileArray,i,fileObj,topDir=startDir;if(startDirIsJavaObject||(topDir=new java.io.File(startDir)),topDir.exists()){for(dirFileArray=topDir.listFiles(),i=0;i<dirFileArray.length;i++)(fileObj=dirFileArray[i]).isDirectory()&&file.deleteEmptyDirs(fileObj,!0);0===topDir.listFiles().length&&file.deleteFile(String(topDir.getPath()))}}};return file}),"xpconnect"===env&&define("xpconnect/file",["prim"],function(prim){var file,Cc=Components.classes,Ci=Components.interfaces,xpfile=xpcUtil.xpfile;return file={backSlashRegExp:/\\/g,exclusionRegExp:/^\./,getLineSeparator:function(){return file.lineSeparator},lineSeparator:"@mozilla.org/windows-registry-key;1"in Cc?"\r\n":"\n",exists:function(fileName){return xpfile(fileName).exists()},parent:function(fileName){return xpfile(fileName).parent},normalize:function(fileName){return file.absPath(fileName)},isFile:function(path){return xpfile(path).isFile()},isDirectory:function(path){return xpfile(path).isDirectory()},absPath:function(fileObj){return"string"==typeof fileObj&&(fileObj=xpfile(fileObj)),fileObj.path},getFilteredFileList:function(startDir,regExpFilters,makeUnixPaths,startDirIsObject){var topDir,regExpInclude,regExpExclude,dirFileArray,fileObj,filePath,ok,files=[];if(topDir=startDir,startDirIsObject||(topDir=xpfile(startDir)),regExpInclude=regExpFilters.include||regExpFilters,regExpExclude=regExpFilters.exclude||null,topDir.exists())for(dirFileArray=topDir.directoryEntries;dirFileArray.hasMoreElements();)(fileObj=dirFileArray.getNext().QueryInterface(Ci.nsILocalFile)).isFile()?(filePath=fileObj.path,makeUnixPaths&&-1===filePath.indexOf("/")&&(filePath=filePath.replace(/\\/g,"/")),ok=!0,regExpInclude&&(ok=filePath.match(regExpInclude)),ok&&regExpExclude&&(ok=!filePath.match(regExpExclude)),!ok||file.exclusionRegExp&&file.exclusionRegExp.test(fileObj.leafName)||files.push(filePath)):!fileObj.isDirectory()||file.exclusionRegExp&&file.exclusionRegExp.test(fileObj.leafName)||this.getFilteredFileList(fileObj,regExpFilters,makeUnixPaths,!0).forEach(function(dirFile){files.push(dirFile)});return files},copyDir:function(srcDir,destDir,regExpFilter,onlyCopyNew){regExpFilter=regExpFilter||/\w/;var i,srcFileName,destFileName,fileNames=file.getFilteredFileList(srcDir,regExpFilter,!0),copiedFiles=[];for(i=0;i<fileNames.length;i+=1)destFileName=(srcFileName=fileNames[i]).replace(srcDir,destDir),file.copyFile(srcFileName,destFileName,onlyCopyNew)&&copiedFiles.push(destFileName);return copiedFiles.length?copiedFiles:null},copyFile:function(srcFileName,destFileName,onlyCopyNew){var destFile=xpfile(destFileName),srcFile=xpfile(srcFileName);return!(onlyCopyNew&&destFile.exists()&&destFile.lastModifiedTime>=srcFile.lastModifiedTime)&&(srcFile.copyTo(destFile.parent,destFile.leafName),!0)},renameFile:function(from,to){var toFile=xpfile(to);return xpfile(from).moveTo(toFile.parent,toFile.leafName)},readFile:xpcUtil.readFile,readFileAsync:function(path,encoding){var d=prim();try{d.resolve(file.readFile(path,encoding))}catch(e){d.reject(e)}return d.promise},saveUtf8File:function(fileName,fileContents){file.saveFile(fileName,fileContents,"utf-8")},saveFile:function(fileName,fileContents,encoding){var outStream,convertStream,dirObj,fileObj=xpfile(fileName);(dirObj=fileObj.parent).exists()||dirObj.create(1,511);try{(outStream=Cc["@mozilla.org/network/file-output-stream;1"].createInstance(Ci.nsIFileOutputStream)).init(fileObj,42,511,0),(convertStream=Cc["@mozilla.org/intl/converter-output-stream;1"].createInstance(Ci.nsIConverterOutputStream)).init(outStream,encoding,0,0),convertStream.writeString(fileContents)}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}finally{convertStream&&convertStream.close(),outStream&&outStream.close()}},deleteFile:function(fileName){var fileObj=xpfile(fileName);fileObj.exists()&&fileObj.remove(!0)},deleteEmptyDirs:function(startDir,startDirIsObject){var dirFileArray,fileObj,topDir=startDir;if(startDirIsObject||(topDir=xpfile(startDir)),topDir.exists()){for(dirFileArray=topDir.directoryEntries;dirFileArray.hasMoreElements();)(fileObj=dirFileArray.getNext().QueryInterface(Ci.nsILocalFile)).isDirectory()&&file.deleteEmptyDirs(fileObj,!0);(dirFileArray=topDir.directoryEntries).hasMoreElements()||file.deleteFile(topDir.path)}}}}),"browser"===env&&define("browser/quit",function(){"use strict";return function(code){}}),"node"===env&&define("node/quit",function(){"use strict";return function(code){function exit(){0===draining?process.exit(code):--draining}var draining=0;process.stdout.bufferSize&&(draining+=1,process.stdout.once("drain",exit)),process.stderr.bufferSize&&(draining+=1,process.stderr.once("drain",exit)),exit()}}),"rhino"===env&&define("rhino/quit",function(){"use strict";return function(code){return quit(code)}}),"xpconnect"===env&&define("xpconnect/quit",function(){"use strict";return function(code){return quit(code)}}),"browser"===env&&define("browser/print",function(){return function(msg){console.log(msg)}}),"node"===env&&define("node/print",function(){return function(msg){console.log(msg)}}),"rhino"===env&&define("rhino/print",function(){return print}),"xpconnect"===env&&define("xpconnect/print",function(){return print}),define("logger",["env!env/print"],function(print){return{TRACE:0,INFO:1,WARN:2,ERROR:3,SILENT:4,level:0,logPrefix:"",logLevel:function(level){this.level=level},trace:function(message){this.level<=this.TRACE&&this._print(message)},info:function(message){this.level<=this.INFO&&this._print(message)},warn:function(message){this.level<=this.WARN&&this._print(message)},error:function(message){this.level<=this.ERROR&&this._print(message)},_print:function(message){this._sysPrint((this.logPrefix?this.logPrefix+" ":"")+message)},_sysPrint:function(message){print(message)}}}),root=this,factory=function(){return modules=[function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var comment_handler_1=__webpack_require__(1),jsx_parser_1=__webpack_require__(3),parser_1=__webpack_require__(8),tokenizer_1=__webpack_require__(15);function parse(code,options,delegate){function proxyDelegate(node,metadata){delegate&&delegate(node,metadata),commentHandler&&commentHandler.visit(node,metadata)}var commentHandler=null,parserDelegate="function"==typeof delegate?proxyDelegate:null,collectComment=!1;if(options){collectComment="boolean"==typeof options.comment&&options.comment;var attachComment="boolean"==typeof options.attachComment&&options.attachComment;(collectComment||attachComment)&&((commentHandler=new comment_handler_1.CommentHandler).attach=attachComment,options.comment=!0,parserDelegate=proxyDelegate)}var parser,isModule=!1;options&&"string"==typeof options.sourceType&&(isModule="module"===options.sourceType),parser=options&&"boolean"==typeof options.jsx&&options.jsx?new jsx_parser_1.JSXParser(code,options,parserDelegate):new parser_1.Parser(code,options,parserDelegate);var ast=isModule?parser.parseModule():parser.parseScript();return collectComment&&commentHandler&&(ast.comments=commentHandler.comments),parser.config.tokens&&(ast.tokens=parser.tokens),parser.config.tolerant&&(ast.errors=parser.errorHandler.errors),ast}exports.parse=parse,exports.parseModule=function(code,options,delegate){var parsingOptions=options||{};return parsingOptions.sourceType="module",parse(code,parsingOptions,delegate)},exports.parseScript=function(code,options,delegate){var parsingOptions=options||{};return parsingOptions.sourceType="script",parse(code,parsingOptions,delegate)},exports.tokenize=function(code,options,delegate){var tokens,tokenizer=new tokenizer_1.Tokenizer(code,options);tokens=[];try{for(;;){var token=tokenizer.getNextToken();if(!token)break;delegate&&(token=delegate(token)),tokens.push(token)}}catch(e){tokenizer.errorHandler.tolerate(e)}return tokenizer.errorHandler.tolerant&&(tokens.errors=tokenizer.errors()),tokens};var syntax_1=__webpack_require__(2);exports.Syntax=syntax_1.Syntax,exports.version="4.0.1"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var syntax_1=__webpack_require__(2),CommentHandler=function(){function CommentHandler(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return CommentHandler.prototype.insertInnerComments=function(node,metadata){if(node.type===syntax_1.Syntax.BlockStatement&&0===node.body.length){for(var innerComments=[],i=this.leading.length-1;0<=i;--i){var entry=this.leading[i];metadata.end.offset>=entry.start&&(innerComments.unshift(entry.comment),this.leading.splice(i,1),this.trailing.splice(i,1))}innerComments.length&&(node.innerComments=innerComments)}},CommentHandler.prototype.findTrailingComments=function(metadata){var trailingComments=[];if(0<this.trailing.length){for(var i=this.trailing.length-1;0<=i;--i){var entry_1=this.trailing[i];entry_1.start>=metadata.end.offset&&trailingComments.unshift(entry_1.comment)}return this.trailing.length=0,trailingComments}var entry=this.stack[this.stack.length-1];if(entry&&entry.node.trailingComments){var firstComment=entry.node.trailingComments[0];firstComment&&firstComment.range[0]>=metadata.end.offset&&(trailingComments=entry.node.trailingComments,delete entry.node.trailingComments)}return trailingComments},CommentHandler.prototype.findLeadingComments=function(metadata){for(var target,leadingComments=[];0<this.stack.length;){if(!((entry=this.stack[this.stack.length-1])&&entry.start>=metadata.start.offset))break;target=entry.node,this.stack.pop()}if(target){for(var i=(target.leadingComments?target.leadingComments.length:0)-1;0<=i;--i){var comment=target.leadingComments[i];comment.range[1]<=metadata.start.offset&&(leadingComments.unshift(comment),target.leadingComments.splice(i,1))}return target.leadingComments&&0===target.leadingComments.length&&delete target.leadingComments,leadingComments}for(i=this.leading.length-1;0<=i;--i){var entry;(entry=this.leading[i]).start<=metadata.start.offset&&(leadingComments.unshift(entry.comment),this.leading.splice(i,1))}return leadingComments},CommentHandler.prototype.visitNode=function(node,metadata){if(!(node.type===syntax_1.Syntax.Program&&0<node.body.length)){this.insertInnerComments(node,metadata);var trailingComments=this.findTrailingComments(metadata),leadingComments=this.findLeadingComments(metadata);0<leadingComments.length&&(node.leadingComments=leadingComments),0<trailingComments.length&&(node.trailingComments=trailingComments),this.stack.push({node:node,start:metadata.start.offset})}},CommentHandler.prototype.visitComment=function(node,metadata){var type="L"===node.type[0]?"Line":"Block",comment={type:type,value:node.value};if(node.range&&(comment.range=node.range),node.loc&&(comment.loc=node.loc),this.comments.push(comment),this.attach){var entry={comment:{type:type,value:node.value,range:[metadata.start.offset,metadata.end.offset]},start:metadata.start.offset};node.loc&&(entry.comment.loc=node.loc),node.type=type,this.leading.push(entry),this.trailing.push(entry)}},CommentHandler.prototype.visit=function(node,metadata){"LineComment"===node.type||"BlockComment"===node.type?this.visitComment(node,metadata):this.attach&&this.visitNode(node,metadata)},CommentHandler}();exports.CommentHandler=CommentHandler},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var character_1=__webpack_require__(4),JSXNode=__webpack_require__(5),jsx_syntax_1=__webpack_require__(6),Node=__webpack_require__(7),parser_1=__webpack_require__(8),token_1=__webpack_require__(13),xhtml_entities_1=__webpack_require__(14);function getQualifiedElementName(elementName){var qualifiedName;switch(elementName.type){case jsx_syntax_1.JSXSyntax.JSXIdentifier:qualifiedName=elementName.name;break;case jsx_syntax_1.JSXSyntax.JSXNamespacedName:var ns=elementName;qualifiedName=getQualifiedElementName(ns.namespace)+":"+getQualifiedElementName(ns.name);break;case jsx_syntax_1.JSXSyntax.JSXMemberExpression:var expr=elementName;qualifiedName=getQualifiedElementName(expr.object)+"."+getQualifiedElementName(expr.property)}return qualifiedName}token_1.TokenName[100]="JSXIdentifier",token_1.TokenName[101]="JSXText";var JSXParser=function(_super){function JSXParser(code,options,delegate){return _super.call(this,code,options,delegate)||this}return __extends(JSXParser,_super),JSXParser.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():_super.prototype.parsePrimaryExpression.call(this)},JSXParser.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},JSXParser.prototype.finishJSX=function(){this.nextToken()},JSXParser.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},JSXParser.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},JSXParser.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},JSXParser.prototype.scanXHTMLEntity=function(quote){for(var result="&",valid=!0,terminated=!1,numeric=!1,hex=!1;!this.scanner.eof()&&valid&&!terminated;){var ch=this.scanner.source[this.scanner.index];if(ch===quote)break;if(terminated=";"===ch,result+=ch,++this.scanner.index,!terminated)switch(result.length){case 2:numeric="#"===ch;break;case 3:numeric&&(valid=(hex="x"===ch)||character_1.Character.isDecimalDigit(ch.charCodeAt(0)),numeric=numeric&&!hex);break;default:valid=(valid=valid&&!(numeric&&!character_1.Character.isDecimalDigit(ch.charCodeAt(0))))&&!(hex&&!character_1.Character.isHexDigit(ch.charCodeAt(0)))}}if(valid&&terminated&&2<result.length){var str=result.substr(1,result.length-2);numeric&&1<str.length?result=String.fromCharCode(parseInt(str.substr(1),10)):hex&&2<str.length?result=String.fromCharCode(parseInt("0"+str.substr(1),16)):numeric||hex||!xhtml_entities_1.XHTMLEntities[str]||(result=xhtml_entities_1.XHTMLEntities[str])}return result},JSXParser.prototype.lexJSX=function(){var cp=this.scanner.source.charCodeAt(this.scanner.index);if(60===cp||62===cp||47===cp||58===cp||61===cp||123===cp||125===cp)return{type:7,value:value=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===cp||39===cp){for(var start=this.scanner.index,quote=this.scanner.source[this.scanner.index++],str="";!this.scanner.eof();){if((ch=this.scanner.source[this.scanner.index++])===quote)break;str+="&"===ch?this.scanXHTMLEntity(quote):ch}return{type:8,value:str,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:start,end:this.scanner.index}}if(46===cp){var n1=this.scanner.source.charCodeAt(this.scanner.index+1),n2=this.scanner.source.charCodeAt(this.scanner.index+2),value=46===n1&&46===n2?"...":".";start=this.scanner.index;return this.scanner.index+=value.length,{type:7,value:value,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:start,end:this.scanner.index}}if(96===cp)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(character_1.Character.isIdentifierStart(cp)&&92!==cp){start=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var ch=this.scanner.source.charCodeAt(this.scanner.index);if(character_1.Character.isIdentifierPart(ch)&&92!==ch)++this.scanner.index;else{if(45!==ch)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(start,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:start,end:this.scanner.index}}return this.scanner.lex()},JSXParser.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var token=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(token)),token},JSXParser.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var start=this.scanner.index,text="";!this.scanner.eof();){var ch=this.scanner.source[this.scanner.index];if("{"===ch||"<"===ch)break;++this.scanner.index,text+=ch,character_1.Character.isLineTerminator(ch.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===ch&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var token={type:101,value:text,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:start,end:this.scanner.index};return 0<text.length&&this.config.tokens&&this.tokens.push(this.convertToken(token)),token},JSXParser.prototype.peekJSXToken=function(){var state=this.scanner.saveState();this.scanner.scanComments();var next=this.lexJSX();return this.scanner.restoreState(state),next},JSXParser.prototype.expectJSX=function(value){var token=this.nextJSXToken();7===token.type&&token.value===value||this.throwUnexpectedToken(token)},JSXParser.prototype.matchJSX=function(value){var next=this.peekJSXToken();return 7===next.type&&next.value===value},JSXParser.prototype.parseJSXIdentifier=function(){var node=this.createJSXNode(),token=this.nextJSXToken();return 100!==token.type&&this.throwUnexpectedToken(token),this.finalize(node,new JSXNode.JSXIdentifier(token.value))},JSXParser.prototype.parseJSXElementName=function(){var node=this.createJSXNode(),elementName=this.parseJSXIdentifier();if(this.matchJSX(":")){var namespace=elementName;this.expectJSX(":");var name_1=this.parseJSXIdentifier();elementName=this.finalize(node,new JSXNode.JSXNamespacedName(namespace,name_1))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var object=elementName;this.expectJSX(".");var property=this.parseJSXIdentifier();elementName=this.finalize(node,new JSXNode.JSXMemberExpression(object,property))}return elementName},JSXParser.prototype.parseJSXAttributeName=function(){var attributeName,node=this.createJSXNode(),identifier=this.parseJSXIdentifier();if(this.matchJSX(":")){var namespace=identifier;this.expectJSX(":");var name_2=this.parseJSXIdentifier();attributeName=this.finalize(node,new JSXNode.JSXNamespacedName(namespace,name_2))}else attributeName=identifier;return attributeName},JSXParser.prototype.parseJSXStringLiteralAttribute=function(){var node=this.createJSXNode(),token=this.nextJSXToken();8!==token.type&&this.throwUnexpectedToken(token);var raw=this.getTokenRaw(token);return this.finalize(node,new Node.Literal(token.value,raw))},JSXParser.prototype.parseJSXExpressionAttribute=function(){var node=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var expression=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(node,new JSXNode.JSXExpressionContainer(expression))},JSXParser.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},JSXParser.prototype.parseJSXNameValueAttribute=function(){var node=this.createJSXNode(),name=this.parseJSXAttributeName(),value=null;return this.matchJSX("=")&&(this.expectJSX("="),value=this.parseJSXAttributeValue()),this.finalize(node,new JSXNode.JSXAttribute(name,value))},JSXParser.prototype.parseJSXSpreadAttribute=function(){var node=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var argument=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(node,new JSXNode.JSXSpreadAttribute(argument))},JSXParser.prototype.parseJSXAttributes=function(){for(var attributes=[];!this.matchJSX("/")&&!this.matchJSX(">");){var attribute=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();attributes.push(attribute)}return attributes},JSXParser.prototype.parseJSXOpeningElement=function(){var node=this.createJSXNode();this.expectJSX("<");var name=this.parseJSXElementName(),attributes=this.parseJSXAttributes(),selfClosing=this.matchJSX("/");return selfClosing&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(node,new JSXNode.JSXOpeningElement(name,selfClosing,attributes))},JSXParser.prototype.parseJSXBoundaryElement=function(){var node=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var name_3=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(node,new JSXNode.JSXClosingElement(name_3))}var name=this.parseJSXElementName(),attributes=this.parseJSXAttributes(),selfClosing=this.matchJSX("/");return selfClosing&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(node,new JSXNode.JSXOpeningElement(name,selfClosing,attributes))},JSXParser.prototype.parseJSXEmptyExpression=function(){var node=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(node,new JSXNode.JSXEmptyExpression)},JSXParser.prototype.parseJSXExpressionContainer=function(){var expression,node=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(expression=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),expression=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(node,new JSXNode.JSXExpressionContainer(expression))},JSXParser.prototype.parseJSXChildren=function(){for(var children=[];!this.scanner.eof();){var node=this.createJSXChildNode(),token=this.nextJSXText();if(token.start<token.end){var raw=this.getTokenRaw(token),child=this.finalize(node,new JSXNode.JSXText(token.value,raw));children.push(child)}if("{"!==this.scanner.source[this.scanner.index])break;var container=this.parseJSXExpressionContainer();children.push(container)}return children},JSXParser.prototype.parseComplexJSXElement=function(el){for(var stack=[];!this.scanner.eof();){el.children=el.children.concat(this.parseJSXChildren());var node=this.createJSXChildNode(),element=this.parseJSXBoundaryElement();if(element.type===jsx_syntax_1.JSXSyntax.JSXOpeningElement){var opening=element;if(opening.selfClosing){var child=this.finalize(node,new JSXNode.JSXElement(opening,[],null));el.children.push(child)}else stack.push(el),el={node:node,opening:opening,closing:null,children:[]}}if(element.type===jsx_syntax_1.JSXSyntax.JSXClosingElement){el.closing=element;var open_1=getQualifiedElementName(el.opening.name);if(open_1!==getQualifiedElementName(el.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",open_1),!(0<stack.length))break;child=this.finalize(el.node,new JSXNode.JSXElement(el.opening,el.children,el.closing));(el=stack[stack.length-1]).children.push(child),stack.pop()}}return el},JSXParser.prototype.parseJSXElement=function(){var node=this.createJSXNode(),opening=this.parseJSXOpeningElement(),children=[],closing=null;if(!opening.selfClosing){var el=this.parseComplexJSXElement({node:node,opening:opening,closing:closing,children:children});children=el.children,closing=el.closing}return this.finalize(node,new JSXNode.JSXElement(opening,children,closing))},JSXParser.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var element=this.parseJSXElement();return this.finishJSX(),element},JSXParser.prototype.isStartOfExpression=function(){return _super.prototype.isStartOfExpression.call(this)||this.match("<")},JSXParser}(parser_1.Parser);exports.JSXParser=JSXParser},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Regex={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};exports.Character={fromCodePoint:function(cp){return cp<65536?String.fromCharCode(cp):String.fromCharCode(55296+(cp-65536>>10))+String.fromCharCode(56320+(cp-65536&1023))},isWhiteSpace:function(cp){return 32===cp||9===cp||11===cp||12===cp||160===cp||5760<=cp&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(cp)},isLineTerminator:function(cp){return 10===cp||13===cp||8232===cp||8233===cp},isIdentifierStart:function(cp){return 36===cp||95===cp||65<=cp&&cp<=90||97<=cp&&cp<=122||92===cp||128<=cp&&Regex.NonAsciiIdentifierStart.test(exports.Character.fromCodePoint(cp))},isIdentifierPart:function(cp){return 36===cp||95===cp||65<=cp&&cp<=90||97<=cp&&cp<=122||48<=cp&&cp<=57||92===cp||128<=cp&&Regex.NonAsciiIdentifierPart.test(exports.Character.fromCodePoint(cp))},isDecimalDigit:function(cp){return 48<=cp&&cp<=57},isHexDigit:function(cp){return 48<=cp&&cp<=57||65<=cp&&cp<=70||97<=cp&&cp<=102},isOctalDigit:function(cp){return 48<=cp&&cp<=55}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});function JSXClosingElement(name){this.type=jsx_syntax_1.JSXSyntax.JSXClosingElement,this.name=name}var jsx_syntax_1=__webpack_require__(6);exports.JSXClosingElement=JSXClosingElement;function JSXElement(openingElement,children,closingElement){this.type=jsx_syntax_1.JSXSyntax.JSXElement,this.openingElement=openingElement,this.children=children,this.closingElement=closingElement}exports.JSXElement=JSXElement;function JSXEmptyExpression(){this.type=jsx_syntax_1.JSXSyntax.JSXEmptyExpression}exports.JSXEmptyExpression=JSXEmptyExpression;function JSXExpressionContainer(expression){this.type=jsx_syntax_1.JSXSyntax.JSXExpressionContainer,this.expression=expression}exports.JSXExpressionContainer=JSXExpressionContainer;function JSXIdentifier(name){this.type=jsx_syntax_1.JSXSyntax.JSXIdentifier,this.name=name}exports.JSXIdentifier=JSXIdentifier;function JSXMemberExpression(object,property){this.type=jsx_syntax_1.JSXSyntax.JSXMemberExpression,this.object=object,this.property=property}exports.JSXMemberExpression=JSXMemberExpression;function JSXAttribute(name,value){this.type=jsx_syntax_1.JSXSyntax.JSXAttribute,this.name=name,this.value=value}exports.JSXAttribute=JSXAttribute;function JSXNamespacedName(namespace,name){this.type=jsx_syntax_1.JSXSyntax.JSXNamespacedName,this.namespace=namespace,this.name=name}exports.JSXNamespacedName=JSXNamespacedName;function JSXOpeningElement(name,selfClosing,attributes){this.type=jsx_syntax_1.JSXSyntax.JSXOpeningElement,this.name=name,this.selfClosing=selfClosing,this.attributes=attributes}exports.JSXOpeningElement=JSXOpeningElement;function JSXSpreadAttribute(argument){this.type=jsx_syntax_1.JSXSyntax.JSXSpreadAttribute,this.argument=argument}exports.JSXSpreadAttribute=JSXSpreadAttribute;function JSXText(value,raw){this.type=jsx_syntax_1.JSXSyntax.JSXText,this.value=value,this.raw=raw}exports.JSXText=JSXText},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});function ArrayExpression(elements){this.type=syntax_1.Syntax.ArrayExpression,this.elements=elements}var syntax_1=__webpack_require__(2);exports.ArrayExpression=ArrayExpression;function ArrayPattern(elements){this.type=syntax_1.Syntax.ArrayPattern,this.elements=elements}exports.ArrayPattern=ArrayPattern;function ArrowFunctionExpression(params,body,expression){this.type=syntax_1.Syntax.ArrowFunctionExpression,this.id=null,this.params=params,this.body=body,this.generator=!1,this.expression=expression,this.async=!1}exports.ArrowFunctionExpression=ArrowFunctionExpression;function AssignmentExpression(operator,left,right){this.type=syntax_1.Syntax.AssignmentExpression,this.operator=operator,this.left=left,this.right=right}exports.AssignmentExpression=AssignmentExpression;function AssignmentPattern(left,right){this.type=syntax_1.Syntax.AssignmentPattern,this.left=left,this.right=right}exports.AssignmentPattern=AssignmentPattern;function AsyncArrowFunctionExpression(params,body,expression){this.type=syntax_1.Syntax.ArrowFunctionExpression,this.id=null,this.params=params,this.body=body,this.generator=!1,this.expression=expression,this.async=!0}exports.AsyncArrowFunctionExpression=AsyncArrowFunctionExpression;function AsyncFunctionDeclaration(id,params,body){this.type=syntax_1.Syntax.FunctionDeclaration,this.id=id,this.params=params,this.body=body,this.generator=!1,this.expression=!1,this.async=!0}exports.AsyncFunctionDeclaration=AsyncFunctionDeclaration;function AsyncFunctionExpression(id,params,body){this.type=syntax_1.Syntax.FunctionExpression,this.id=id,this.params=params,this.body=body,this.generator=!1,this.expression=!1,this.async=!0}exports.AsyncFunctionExpression=AsyncFunctionExpression;function AwaitExpression(argument){this.type=syntax_1.Syntax.AwaitExpression,this.argument=argument}exports.AwaitExpression=AwaitExpression;function BinaryExpression(operator,left,right){var logical="||"===operator||"&&"===operator;this.type=logical?syntax_1.Syntax.LogicalExpression:syntax_1.Syntax.BinaryExpression,this.operator=operator,this.left=left,this.right=right}exports.BinaryExpression=BinaryExpression;function BlockStatement(body){this.type=syntax_1.Syntax.BlockStatement,this.body=body}exports.BlockStatement=BlockStatement;function BreakStatement(label){this.type=syntax_1.Syntax.BreakStatement,this.label=label}exports.BreakStatement=BreakStatement;function CallExpression(callee,args){this.type=syntax_1.Syntax.CallExpression,this.callee=callee,this.arguments=args}exports.CallExpression=CallExpression;function CatchClause(param,body){this.type=syntax_1.Syntax.CatchClause,this.param=param,this.body=body}exports.CatchClause=CatchClause;function ClassBody(body){this.type=syntax_1.Syntax.ClassBody,this.body=body}exports.ClassBody=ClassBody;function ClassDeclaration(id,superClass,body){this.type=syntax_1.Syntax.ClassDeclaration,this.id=id,this.superClass=superClass,this.body=body}exports.ClassDeclaration=ClassDeclaration;function ClassExpression(id,superClass,body){this.type=syntax_1.Syntax.ClassExpression,this.id=id,this.superClass=superClass,this.body=body}exports.ClassExpression=ClassExpression;function ComputedMemberExpression(object,property){this.type=syntax_1.Syntax.MemberExpression,this.computed=!0,this.object=object,this.property=property}exports.ComputedMemberExpression=ComputedMemberExpression;function ConditionalExpression(test,consequent,alternate){this.type=syntax_1.Syntax.ConditionalExpression,this.test=test,this.consequent=consequent,this.alternate=alternate}exports.ConditionalExpression=ConditionalExpression;function ContinueStatement(label){this.type=syntax_1.Syntax.ContinueStatement,this.label=label}exports.ContinueStatement=ContinueStatement;function DebuggerStatement(){this.type=syntax_1.Syntax.DebuggerStatement}exports.DebuggerStatement=DebuggerStatement;function Directive(expression,directive){this.type=syntax_1.Syntax.ExpressionStatement,this.expression=expression,this.directive=directive}exports.Directive=Directive;function DoWhileStatement(body,test){this.type=syntax_1.Syntax.DoWhileStatement,this.body=body,this.test=test}exports.DoWhileStatement=DoWhileStatement;function EmptyStatement(){this.type=syntax_1.Syntax.EmptyStatement}exports.EmptyStatement=EmptyStatement;function ExportAllDeclaration(source){this.type=syntax_1.Syntax.ExportAllDeclaration,this.source=source}exports.ExportAllDeclaration=ExportAllDeclaration;function ExportDefaultDeclaration(declaration){this.type=syntax_1.Syntax.ExportDefaultDeclaration,this.declaration=declaration}exports.ExportDefaultDeclaration=ExportDefaultDeclaration;function ExportNamedDeclaration(declaration,specifiers,source){this.type=syntax_1.Syntax.ExportNamedDeclaration,this.declaration=declaration,this.specifiers=specifiers,this.source=source}exports.ExportNamedDeclaration=ExportNamedDeclaration;function ExportSpecifier(local,exported){this.type=syntax_1.Syntax.ExportSpecifier,this.exported=exported,this.local=local}exports.ExportSpecifier=ExportSpecifier;function ExpressionStatement(expression){this.type=syntax_1.Syntax.ExpressionStatement,this.expression=expression}exports.ExpressionStatement=ExpressionStatement;function ForInStatement(left,right,body){this.type=syntax_1.Syntax.ForInStatement,this.left=left,this.right=right,this.body=body,this.each=!1}exports.ForInStatement=ForInStatement;function ForOfStatement(left,right,body){this.type=syntax_1.Syntax.ForOfStatement,this.left=left,this.right=right,this.body=body}exports.ForOfStatement=ForOfStatement;function ForStatement(init,test,update,body){this.type=syntax_1.Syntax.ForStatement,this.init=init,this.test=test,this.update=update,this.body=body}exports.ForStatement=ForStatement;function FunctionDeclaration(id,params,body,generator){this.type=syntax_1.Syntax.FunctionDeclaration,this.id=id,this.params=params,this.body=body,this.generator=generator,this.expression=!1,this.async=!1}exports.FunctionDeclaration=FunctionDeclaration;function FunctionExpression(id,params,body,generator){this.type=syntax_1.Syntax.FunctionExpression,this.id=id,this.params=params,this.body=body,this.generator=generator,this.expression=!1,this.async=!1}exports.FunctionExpression=FunctionExpression;function Identifier(name){this.type=syntax_1.Syntax.Identifier,this.name=name}exports.Identifier=Identifier;function IfStatement(test,consequent,alternate){this.type=syntax_1.Syntax.IfStatement,this.test=test,this.consequent=consequent,this.alternate=alternate}exports.IfStatement=IfStatement;function ImportDeclaration(specifiers,source){this.type=syntax_1.Syntax.ImportDeclaration,this.specifiers=specifiers,this.source=source}exports.ImportDeclaration=ImportDeclaration;function ImportDefaultSpecifier(local){this.type=syntax_1.Syntax.ImportDefaultSpecifier,this.local=local}exports.ImportDefaultSpecifier=ImportDefaultSpecifier;function ImportNamespaceSpecifier(local){this.type=syntax_1.Syntax.ImportNamespaceSpecifier,this.local=local}exports.ImportNamespaceSpecifier=ImportNamespaceSpecifier;function ImportSpecifier(local,imported){this.type=syntax_1.Syntax.ImportSpecifier,this.local=local,this.imported=imported}exports.ImportSpecifier=ImportSpecifier;function LabeledStatement(label,body){this.type=syntax_1.Syntax.LabeledStatement,this.label=label,this.body=body}exports.LabeledStatement=LabeledStatement;function Literal(value,raw){this.type=syntax_1.Syntax.Literal,this.value=value,this.raw=raw}exports.Literal=Literal;function MetaProperty(meta,property){this.type=syntax_1.Syntax.MetaProperty,this.meta=meta,this.property=property}exports.MetaProperty=MetaProperty;function MethodDefinition(key,computed,value,kind,isStatic){this.type=syntax_1.Syntax.MethodDefinition,this.key=key,this.computed=computed,this.value=value,this.kind=kind,this.static=isStatic}exports.MethodDefinition=MethodDefinition;function Module(body){this.type=syntax_1.Syntax.Program,this.body=body,this.sourceType="module"}exports.Module=Module;function NewExpression(callee,args){this.type=syntax_1.Syntax.NewExpression,this.callee=callee,this.arguments=args}exports.NewExpression=NewExpression;function ObjectExpression(properties){this.type=syntax_1.Syntax.ObjectExpression,this.properties=properties}exports.ObjectExpression=ObjectExpression;function ObjectPattern(properties){this.type=syntax_1.Syntax.ObjectPattern,this.properties=properties}exports.ObjectPattern=ObjectPattern;function Property(kind,key,computed,value,method,shorthand){this.type=syntax_1.Syntax.Property,this.key=key,this.computed=computed,this.value=value,this.kind=kind,this.method=method,this.shorthand=shorthand}exports.Property=Property;function RegexLiteral(value,raw,pattern,flags){this.type=syntax_1.Syntax.Literal,this.value=value,this.raw=raw,this.regex={pattern:pattern,flags:flags}}exports.RegexLiteral=RegexLiteral;function RestElement(argument){this.type=syntax_1.Syntax.RestElement,this.argument=argument}exports.RestElement=RestElement;function ReturnStatement(argument){this.type=syntax_1.Syntax.ReturnStatement,this.argument=argument}exports.ReturnStatement=ReturnStatement;function Script(body){this.type=syntax_1.Syntax.Program,this.body=body,this.sourceType="script"}exports.Script=Script;function SequenceExpression(expressions){this.type=syntax_1.Syntax.SequenceExpression,this.expressions=expressions}exports.SequenceExpression=SequenceExpression;function SpreadElement(argument){this.type=syntax_1.Syntax.SpreadElement,this.argument=argument}exports.SpreadElement=SpreadElement;function StaticMemberExpression(object,property){this.type=syntax_1.Syntax.MemberExpression,this.computed=!1,this.object=object,this.property=property}exports.StaticMemberExpression=StaticMemberExpression;function Super(){this.type=syntax_1.Syntax.Super}exports.Super=Super;function SwitchCase(test,consequent){this.type=syntax_1.Syntax.SwitchCase,this.test=test,this.consequent=consequent}exports.SwitchCase=SwitchCase;function SwitchStatement(discriminant,cases){this.type=syntax_1.Syntax.SwitchStatement,this.discriminant=discriminant,this.cases=cases}exports.SwitchStatement=SwitchStatement;function TaggedTemplateExpression(tag,quasi){this.type=syntax_1.Syntax.TaggedTemplateExpression,this.tag=tag,this.quasi=quasi}exports.TaggedTemplateExpression=TaggedTemplateExpression;function TemplateElement(value,tail){this.type=syntax_1.Syntax.TemplateElement,this.value=value,this.tail=tail}exports.TemplateElement=TemplateElement;function TemplateLiteral(quasis,expressions){this.type=syntax_1.Syntax.TemplateLiteral,this.quasis=quasis,this.expressions=expressions}exports.TemplateLiteral=TemplateLiteral;function ThisExpression(){this.type=syntax_1.Syntax.ThisExpression}exports.ThisExpression=ThisExpression;function ThrowStatement(argument){this.type=syntax_1.Syntax.ThrowStatement,this.argument=argument}exports.ThrowStatement=ThrowStatement;function TryStatement(block,handler,finalizer){this.type=syntax_1.Syntax.TryStatement,this.block=block,this.handler=handler,this.finalizer=finalizer}exports.TryStatement=TryStatement;function UnaryExpression(operator,argument){this.type=syntax_1.Syntax.UnaryExpression,this.operator=operator,this.argument=argument,this.prefix=!0}exports.UnaryExpression=UnaryExpression;function UpdateExpression(operator,argument,prefix){this.type=syntax_1.Syntax.UpdateExpression,this.operator=operator,this.argument=argument,this.prefix=prefix}exports.UpdateExpression=UpdateExpression;function VariableDeclaration(declarations,kind){this.type=syntax_1.Syntax.VariableDeclaration,this.declarations=declarations,this.kind=kind}exports.VariableDeclaration=VariableDeclaration;function VariableDeclarator(id,init){this.type=syntax_1.Syntax.VariableDeclarator,this.id=id,this.init=init}exports.VariableDeclarator=VariableDeclarator;function WhileStatement(test,body){this.type=syntax_1.Syntax.WhileStatement,this.test=test,this.body=body}exports.WhileStatement=WhileStatement;function WithStatement(object,body){this.type=syntax_1.Syntax.WithStatement,this.object=object,this.body=body}exports.WithStatement=WithStatement;function YieldExpression(argument,delegate){this.type=syntax_1.Syntax.YieldExpression,this.argument=argument,this.delegate=delegate}exports.YieldExpression=YieldExpression},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var assert_1=__webpack_require__(9),error_handler_1=__webpack_require__(10),messages_1=__webpack_require__(11),Node=__webpack_require__(7),scanner_1=__webpack_require__(12),syntax_1=__webpack_require__(2),token_1=__webpack_require__(13),Parser=function(){function Parser(code,options,delegate){void 0===options&&(options={}),this.config={range:"boolean"==typeof options.range&&options.range,loc:"boolean"==typeof options.loc&&options.loc,source:null,tokens:"boolean"==typeof options.tokens&&options.tokens,comment:"boolean"==typeof options.comment&&options.comment,tolerant:"boolean"==typeof options.tolerant&&options.tolerant},this.config.loc&&options.source&&null!==options.source&&(this.config.source=String(options.source)),this.delegate=delegate,this.errorHandler=new error_handler_1.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new scanner_1.Scanner(code,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return Parser.prototype.throwError=function(messageFormat){for(var values=[],_i=1;_i<arguments.length;_i++)values[_i-1]=arguments[_i];var args=Array.prototype.slice.call(arguments,1),msg=messageFormat.replace(/%(\d)/g,function(whole,idx){return assert_1.assert(idx<args.length,"Message reference must be in range"),args[idx]}),index=this.lastMarker.index,line=this.lastMarker.line,column=this.lastMarker.column+1;throw this.errorHandler.createError(index,line,column,msg)},Parser.prototype.tolerateError=function(messageFormat){for(var values=[],_i=1;_i<arguments.length;_i++)values[_i-1]=arguments[_i];var args=Array.prototype.slice.call(arguments,1),msg=messageFormat.replace(/%(\d)/g,function(whole,idx){return assert_1.assert(idx<args.length,"Message reference must be in range"),args[idx]}),index=this.lastMarker.index,line=this.scanner.lineNumber,column=this.lastMarker.column+1;this.errorHandler.tolerateError(index,line,column,msg)},Parser.prototype.unexpectedTokenError=function(token,message){var value,msg=message||messages_1.Messages.UnexpectedToken;if(value=token?(message||(msg=2===token.type?messages_1.Messages.UnexpectedEOS:3===token.type?messages_1.Messages.UnexpectedIdentifier:6===token.type?messages_1.Messages.UnexpectedNumber:8===token.type?messages_1.Messages.UnexpectedString:10===token.type?messages_1.Messages.UnexpectedTemplate:messages_1.Messages.UnexpectedToken,4===token.type&&(this.scanner.isFutureReservedWord(token.value)?msg=messages_1.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(token.value)&&(msg=messages_1.Messages.StrictReservedWord))),token.value):"ILLEGAL",msg=msg.replace("%0",value),token&&"number"==typeof token.lineNumber){var index=token.start,line=token.lineNumber,lastMarkerLineStart=this.lastMarker.index-this.lastMarker.column,column=token.start-lastMarkerLineStart+1;return this.errorHandler.createError(index,line,column,msg)}index=this.lastMarker.index,line=this.lastMarker.line,column=this.lastMarker.column+1;return this.errorHandler.createError(index,line,column,msg)},Parser.prototype.throwUnexpectedToken=function(token,message){throw this.unexpectedTokenError(token,message)},Parser.prototype.tolerateUnexpectedToken=function(token,message){this.errorHandler.tolerate(this.unexpectedTokenError(token,message))},Parser.prototype.collectComments=function(){if(this.config.comment){var comments=this.scanner.scanComments();if(0<comments.length&&this.delegate)for(var i=0;i<comments.length;++i){var e=comments[i],node=void 0;node={type:e.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(e.slice[0],e.slice[1])},this.config.range&&(node.range=e.range),this.config.loc&&(node.loc=e.loc);var metadata={start:{line:e.loc.start.line,column:e.loc.start.column,offset:e.range[0]},end:{line:e.loc.end.line,column:e.loc.end.column,offset:e.range[1]}};this.delegate(node,metadata)}}else this.scanner.scanComments()},Parser.prototype.getTokenRaw=function(token){return this.scanner.source.slice(token.start,token.end)},Parser.prototype.convertToken=function(token){var t={type:token_1.TokenName[token.type],value:this.getTokenRaw(token)};if(this.config.range&&(t.range=[token.start,token.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===token.type){var pattern=token.pattern,flags=token.flags;t.regex={pattern:pattern,flags:flags}}return t},Parser.prototype.nextToken=function(){var token=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var next=this.scanner.lex();return this.hasLineTerminator=token.lineNumber!==next.lineNumber,next&&this.context.strict&&3===next.type&&this.scanner.isStrictModeReservedWord(next.value)&&(next.type=4),this.lookahead=next,this.config.tokens&&2!==next.type&&this.tokens.push(this.convertToken(next)),token},Parser.prototype.nextRegexToken=function(){this.collectComments();var token=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(token))),this.lookahead=token,this.nextToken(),token},Parser.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},Parser.prototype.startNode=function(token,lastLineStart){void 0===lastLineStart&&(lastLineStart=0);var column=token.start-token.lineStart,line=token.lineNumber;return column<0&&(column+=lastLineStart,line--),{index:token.start,line:line,column:column}},Parser.prototype.finalize=function(marker,node){if(this.config.range&&(node.range=[marker.index,this.lastMarker.index]),this.config.loc&&(node.loc={start:{line:marker.line,column:marker.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(node.loc.source=this.config.source)),this.delegate){var metadata={start:{line:marker.line,column:marker.column,offset:marker.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(node,metadata)}return node},Parser.prototype.expect=function(value){var token=this.nextToken();7===token.type&&token.value===value||this.throwUnexpectedToken(token)},Parser.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var token=this.lookahead;7===token.type&&","===token.value?this.nextToken():7===token.type&&";"===token.value?(this.nextToken(),this.tolerateUnexpectedToken(token)):this.tolerateUnexpectedToken(token,messages_1.Messages.UnexpectedToken)}else this.expect(",")},Parser.prototype.expectKeyword=function(keyword){var token=this.nextToken();4===token.type&&token.value===keyword||this.throwUnexpectedToken(token)},Parser.prototype.match=function(value){return 7===this.lookahead.type&&this.lookahead.value===value},Parser.prototype.matchKeyword=function(keyword){return 4===this.lookahead.type&&this.lookahead.value===keyword},Parser.prototype.matchContextualKeyword=function(keyword){return 3===this.lookahead.type&&this.lookahead.value===keyword},Parser.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var op=this.lookahead.value;return"="===op||"*="===op||"**="===op||"/="===op||"%="===op||"+="===op||"-="===op||"<<="===op||">>="===op||">>>="===op||"&="===op||"^="===op||"|="===op},Parser.prototype.isolateCoverGrammar=function(parseFunction){var previousIsBindingElement=this.context.isBindingElement,previousIsAssignmentTarget=this.context.isAssignmentTarget,previousFirstCoverInitializedNameError=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var result=parseFunction.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=previousIsBindingElement,this.context.isAssignmentTarget=previousIsAssignmentTarget,this.context.firstCoverInitializedNameError=previousFirstCoverInitializedNameError,result},Parser.prototype.inheritCoverGrammar=function(parseFunction){var previousIsBindingElement=this.context.isBindingElement,previousIsAssignmentTarget=this.context.isAssignmentTarget,previousFirstCoverInitializedNameError=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var result=parseFunction.call(this);return this.context.isBindingElement=this.context.isBindingElement&&previousIsBindingElement,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&previousIsAssignmentTarget,this.context.firstCoverInitializedNameError=previousFirstCoverInitializedNameError||this.context.firstCoverInitializedNameError,result},Parser.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},Parser.prototype.parsePrimaryExpression=function(){var expr,token,raw,node=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),expr=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(node,new Node.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,messages_1.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,token=this.nextToken(),raw=this.getTokenRaw(token),expr=this.finalize(node,new Node.Literal(token.value,raw));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,token=this.nextToken(),raw=this.getTokenRaw(token),expr=this.finalize(node,new Node.Literal("true"===token.value,raw));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,token=this.nextToken(),raw=this.getTokenRaw(token),expr=this.finalize(node,new Node.Literal(null,raw));break;case 10:expr=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,expr=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":expr=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":expr=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,token=this.nextRegexToken(),raw=this.getTokenRaw(token),expr=this.finalize(node,new Node.RegexLiteral(token.regex,raw,token.pattern,token.flags));break;default:expr=this.throwUnexpectedToken(this.nextToken())}break;case 4:expr=!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?this.finalize(node,new Node.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),this.finalize(node,new Node.ThisExpression)):this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:expr=this.throwUnexpectedToken(this.nextToken())}return expr},Parser.prototype.parseSpreadElement=function(){var node=this.createNode();this.expect("...");var arg=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(node,new Node.SpreadElement(arg))},Parser.prototype.parseArrayInitializer=function(){var node=this.createNode(),elements=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),elements.push(null);else if(this.match("...")){var element=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),elements.push(element)}else elements.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(node,new Node.ArrayExpression(elements))},Parser.prototype.parsePropertyMethod=function(params){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var previousStrict=this.context.strict,previousAllowStrictDirective=this.context.allowStrictDirective;this.context.allowStrictDirective=params.simple;var body=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&params.firstRestricted&&this.tolerateUnexpectedToken(params.firstRestricted,params.message),this.context.strict&&params.stricted&&this.tolerateUnexpectedToken(params.stricted,params.message),this.context.strict=previousStrict,this.context.allowStrictDirective=previousAllowStrictDirective,body},Parser.prototype.parsePropertyMethodFunction=function(){var node=this.createNode(),previousAllowYield=this.context.allowYield;this.context.allowYield=!0;var params=this.parseFormalParameters(),method=this.parsePropertyMethod(params);return this.context.allowYield=previousAllowYield,this.finalize(node,new Node.FunctionExpression(null,params.params,method,!1))},Parser.prototype.parsePropertyMethodAsyncFunction=function(){var node=this.createNode(),previousAllowYield=this.context.allowYield,previousAwait=this.context.await;this.context.allowYield=!1,this.context.await=!0;var params=this.parseFormalParameters(),method=this.parsePropertyMethod(params);return this.context.allowYield=previousAllowYield,this.context.await=previousAwait,this.finalize(node,new Node.AsyncFunctionExpression(null,params.params,method))},Parser.prototype.parseObjectPropertyKey=function(){var key,node=this.createNode(),token=this.nextToken();switch(token.type){case 8:case 6:this.context.strict&&token.octal&&this.tolerateUnexpectedToken(token,messages_1.Messages.StrictOctalLiteral);var raw=this.getTokenRaw(token);key=this.finalize(node,new Node.Literal(token.value,raw));break;case 3:case 1:case 5:case 4:key=this.finalize(node,new Node.Identifier(token.value));break;case 7:"["===token.value?(key=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):key=this.throwUnexpectedToken(token);break;default:key=this.throwUnexpectedToken(token)}return key},Parser.prototype.isPropertyKey=function(key,value){return key.type===syntax_1.Syntax.Identifier&&key.name===value||key.type===syntax_1.Syntax.Literal&&key.value===value},Parser.prototype.parseObjectProperty=function(hasProto){var kind,node=this.createNode(),token=this.lookahead,key=null,value=null,computed=!1,method=!1,shorthand=!1,isAsync=!1;if(3===token.type){var id=token.value;this.nextToken(),computed=this.match("["),key=(isAsync=!(this.hasLineTerminator||"async"!==id||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(node,new Node.Identifier(id))}else this.match("*")?this.nextToken():(computed=this.match("["),key=this.parseObjectPropertyKey());var lookaheadPropertyKey=this.qualifiedPropertyName(this.lookahead);if(3===token.type&&!isAsync&&"get"===token.value&&lookaheadPropertyKey)kind="get",computed=this.match("["),key=this.parseObjectPropertyKey(),this.context.allowYield=!1,value=this.parseGetterMethod();else if(3===token.type&&!isAsync&&"set"===token.value&&lookaheadPropertyKey)kind="set",computed=this.match("["),key=this.parseObjectPropertyKey(),value=this.parseSetterMethod();else if(7===token.type&&"*"===token.value&&lookaheadPropertyKey)kind="init",computed=this.match("["),key=this.parseObjectPropertyKey(),value=this.parseGeneratorMethod(),method=!0;else if(key||this.throwUnexpectedToken(this.lookahead),kind="init",this.match(":")&&!isAsync)!computed&&this.isPropertyKey(key,"__proto__")&&(hasProto.value&&this.tolerateError(messages_1.Messages.DuplicateProtoProperty),hasProto.value=!0),this.nextToken(),value=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))value=isAsync?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),method=!0;else if(3===token.type){id=this.finalize(node,new Node.Identifier(token.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),shorthand=!0;var init=this.isolateCoverGrammar(this.parseAssignmentExpression);value=this.finalize(node,new Node.AssignmentPattern(id,init))}else shorthand=!0,value=id}else this.throwUnexpectedToken(this.nextToken());return this.finalize(node,new Node.Property(kind,key,computed,value,method,shorthand))},Parser.prototype.parseObjectInitializer=function(){var node=this.createNode();this.expect("{");for(var properties=[],hasProto={value:!1};!this.match("}");)properties.push(this.parseObjectProperty(hasProto)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(node,new Node.ObjectExpression(properties))},Parser.prototype.parseTemplateHead=function(){assert_1.assert(this.lookahead.head,"Template literal must start with a template head");var node=this.createNode(),token=this.nextToken(),raw=token.value,cooked=token.cooked;return this.finalize(node,new Node.TemplateElement({raw:raw,cooked:cooked},token.tail))},Parser.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var node=this.createNode(),token=this.nextToken(),raw=token.value,cooked=token.cooked;return this.finalize(node,new Node.TemplateElement({raw:raw,cooked:cooked},token.tail))},Parser.prototype.parseTemplateLiteral=function(){var node=this.createNode(),expressions=[],quasis=[],quasi=this.parseTemplateHead();for(quasis.push(quasi);!quasi.tail;)expressions.push(this.parseExpression()),quasi=this.parseTemplateElement(),quasis.push(quasi);return this.finalize(node,new Node.TemplateLiteral(quasis,expressions))},Parser.prototype.reinterpretExpressionAsPattern=function(expr){switch(expr.type){case syntax_1.Syntax.Identifier:case syntax_1.Syntax.MemberExpression:case syntax_1.Syntax.RestElement:case syntax_1.Syntax.AssignmentPattern:break;case syntax_1.Syntax.SpreadElement:expr.type=syntax_1.Syntax.RestElement,this.reinterpretExpressionAsPattern(expr.argument);break;case syntax_1.Syntax.ArrayExpression:expr.type=syntax_1.Syntax.ArrayPattern;for(var i=0;i<expr.elements.length;i++)null!==expr.elements[i]&&this.reinterpretExpressionAsPattern(expr.elements[i]);break;case syntax_1.Syntax.ObjectExpression:expr.type=syntax_1.Syntax.ObjectPattern;for(i=0;i<expr.properties.length;i++)this.reinterpretExpressionAsPattern(expr.properties[i].value);break;case syntax_1.Syntax.AssignmentExpression:expr.type=syntax_1.Syntax.AssignmentPattern,delete expr.operator,this.reinterpretExpressionAsPattern(expr.left)}},Parser.prototype.parseGroupExpression=function(){var expr;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),expr={type:"ArrowParameterPlaceHolder",params:[],async:!1};else{var startToken=this.lookahead,params=[];if(this.match("..."))expr=this.parseRestElement(params),this.expect(")"),this.match("=>")||this.expect("=>"),expr={type:"ArrowParameterPlaceHolder",params:[expr],async:!1};else{var arrow=!1;if(this.context.isBindingElement=!0,expr=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var expressions=[];for(this.context.isAssignmentTarget=!1,expressions.push(expr);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var i=0;i<expressions.length;i++)this.reinterpretExpressionAsPattern(expressions[i]);expr={type:"ArrowParameterPlaceHolder",params:expressions,async:!(arrow=!0)}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),expressions.push(this.parseRestElement(params)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(i=0;i<expressions.length;i++)this.reinterpretExpressionAsPattern(expressions[i]);expr={type:"ArrowParameterPlaceHolder",params:expressions,async:!(arrow=!0)}}else expressions.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(arrow)break}arrow||(expr=this.finalize(this.startNode(startToken),new Node.SequenceExpression(expressions)))}if(!arrow){if(this.expect(")"),this.match("=>")&&(expr.type===syntax_1.Syntax.Identifier&&"yield"===expr.name&&(expr={type:"ArrowParameterPlaceHolder",params:[expr],async:!(arrow=!0)}),!arrow)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),expr.type===syntax_1.Syntax.SequenceExpression)for(i=0;i<expr.expressions.length;i++)this.reinterpretExpressionAsPattern(expr.expressions[i]);else this.reinterpretExpressionAsPattern(expr);expr={type:"ArrowParameterPlaceHolder",params:expr.type===syntax_1.Syntax.SequenceExpression?expr.expressions:[expr],async:!1}}this.context.isBindingElement=!1}}}return expr},Parser.prototype.parseArguments=function(){this.expect("(");var args=[];if(!this.match(")"))for(;;){var expr=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(args.push(expr),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),args},Parser.prototype.isIdentifierName=function(token){return 3===token.type||4===token.type||1===token.type||5===token.type},Parser.prototype.parseIdentifierName=function(){var node=this.createNode(),token=this.nextToken();return this.isIdentifierName(token)||this.throwUnexpectedToken(token),this.finalize(node,new Node.Identifier(token.value))},Parser.prototype.parseNewExpression=function(){var expr,node=this.createNode(),id=this.parseIdentifierName();if(assert_1.assert("new"===id.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value){var property=this.parseIdentifierName();expr=new Node.MetaProperty(id,property)}else this.throwUnexpectedToken(this.lookahead);else{var callee=this.isolateCoverGrammar(this.parseLeftHandSideExpression),args=this.match("(")?this.parseArguments():[];expr=new Node.NewExpression(callee,args),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(node,expr)},Parser.prototype.parseAsyncArgument=function(){var arg=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,arg},Parser.prototype.parseAsyncArguments=function(){this.expect("(");var args=[];if(!this.match(")"))for(;;){var expr=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(args.push(expr),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),args},Parser.prototype.parseLeftHandSideExpressionAllowCall=function(){var expr,startToken=this.lookahead,maybeAsync=this.matchContextualKeyword("async"),previousAllowIn=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(expr=this.createNode(),this.nextToken(),expr=this.finalize(expr,new Node.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):expr=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var property=this.parseIdentifierName();expr=this.finalize(this.startNode(startToken),new Node.StaticMemberExpression(expr,property))}else if(this.match("(")){var asyncArrow=maybeAsync&&startToken.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var args=asyncArrow?this.parseAsyncArguments():this.parseArguments();if(expr=this.finalize(this.startNode(startToken),new Node.CallExpression(expr,args)),asyncArrow&&this.match("=>")){for(var i=0;i<args.length;++i)this.reinterpretExpressionAsPattern(args[i]);expr={type:"ArrowParameterPlaceHolder",params:args,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");property=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),expr=this.finalize(this.startNode(startToken),new Node.ComputedMemberExpression(expr,property))}else{if(10!==this.lookahead.type||!this.lookahead.head)break;var quasi=this.parseTemplateLiteral();expr=this.finalize(this.startNode(startToken),new Node.TaggedTemplateExpression(expr,quasi))}return this.context.allowIn=previousAllowIn,expr},Parser.prototype.parseSuper=function(){var node=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(node,new Node.Super)},Parser.prototype.parseLeftHandSideExpression=function(){assert_1.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var node=this.startNode(this.lookahead),expr=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var property=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),expr=this.finalize(node,new Node.ComputedMemberExpression(expr,property))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");property=this.parseIdentifierName();expr=this.finalize(node,new Node.StaticMemberExpression(expr,property))}else{if(10!==this.lookahead.type||!this.lookahead.head)break;var quasi=this.parseTemplateLiteral();expr=this.finalize(node,new Node.TaggedTemplateExpression(expr,quasi))}return expr},Parser.prototype.parseUpdateExpression=function(){var expr,startToken=this.lookahead;if(this.match("++")||this.match("--")){var node=this.startNode(startToken),token=this.nextToken();expr=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&expr.type===syntax_1.Syntax.Identifier&&this.scanner.isRestrictedWord(expr.name)&&this.tolerateError(messages_1.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(messages_1.Messages.InvalidLHSInAssignment);var prefix=!0;expr=this.finalize(node,new Node.UpdateExpression(token.value,expr,prefix)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(expr=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match("++")||this.match("--"))){this.context.strict&&expr.type===syntax_1.Syntax.Identifier&&this.scanner.isRestrictedWord(expr.name)&&this.tolerateError(messages_1.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(messages_1.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var operator=this.nextToken().value;prefix=!1;expr=this.finalize(this.startNode(startToken),new Node.UpdateExpression(operator,expr,prefix))}return expr},Parser.prototype.parseAwaitExpression=function(){var node=this.createNode();this.nextToken();var argument=this.parseUnaryExpression();return this.finalize(node,new Node.AwaitExpression(argument))},Parser.prototype.parseUnaryExpression=function(){var expr;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var node=this.startNode(this.lookahead),token=this.nextToken();expr=this.inheritCoverGrammar(this.parseUnaryExpression),expr=this.finalize(node,new Node.UnaryExpression(token.value,expr)),this.context.strict&&"delete"===expr.operator&&expr.argument.type===syntax_1.Syntax.Identifier&&this.tolerateError(messages_1.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else expr=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return expr},Parser.prototype.parseExponentiationExpression=function(){var startToken=this.lookahead,expr=this.inheritCoverGrammar(this.parseUnaryExpression);if(expr.type!==syntax_1.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var left=expr,right=this.isolateCoverGrammar(this.parseExponentiationExpression);expr=this.finalize(this.startNode(startToken),new Node.BinaryExpression("**",left,right))}return expr},Parser.prototype.binaryPrecedence=function(token){var op=token.value;return 7===token.type?this.operatorPrecedence[op]||0:4===token.type&&("instanceof"===op||this.context.allowIn&&"in"===op)?7:0},Parser.prototype.parseBinaryExpression=function(){var startToken=this.lookahead,expr=this.inheritCoverGrammar(this.parseExponentiationExpression),token=this.lookahead,prec=this.binaryPrecedence(token);if(0<prec){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var markers=[startToken,this.lookahead],left=expr,right=this.isolateCoverGrammar(this.parseExponentiationExpression),stack=[left,token.value,right],precedences=[prec];!((prec=this.binaryPrecedence(this.lookahead))<=0);){for(;2<stack.length&&prec<=precedences[precedences.length-1];){right=stack.pop();var operator=stack.pop();precedences.pop(),left=stack.pop(),markers.pop();var node=this.startNode(markers[markers.length-1]);stack.push(this.finalize(node,new Node.BinaryExpression(operator,left,right)))}stack.push(this.nextToken().value),precedences.push(prec),markers.push(this.lookahead),stack.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var i=stack.length-1;expr=stack[i];for(var lastMarker=markers.pop();1<i;){var marker=markers.pop(),lastLineStart=lastMarker&&lastMarker.lineStart;node=this.startNode(marker,lastLineStart),operator=stack[i-1];expr=this.finalize(node,new Node.BinaryExpression(operator,stack[i-2],expr)),i-=2,lastMarker=marker}}return expr},Parser.prototype.parseConditionalExpression=function(){var startToken=this.lookahead,expr=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var previousAllowIn=this.context.allowIn;this.context.allowIn=!0;var consequent=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=previousAllowIn,this.expect(":");var alternate=this.isolateCoverGrammar(this.parseAssignmentExpression);expr=this.finalize(this.startNode(startToken),new Node.ConditionalExpression(expr,consequent,alternate)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return expr},Parser.prototype.checkPatternParam=function(options,param){switch(param.type){case syntax_1.Syntax.Identifier:this.validateParam(options,param,param.name);break;case syntax_1.Syntax.RestElement:this.checkPatternParam(options,param.argument);break;case syntax_1.Syntax.AssignmentPattern:this.checkPatternParam(options,param.left);break;case syntax_1.Syntax.ArrayPattern:for(var i=0;i<param.elements.length;i++)null!==param.elements[i]&&this.checkPatternParam(options,param.elements[i]);break;case syntax_1.Syntax.ObjectPattern:for(i=0;i<param.properties.length;i++)this.checkPatternParam(options,param.properties[i].value)}options.simple=options.simple&&param instanceof Node.Identifier},Parser.prototype.reinterpretAsCoverFormalsList=function(expr){var options,params=[expr],asyncArrow=!1;switch(expr.type){case syntax_1.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":params=expr.params,asyncArrow=expr.async;break;default:return null}options={simple:!0,paramSet:{}};for(var i=0;i<params.length;++i){(param=params[i]).type===syntax_1.Syntax.AssignmentPattern?param.right.type===syntax_1.Syntax.YieldExpression&&(param.right.argument&&this.throwUnexpectedToken(this.lookahead),param.right.type=syntax_1.Syntax.Identifier,param.right.name="yield",delete param.right.argument,delete param.right.delegate):asyncArrow&&param.type===syntax_1.Syntax.Identifier&&"await"===param.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(options,param),params[i]=param}if(this.context.strict||!this.context.allowYield)for(i=0;i<params.length;++i){var param;(param=params[i]).type===syntax_1.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(options.message===messages_1.Messages.StrictParamDupe){var token=this.context.strict?options.stricted:options.firstRestricted;this.throwUnexpectedToken(token,options.message)}return{simple:options.simple,params:params,stricted:options.stricted,firstRestricted:options.firstRestricted,message:options.message}},Parser.prototype.parseAssignmentExpression=function(){var expr;if(!this.context.allowYield&&this.matchKeyword("yield"))expr=this.parseYieldExpression();else{var startToken=this.lookahead,token=startToken;if(expr=this.parseConditionalExpression(),3===token.type&&token.lineNumber===this.lookahead.lineNumber&&"async"===token.value&&(3===this.lookahead.type||this.matchKeyword("yield"))){var arg=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(arg),expr={type:"ArrowParameterPlaceHolder",params:[arg],async:!0}}if("ArrowParameterPlaceHolder"===expr.type||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var isAsync=expr.async,list=this.reinterpretAsCoverFormalsList(expr);if(list){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var previousStrict=this.context.strict,previousAllowStrictDirective=this.context.allowStrictDirective;this.context.allowStrictDirective=list.simple;var previousAllowYield=this.context.allowYield,previousAwait=this.context.await;this.context.allowYield=!0,this.context.await=isAsync;var node=this.startNode(startToken);this.expect("=>");var body=void 0;if(this.match("{")){var previousAllowIn=this.context.allowIn;this.context.allowIn=!0,body=this.parseFunctionSourceElements(),this.context.allowIn=previousAllowIn}else body=this.isolateCoverGrammar(this.parseAssignmentExpression);var expression=body.type!==syntax_1.Syntax.BlockStatement;this.context.strict&&list.firstRestricted&&this.throwUnexpectedToken(list.firstRestricted,list.message),this.context.strict&&list.stricted&&this.tolerateUnexpectedToken(list.stricted,list.message),expr=isAsync?this.finalize(node,new Node.AsyncArrowFunctionExpression(list.params,body,expression)):this.finalize(node,new Node.ArrowFunctionExpression(list.params,body,expression)),this.context.strict=previousStrict,this.context.allowStrictDirective=previousAllowStrictDirective,this.context.allowYield=previousAllowYield,this.context.await=previousAwait}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(messages_1.Messages.InvalidLHSInAssignment),this.context.strict&&expr.type===syntax_1.Syntax.Identifier){var id=expr;this.scanner.isRestrictedWord(id.name)&&this.tolerateUnexpectedToken(token,messages_1.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(id.name)&&this.tolerateUnexpectedToken(token,messages_1.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(expr):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var operator=(token=this.nextToken()).value,right=this.isolateCoverGrammar(this.parseAssignmentExpression);expr=this.finalize(this.startNode(startToken),new Node.AssignmentExpression(operator,expr,right)),this.context.firstCoverInitializedNameError=null}}return expr},Parser.prototype.parseExpression=function(){var startToken=this.lookahead,expr=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var expressions=[];for(expressions.push(expr);2!==this.lookahead.type&&this.match(",");)this.nextToken(),expressions.push(this.isolateCoverGrammar(this.parseAssignmentExpression));expr=this.finalize(this.startNode(startToken),new Node.SequenceExpression(expressions))}return expr},Parser.prototype.parseStatementListItem=function(){var statement;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,messages_1.Messages.IllegalExportDeclaration),statement=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,messages_1.Messages.IllegalImportDeclaration),statement=this.parseImportDeclaration();break;case"const":statement=this.parseLexicalDeclaration({inFor:!1});break;case"function":statement=this.parseFunctionDeclaration();break;case"class":statement=this.parseClassDeclaration();break;case"let":statement=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:statement=this.parseStatement()}else statement=this.parseStatement();return statement},Parser.prototype.parseBlock=function(){var node=this.createNode();this.expect("{");for(var block=[];!this.match("}");)block.push(this.parseStatementListItem());return this.expect("}"),this.finalize(node,new Node.BlockStatement(block))},Parser.prototype.parseLexicalBinding=function(kind,options){var node=this.createNode(),id=this.parsePattern([],kind);this.context.strict&&id.type===syntax_1.Syntax.Identifier&&this.scanner.isRestrictedWord(id.name)&&this.tolerateError(messages_1.Messages.StrictVarName);var init=null;return"const"===kind?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),init=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(messages_1.Messages.DeclarationMissingInitializer,"const")):(!options.inFor&&id.type!==syntax_1.Syntax.Identifier||this.match("="))&&(this.expect("="),init=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(node,new Node.VariableDeclarator(id,init))},Parser.prototype.parseBindingList=function(kind,options){for(var list=[this.parseLexicalBinding(kind,options)];this.match(",");)this.nextToken(),list.push(this.parseLexicalBinding(kind,options));return list},Parser.prototype.isLexicalDeclaration=function(){var state=this.scanner.saveState();this.scanner.scanComments();var next=this.scanner.lex();return this.scanner.restoreState(state),3===next.type||7===next.type&&"["===next.value||7===next.type&&"{"===next.value||4===next.type&&"let"===next.value||4===next.type&&"yield"===next.value},Parser.prototype.parseLexicalDeclaration=function(options){var node=this.createNode(),kind=this.nextToken().value;assert_1.assert("let"===kind||"const"===kind,"Lexical declaration must be either let or const");var declarations=this.parseBindingList(kind,options);return this.consumeSemicolon(),this.finalize(node,new Node.VariableDeclaration(declarations,kind))},Parser.prototype.parseBindingRestElement=function(params,kind){var node=this.createNode();this.expect("...");var arg=this.parsePattern(params,kind);return this.finalize(node,new Node.RestElement(arg))},Parser.prototype.parseArrayPattern=function(params,kind){var node=this.createNode();this.expect("[");for(var elements=[];!this.match("]");)if(this.match(","))this.nextToken(),elements.push(null);else{if(this.match("...")){elements.push(this.parseBindingRestElement(params,kind));break}elements.push(this.parsePatternWithDefault(params,kind)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(node,new Node.ArrayPattern(elements))},Parser.prototype.parsePropertyPattern=function(params,kind){var key,value,node=this.createNode(),computed=!1,shorthand=!1;if(3===this.lookahead.type){var keyToken=this.lookahead;key=this.parseVariableIdentifier();var init=this.finalize(node,new Node.Identifier(keyToken.value));if(this.match("=")){params.push(keyToken),shorthand=!0,this.nextToken();var expr=this.parseAssignmentExpression();value=this.finalize(this.startNode(keyToken),new Node.AssignmentPattern(init,expr))}else value=this.match(":")?(this.expect(":"),this.parsePatternWithDefault(params,kind)):(params.push(keyToken),shorthand=!0,init)}else computed=this.match("["),key=this.parseObjectPropertyKey(),this.expect(":"),value=this.parsePatternWithDefault(params,kind);return this.finalize(node,new Node.Property("init",key,computed,value,!1,shorthand))},Parser.prototype.parseObjectPattern=function(params,kind){var node=this.createNode(),properties=[];for(this.expect("{");!this.match("}");)properties.push(this.parsePropertyPattern(params,kind)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(node,new Node.ObjectPattern(properties))},Parser.prototype.parsePattern=function(params,kind){return this.match("[")?this.parseArrayPattern(params,kind):this.match("{")?this.parseObjectPattern(params,kind):(!this.matchKeyword("let")||"const"!==kind&&"let"!==kind||this.tolerateUnexpectedToken(this.lookahead,messages_1.Messages.LetInLexicalBinding),params.push(this.lookahead),this.parseVariableIdentifier(kind))},Parser.prototype.parsePatternWithDefault=function(params,kind){var startToken=this.lookahead,pattern=this.parsePattern(params,kind);if(this.match("=")){this.nextToken();var previousAllowYield=this.context.allowYield;this.context.allowYield=!0;var right=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=previousAllowYield,pattern=this.finalize(this.startNode(startToken),new Node.AssignmentPattern(pattern,right))}return pattern},Parser.prototype.parseVariableIdentifier=function(kind){var node=this.createNode(),token=this.nextToken();return 4===token.type&&"yield"===token.value?this.context.strict?this.tolerateUnexpectedToken(token,messages_1.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(token):3!==token.type?this.context.strict&&4===token.type&&this.scanner.isStrictModeReservedWord(token.value)?this.tolerateUnexpectedToken(token,messages_1.Messages.StrictReservedWord):!this.context.strict&&"let"===token.value&&"var"===kind||this.throwUnexpectedToken(token):(this.context.isModule||this.context.await)&&3===token.type&&"await"===token.value&&this.tolerateUnexpectedToken(token),this.finalize(node,new Node.Identifier(token.value))},Parser.prototype.parseVariableDeclaration=function(options){var node=this.createNode(),id=this.parsePattern([],"var");this.context.strict&&id.type===syntax_1.Syntax.Identifier&&this.scanner.isRestrictedWord(id.name)&&this.tolerateError(messages_1.Messages.StrictVarName);var init=null;return this.match("=")?(this.nextToken(),init=this.isolateCoverGrammar(this.parseAssignmentExpression)):id.type===syntax_1.Syntax.Identifier||options.inFor||this.expect("="),this.finalize(node,new Node.VariableDeclarator(id,init))},Parser.prototype.parseVariableDeclarationList=function(options){var opt={inFor:options.inFor},list=[];for(list.push(this.parseVariableDeclaration(opt));this.match(",");)this.nextToken(),list.push(this.parseVariableDeclaration(opt));return list},Parser.prototype.parseVariableStatement=function(){var node=this.createNode();this.expectKeyword("var");var declarations=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(node,new Node.VariableDeclaration(declarations,"var"))},Parser.prototype.parseEmptyStatement=function(){var node=this.createNode();return this.expect(";"),this.finalize(node,new Node.EmptyStatement)},Parser.prototype.parseExpressionStatement=function(){var node=this.createNode(),expr=this.parseExpression();return this.consumeSemicolon(),this.finalize(node,new Node.ExpressionStatement(expr))},Parser.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(messages_1.Messages.StrictFunction),this.parseStatement()},Parser.prototype.parseIfStatement=function(){var consequent,node=this.createNode(),alternate=null;this.expectKeyword("if"),this.expect("(");var test=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),consequent=this.finalize(this.createNode(),new Node.EmptyStatement)):(this.expect(")"),consequent=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),alternate=this.parseIfClause())),this.finalize(node,new Node.IfStatement(test,consequent,alternate))},Parser.prototype.parseDoWhileStatement=function(){var node=this.createNode();this.expectKeyword("do");var previousInIteration=this.context.inIteration;this.context.inIteration=!0;var body=this.parseStatement();this.context.inIteration=previousInIteration,this.expectKeyword("while"),this.expect("(");var test=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(node,new Node.DoWhileStatement(body,test))},Parser.prototype.parseWhileStatement=function(){var body,node=this.createNode();this.expectKeyword("while"),this.expect("(");var test=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),body=this.finalize(this.createNode(),new Node.EmptyStatement);else{this.expect(")");var previousInIteration=this.context.inIteration;this.context.inIteration=!0,body=this.parseStatement(),this.context.inIteration=previousInIteration}return this.finalize(node,new Node.WhileStatement(test,body))},Parser.prototype.parseForStatement=function(){var left,right,body,init=null,test=null,update=null,forIn=!0,node=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){init=this.createNode(),this.nextToken();var previousAllowIn=this.context.allowIn;this.context.allowIn=!1;var declarations=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=previousAllowIn,1===declarations.length&&this.matchKeyword("in")){var decl=declarations[0];decl.init&&(decl.id.type===syntax_1.Syntax.ArrayPattern||decl.id.type===syntax_1.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(messages_1.Messages.ForInOfLoopInitializer,"for-in"),init=this.finalize(init,new Node.VariableDeclaration(declarations,"var")),this.nextToken(),left=init,right=this.parseExpression(),init=null}else 1===declarations.length&&null===declarations[0].init&&this.matchContextualKeyword("of")?(init=this.finalize(init,new Node.VariableDeclaration(declarations,"var")),this.nextToken(),left=init,right=this.parseAssignmentExpression(),init=null,forIn=!1):(init=this.finalize(init,new Node.VariableDeclaration(declarations,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){init=this.createNode();var kind=this.nextToken().value;if(this.context.strict||"in"!==this.lookahead.value){previousAllowIn=this.context.allowIn;this.context.allowIn=!1;declarations=this.parseBindingList(kind,{inFor:!0});this.context.allowIn=previousAllowIn,1===declarations.length&&null===declarations[0].init&&this.matchKeyword("in")?(init=this.finalize(init,new Node.VariableDeclaration(declarations,kind)),this.nextToken(),left=init,right=this.parseExpression(),init=null):1===declarations.length&&null===declarations[0].init&&this.matchContextualKeyword("of")?(init=this.finalize(init,new Node.VariableDeclaration(declarations,kind)),this.nextToken(),left=init,right=this.parseAssignmentExpression(),init=null,forIn=!1):(this.consumeSemicolon(),init=this.finalize(init,new Node.VariableDeclaration(declarations,kind)))}else init=this.finalize(init,new Node.Identifier(kind)),this.nextToken(),left=init,right=this.parseExpression(),init=null}else{var initStartToken=this.lookahead;previousAllowIn=this.context.allowIn;if(this.context.allowIn=!1,init=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=previousAllowIn,this.matchKeyword("in"))this.context.isAssignmentTarget&&init.type!==syntax_1.Syntax.AssignmentExpression||this.tolerateError(messages_1.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(init),left=init,right=this.parseExpression(),init=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&init.type!==syntax_1.Syntax.AssignmentExpression||this.tolerateError(messages_1.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(init),left=init,right=this.parseAssignmentExpression(),init=null,forIn=!1;else{if(this.match(",")){for(var initSeq=[init];this.match(",");)this.nextToken(),initSeq.push(this.isolateCoverGrammar(this.parseAssignmentExpression));init=this.finalize(this.startNode(initStartToken),new Node.SequenceExpression(initSeq))}this.expect(";")}}if(void 0===left&&(this.match(";")||(test=this.parseExpression()),this.expect(";"),this.match(")")||(update=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),body=this.finalize(this.createNode(),new Node.EmptyStatement);else{this.expect(")");var previousInIteration=this.context.inIteration;this.context.inIteration=!0,body=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=previousInIteration}return void 0===left?this.finalize(node,new Node.ForStatement(init,test,update,body)):forIn?this.finalize(node,new Node.ForInStatement(left,right,body)):this.finalize(node,new Node.ForOfStatement(left,right,body))},Parser.prototype.parseContinueStatement=function(){var node=this.createNode();this.expectKeyword("continue");var label=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var id=this.parseVariableIdentifier(),key="$"+(label=id).name;Object.prototype.hasOwnProperty.call(this.context.labelSet,key)||this.throwError(messages_1.Messages.UnknownLabel,id.name)}return this.consumeSemicolon(),null!==label||this.context.inIteration||this.throwError(messages_1.Messages.IllegalContinue),this.finalize(node,new Node.ContinueStatement(label))},Parser.prototype.parseBreakStatement=function(){var node=this.createNode();this.expectKeyword("break");var label=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var id=this.parseVariableIdentifier(),key="$"+id.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,key)||this.throwError(messages_1.Messages.UnknownLabel,id.name),label=id}return this.consumeSemicolon(),null!==label||this.context.inIteration||this.context.inSwitch||this.throwError(messages_1.Messages.IllegalBreak),this.finalize(node,new Node.BreakStatement(label))},Parser.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(messages_1.Messages.IllegalReturn);var node=this.createNode();this.expectKeyword("return");var argument=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&2!==this.lookahead.type||8===this.lookahead.type||10===this.lookahead.type?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(node,new Node.ReturnStatement(argument))},Parser.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(messages_1.Messages.StrictModeWith);var body,node=this.createNode();this.expectKeyword("with"),this.expect("(");var object=this.parseExpression();return body=!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),this.finalize(this.createNode(),new Node.EmptyStatement)):(this.expect(")"),this.parseStatement()),this.finalize(node,new Node.WithStatement(object,body))},Parser.prototype.parseSwitchCase=function(){var test,node=this.createNode();test=this.matchKeyword("default")?(this.nextToken(),null):(this.expectKeyword("case"),this.parseExpression()),this.expect(":");for(var consequent=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)consequent.push(this.parseStatementListItem());return this.finalize(node,new Node.SwitchCase(test,consequent))},Parser.prototype.parseSwitchStatement=function(){var node=this.createNode();this.expectKeyword("switch"),this.expect("(");var discriminant=this.parseExpression();this.expect(")");var previousInSwitch=this.context.inSwitch,cases=[],defaultFound=!(this.context.inSwitch=!0);for(this.expect("{");!this.match("}");){var clause=this.parseSwitchCase();null===clause.test&&(defaultFound&&this.throwError(messages_1.Messages.MultipleDefaultsInSwitch),defaultFound=!0),cases.push(clause)}return this.expect("}"),this.context.inSwitch=previousInSwitch,this.finalize(node,new Node.SwitchStatement(discriminant,cases))},Parser.prototype.parseLabelledStatement=function(){var statement,node=this.createNode(),expr=this.parseExpression();if(expr.type===syntax_1.Syntax.Identifier&&this.match(":")){this.nextToken();var id=expr,key="$"+id.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,key)&&this.throwError(messages_1.Messages.Redeclaration,"Label",id.name),this.context.labelSet[key]=!0;var body=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),body=this.parseClassDeclaration();else if(this.matchKeyword("function")){var token=this.lookahead,declaration=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(token,messages_1.Messages.StrictFunction):declaration.generator&&this.tolerateUnexpectedToken(token,messages_1.Messages.GeneratorInLegacyContext),body=declaration}else body=this.parseStatement();delete this.context.labelSet[key],statement=new Node.LabeledStatement(id,body)}else this.consumeSemicolon(),statement=new Node.ExpressionStatement(expr);return this.finalize(node,statement)},Parser.prototype.parseThrowStatement=function(){var node=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(messages_1.Messages.NewlineAfterThrow);var argument=this.parseExpression();return this.consumeSemicolon(),this.finalize(node,new Node.ThrowStatement(argument))},Parser.prototype.parseCatchClause=function(){var node=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var params=[],param=this.parsePattern(params),paramMap={},i=0;i<params.length;i++){var key="$"+params[i].value;Object.prototype.hasOwnProperty.call(paramMap,key)&&this.tolerateError(messages_1.Messages.DuplicateBinding,params[i].value),paramMap[key]=!0}this.context.strict&&param.type===syntax_1.Syntax.Identifier&&this.scanner.isRestrictedWord(param.name)&&this.tolerateError(messages_1.Messages.StrictCatchVariable),this.expect(")");var body=this.parseBlock();return this.finalize(node,new Node.CatchClause(param,body))},Parser.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},Parser.prototype.parseTryStatement=function(){var node=this.createNode();this.expectKeyword("try");var block=this.parseBlock(),handler=this.matchKeyword("catch")?this.parseCatchClause():null,finalizer=this.matchKeyword("finally")?this.parseFinallyClause():null;return handler||finalizer||this.throwError(messages_1.Messages.NoCatchOrFinally),this.finalize(node,new Node.TryStatement(block,handler,finalizer))},Parser.prototype.parseDebuggerStatement=function(){var node=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(node,new Node.DebuggerStatement)},Parser.prototype.parseStatement=function(){var statement;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:statement=this.parseExpressionStatement();break;case 7:var value=this.lookahead.value;statement="{"===value?this.parseBlock():"("!==value&&";"===value?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:statement=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":statement=this.parseBreakStatement();break;case"continue":statement=this.parseContinueStatement();break;case"debugger":statement=this.parseDebuggerStatement();break;case"do":statement=this.parseDoWhileStatement();break;case"for":statement=this.parseForStatement();break;case"function":statement=this.parseFunctionDeclaration();break;case"if":statement=this.parseIfStatement();break;case"return":statement=this.parseReturnStatement();break;case"switch":statement=this.parseSwitchStatement();break;case"throw":statement=this.parseThrowStatement();break;case"try":statement=this.parseTryStatement();break;case"var":statement=this.parseVariableStatement();break;case"while":statement=this.parseWhileStatement();break;case"with":statement=this.parseWithStatement();break;default:statement=this.parseExpressionStatement()}break;default:statement=this.throwUnexpectedToken(this.lookahead)}return statement},Parser.prototype.parseFunctionSourceElements=function(){var node=this.createNode();this.expect("{");var body=this.parseDirectivePrologues(),previousLabelSet=this.context.labelSet,previousInIteration=this.context.inIteration,previousInSwitch=this.context.inSwitch,previousInFunctionBody=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)body.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=previousLabelSet,this.context.inIteration=previousInIteration,this.context.inSwitch=previousInSwitch,this.context.inFunctionBody=previousInFunctionBody,this.finalize(node,new Node.BlockStatement(body))},Parser.prototype.validateParam=function(options,param,name){var key="$"+name;this.context.strict?(this.scanner.isRestrictedWord(name)&&(options.stricted=param,options.message=messages_1.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(options.paramSet,key)&&(options.stricted=param,options.message=messages_1.Messages.StrictParamDupe)):options.firstRestricted||(this.scanner.isRestrictedWord(name)?(options.firstRestricted=param,options.message=messages_1.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(name)?(options.firstRestricted=param,options.message=messages_1.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(options.paramSet,key)&&(options.stricted=param,options.message=messages_1.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(options.paramSet,key,{value:!0,enumerable:!0,writable:!0,configurable:!0}):options.paramSet[key]=!0},Parser.prototype.parseRestElement=function(params){var node=this.createNode();this.expect("...");var arg=this.parsePattern(params);return this.match("=")&&this.throwError(messages_1.Messages.DefaultRestParameter),this.match(")")||this.throwError(messages_1.Messages.ParameterAfterRestParameter),this.finalize(node,new Node.RestElement(arg))},Parser.prototype.parseFormalParameter=function(options){for(var params=[],param=this.match("...")?this.parseRestElement(params):this.parsePatternWithDefault(params),i=0;i<params.length;i++)this.validateParam(options,params[i],params[i].value);options.simple=options.simple&&param instanceof Node.Identifier,options.params.push(param)},Parser.prototype.parseFormalParameters=function(firstRestricted){var options;if(options={simple:!0,params:[],firstRestricted:firstRestricted},this.expect("("),!this.match(")"))for(options.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(options),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:options.simple,params:options.params,stricted:options.stricted,firstRestricted:options.firstRestricted,message:options.message}},Parser.prototype.matchAsyncFunction=function(){var match=this.matchContextualKeyword("async");if(match){var state=this.scanner.saveState();this.scanner.scanComments();var next=this.scanner.lex();this.scanner.restoreState(state),match=state.lineNumber===next.lineNumber&&4===next.type&&"function"===next.value}return match},Parser.prototype.parseFunctionDeclaration=function(identifierIsOptional){var node=this.createNode(),isAsync=this.matchContextualKeyword("async");isAsync&&this.nextToken(),this.expectKeyword("function");var message,isGenerator=!isAsync&&this.match("*");isGenerator&&this.nextToken();var id=null,firstRestricted=null;if(!identifierIsOptional||!this.match("(")){var token=this.lookahead;id=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(token.value)&&this.tolerateUnexpectedToken(token,messages_1.Messages.StrictFunctionName):this.scanner.isRestrictedWord(token.value)?(firstRestricted=token,message=messages_1.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(token.value)&&(firstRestricted=token,message=messages_1.Messages.StrictReservedWord)}var previousAllowAwait=this.context.await,previousAllowYield=this.context.allowYield;this.context.await=isAsync,this.context.allowYield=!isGenerator;var formalParameters=this.parseFormalParameters(firstRestricted),params=formalParameters.params,stricted=formalParameters.stricted;firstRestricted=formalParameters.firstRestricted,formalParameters.message&&(message=formalParameters.message);var previousStrict=this.context.strict,previousAllowStrictDirective=this.context.allowStrictDirective;this.context.allowStrictDirective=formalParameters.simple;var body=this.parseFunctionSourceElements();return this.context.strict&&firstRestricted&&this.throwUnexpectedToken(firstRestricted,message),this.context.strict&&stricted&&this.tolerateUnexpectedToken(stricted,message),this.context.strict=previousStrict,this.context.allowStrictDirective=previousAllowStrictDirective,this.context.await=previousAllowAwait,this.context.allowYield=previousAllowYield,isAsync?this.finalize(node,new Node.AsyncFunctionDeclaration(id,params,body)):this.finalize(node,new Node.FunctionDeclaration(id,params,body,isGenerator))},Parser.prototype.parseFunctionExpression=function(){var node=this.createNode(),isAsync=this.matchContextualKeyword("async");isAsync&&this.nextToken(),this.expectKeyword("function");var message,isGenerator=!isAsync&&this.match("*");isGenerator&&this.nextToken();var firstRestricted,id=null,previousAllowAwait=this.context.await,previousAllowYield=this.context.allowYield;if(this.context.await=isAsync,this.context.allowYield=!isGenerator,!this.match("(")){var token=this.lookahead;id=this.context.strict||isGenerator||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(token.value)&&this.tolerateUnexpectedToken(token,messages_1.Messages.StrictFunctionName):this.scanner.isRestrictedWord(token.value)?(firstRestricted=token,message=messages_1.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(token.value)&&(firstRestricted=token,message=messages_1.Messages.StrictReservedWord)}var formalParameters=this.parseFormalParameters(firstRestricted),params=formalParameters.params,stricted=formalParameters.stricted;firstRestricted=formalParameters.firstRestricted,formalParameters.message&&(message=formalParameters.message);var previousStrict=this.context.strict,previousAllowStrictDirective=this.context.allowStrictDirective;this.context.allowStrictDirective=formalParameters.simple;var body=this.parseFunctionSourceElements();return this.context.strict&&firstRestricted&&this.throwUnexpectedToken(firstRestricted,message),this.context.strict&&stricted&&this.tolerateUnexpectedToken(stricted,message),this.context.strict=previousStrict,this.context.allowStrictDirective=previousAllowStrictDirective,this.context.await=previousAllowAwait,this.context.allowYield=previousAllowYield,isAsync?this.finalize(node,new Node.AsyncFunctionExpression(id,params,body)):this.finalize(node,new Node.FunctionExpression(id,params,body,isGenerator))},Parser.prototype.parseDirective=function(){var token=this.lookahead,node=this.createNode(),expr=this.parseExpression(),directive=expr.type===syntax_1.Syntax.Literal?this.getTokenRaw(token).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(node,directive?new Node.Directive(expr,directive):new Node.ExpressionStatement(expr))},Parser.prototype.parseDirectivePrologues=function(){for(var firstRestricted=null,body=[];;){var token=this.lookahead;if(8!==token.type)break;var statement=this.parseDirective();body.push(statement);var directive=statement.directive;if("string"!=typeof directive)break;"use strict"===directive?(this.context.strict=!0,firstRestricted&&this.tolerateUnexpectedToken(firstRestricted,messages_1.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(token,messages_1.Messages.IllegalLanguageModeDirective)):!firstRestricted&&token.octal&&(firstRestricted=token)}return body},Parser.prototype.qualifiedPropertyName=function(token){switch(token.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===token.value}return!1},Parser.prototype.parseGetterMethod=function(){var node=this.createNode(),previousAllowYield=this.context.allowYield;this.context.allowYield=!0;var formalParameters=this.parseFormalParameters();0<formalParameters.params.length&&this.tolerateError(messages_1.Messages.BadGetterArity);var method=this.parsePropertyMethod(formalParameters);return this.context.allowYield=previousAllowYield,this.finalize(node,new Node.FunctionExpression(null,formalParameters.params,method,!1))},Parser.prototype.parseSetterMethod=function(){var node=this.createNode(),previousAllowYield=this.context.allowYield;this.context.allowYield=!0;var formalParameters=this.parseFormalParameters();1!==formalParameters.params.length?this.tolerateError(messages_1.Messages.BadSetterArity):formalParameters.params[0]instanceof Node.RestElement&&this.tolerateError(messages_1.Messages.BadSetterRestParameter);var method=this.parsePropertyMethod(formalParameters);return this.context.allowYield=previousAllowYield,this.finalize(node,new Node.FunctionExpression(null,formalParameters.params,method,!1))},Parser.prototype.parseGeneratorMethod=function(){var node=this.createNode(),previousAllowYield=this.context.allowYield;this.context.allowYield=!0;var params=this.parseFormalParameters();this.context.allowYield=!1;var method=this.parsePropertyMethod(params);return this.context.allowYield=previousAllowYield,this.finalize(node,new Node.FunctionExpression(null,params.params,method,!0))},Parser.prototype.isStartOfExpression=function(){var start=!0,value=this.lookahead.value;switch(this.lookahead.type){case 7:start="["===value||"("===value||"{"===value||"+"===value||"-"===value||"!"===value||"~"===value||"++"===value||"--"===value||"/"===value||"/="===value;break;case 4:start="class"===value||"delete"===value||"function"===value||"let"===value||"new"===value||"super"===value||"this"===value||"typeof"===value||"void"===value||"yield"===value}return start},Parser.prototype.parseYieldExpression=function(){var node=this.createNode();this.expectKeyword("yield");var argument=null,delegate=!1;if(!this.hasLineTerminator){var previousAllowYield=this.context.allowYield;this.context.allowYield=!1,(delegate=this.match("*"))?(this.nextToken(),argument=this.parseAssignmentExpression()):this.isStartOfExpression()&&(argument=this.parseAssignmentExpression()),this.context.allowYield=previousAllowYield}return this.finalize(node,new Node.YieldExpression(argument,delegate))},Parser.prototype.parseClassElement=function(hasConstructor){var token=this.lookahead,node=this.createNode(),kind="",key=null,value=null,computed=!1,method=!1,isStatic=!1,isAsync=!1;if(this.match("*"))this.nextToken();else if(computed=this.match("["),"static"===(key=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(token=this.lookahead,isStatic=!0,computed=this.match("["),this.match("*")?this.nextToken():key=this.parseObjectPropertyKey()),3===token.type&&!this.hasLineTerminator&&"async"===token.value){var punctuator=this.lookahead.value;":"!==punctuator&&"("!==punctuator&&"*"!==punctuator&&(isAsync=!0,token=this.lookahead,key=this.parseObjectPropertyKey(),3===token.type&&"constructor"===token.value&&this.tolerateUnexpectedToken(token,messages_1.Messages.ConstructorIsAsync))}var lookaheadPropertyKey=this.qualifiedPropertyName(this.lookahead);return 3===token.type?"get"===token.value&&lookaheadPropertyKey?(kind="get",computed=this.match("["),key=this.parseObjectPropertyKey(),this.context.allowYield=!1,value=this.parseGetterMethod()):"set"===token.value&&lookaheadPropertyKey&&(kind="set",computed=this.match("["),key=this.parseObjectPropertyKey(),value=this.parseSetterMethod()):7===token.type&&"*"===token.value&&lookaheadPropertyKey&&(kind="init",computed=this.match("["),key=this.parseObjectPropertyKey(),value=this.parseGeneratorMethod(),method=!0),!kind&&key&&this.match("(")&&(kind="init",value=isAsync?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),method=!0),kind||this.throwUnexpectedToken(this.lookahead),"init"===kind&&(kind="method"),computed||(isStatic&&this.isPropertyKey(key,"prototype")&&this.throwUnexpectedToken(token,messages_1.Messages.StaticPrototype),!isStatic&&this.isPropertyKey(key,"constructor")&&(("method"!==kind||!method||value&&value.generator)&&this.throwUnexpectedToken(token,messages_1.Messages.ConstructorSpecialMethod),hasConstructor.value?this.throwUnexpectedToken(token,messages_1.Messages.DuplicateConstructor):hasConstructor.value=!0,kind="constructor")),this.finalize(node,new Node.MethodDefinition(key,computed,value,kind,isStatic))},Parser.prototype.parseClassElementList=function(){var body=[],hasConstructor={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():body.push(this.parseClassElement(hasConstructor));return this.expect("}"),body},Parser.prototype.parseClassBody=function(){var node=this.createNode(),elementList=this.parseClassElementList();return this.finalize(node,new Node.ClassBody(elementList))},Parser.prototype.parseClassDeclaration=function(identifierIsOptional){var node=this.createNode(),previousStrict=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var id=identifierIsOptional&&3!==this.lookahead.type?null:this.parseVariableIdentifier(),superClass=null;this.matchKeyword("extends")&&(this.nextToken(),superClass=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var classBody=this.parseClassBody();return this.context.strict=previousStrict,this.finalize(node,new Node.ClassDeclaration(id,superClass,classBody))},Parser.prototype.parseClassExpression=function(){var node=this.createNode(),previousStrict=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var id=3===this.lookahead.type?this.parseVariableIdentifier():null,superClass=null;this.matchKeyword("extends")&&(this.nextToken(),superClass=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var classBody=this.parseClassBody();return this.context.strict=previousStrict,this.finalize(node,new Node.ClassExpression(id,superClass,classBody))},Parser.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var node=this.createNode(),body=this.parseDirectivePrologues();2!==this.lookahead.type;)body.push(this.parseStatementListItem());return this.finalize(node,new Node.Module(body))},Parser.prototype.parseScript=function(){for(var node=this.createNode(),body=this.parseDirectivePrologues();2!==this.lookahead.type;)body.push(this.parseStatementListItem());return this.finalize(node,new Node.Script(body))},Parser.prototype.parseModuleSpecifier=function(){var node=this.createNode();8!==this.lookahead.type&&this.throwError(messages_1.Messages.InvalidModuleSpecifier);var token=this.nextToken(),raw=this.getTokenRaw(token);return this.finalize(node,new Node.Literal(token.value,raw))},Parser.prototype.parseImportSpecifier=function(){var imported,local,node=this.createNode();return 3===this.lookahead.type?(local=imported=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),local=this.parseVariableIdentifier())):(local=imported=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),local=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(node,new Node.ImportSpecifier(local,imported))},Parser.prototype.parseNamedImports=function(){this.expect("{");for(var specifiers=[];!this.match("}");)specifiers.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),specifiers},Parser.prototype.parseImportDefaultSpecifier=function(){var node=this.createNode(),local=this.parseIdentifierName();return this.finalize(node,new Node.ImportDefaultSpecifier(local))},Parser.prototype.parseImportNamespaceSpecifier=function(){var node=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(messages_1.Messages.NoAsAfterImportNamespace),this.nextToken();var local=this.parseIdentifierName();return this.finalize(node,new Node.ImportNamespaceSpecifier(local))},Parser.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(messages_1.Messages.IllegalImportDeclaration);var src,node=this.createNode();this.expectKeyword("import");var specifiers=[];if(8===this.lookahead.type)src=this.parseModuleSpecifier();else{if(this.match("{")?specifiers=specifiers.concat(this.parseNamedImports()):this.match("*")?specifiers.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(specifiers.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?specifiers.push(this.parseImportNamespaceSpecifier()):this.match("{")?specifiers=specifiers.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var message=this.lookahead.value?messages_1.Messages.UnexpectedToken:messages_1.Messages.MissingFromClause;this.throwError(message,this.lookahead.value)}this.nextToken(),src=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(node,new Node.ImportDeclaration(specifiers,src))},Parser.prototype.parseExportSpecifier=function(){var node=this.createNode(),local=this.parseIdentifierName(),exported=local;return this.matchContextualKeyword("as")&&(this.nextToken(),exported=this.parseIdentifierName()),this.finalize(node,new Node.ExportSpecifier(local,exported))},Parser.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(messages_1.Messages.IllegalExportDeclaration);var exportDeclaration,node=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var declaration=this.parseFunctionDeclaration(!0);exportDeclaration=this.finalize(node,new Node.ExportDefaultDeclaration(declaration))}else if(this.matchKeyword("class")){declaration=this.parseClassDeclaration(!0);exportDeclaration=this.finalize(node,new Node.ExportDefaultDeclaration(declaration))}else if(this.matchContextualKeyword("async")){declaration=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();exportDeclaration=this.finalize(node,new Node.ExportDefaultDeclaration(declaration))}else{this.matchContextualKeyword("from")&&this.throwError(messages_1.Messages.UnexpectedToken,this.lookahead.value);declaration=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),exportDeclaration=this.finalize(node,new Node.ExportDefaultDeclaration(declaration))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var message=this.lookahead.value?messages_1.Messages.UnexpectedToken:messages_1.Messages.MissingFromClause;this.throwError(message,this.lookahead.value)}this.nextToken();var src=this.parseModuleSpecifier();this.consumeSemicolon(),exportDeclaration=this.finalize(node,new Node.ExportAllDeclaration(src))}else if(4===this.lookahead.type){declaration=void 0;switch(this.lookahead.value){case"let":case"const":declaration=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":declaration=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}exportDeclaration=this.finalize(node,new Node.ExportNamedDeclaration(declaration,[],null))}else if(this.matchAsyncFunction()){declaration=this.parseFunctionDeclaration();exportDeclaration=this.finalize(node,new Node.ExportNamedDeclaration(declaration,[],null))}else{var specifiers=[],source=null,isExportFromIdentifier=!1;for(this.expect("{");!this.match("}");)isExportFromIdentifier=isExportFromIdentifier||this.matchKeyword("default"),specifiers.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),source=this.parseModuleSpecifier(),this.consumeSemicolon();else if(isExportFromIdentifier){message=this.lookahead.value?messages_1.Messages.UnexpectedToken:messages_1.Messages.MissingFromClause;this.throwError(message,this.lookahead.value)}else this.consumeSemicolon();exportDeclaration=this.finalize(node,new Node.ExportNamedDeclaration(null,specifiers,source))}return exportDeclaration},Parser}();exports.Parser=Parser},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=function(condition,message){if(!condition)throw new Error("ASSERT: "+message)}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ErrorHandler=function(){function ErrorHandler(){this.errors=[],this.tolerant=!1}return ErrorHandler.prototype.recordError=function(error){this.errors.push(error)},ErrorHandler.prototype.tolerate=function(error){if(!this.tolerant)throw error;this.recordError(error)},ErrorHandler.prototype.constructError=function(msg,column){var error=new Error(msg);try{throw error}catch(base){Object.create&&Object.defineProperty&&(error=Object.create(base),Object.defineProperty(error,"column",{value:column}))}return error},ErrorHandler.prototype.createError=function(index,line,col,description){var msg="Line "+line+": "+description,error=this.constructError(msg,col);return error.index=index,error.lineNumber=line,error.description=description,error},ErrorHandler.prototype.throwError=function(index,line,col,description){throw this.createError(index,line,col,description)},ErrorHandler.prototype.tolerateError=function(index,line,col,description){var error=this.createError(index,line,col,description);if(!this.tolerant)throw error;this.recordError(error)},ErrorHandler}();exports.ErrorHandler=ErrorHandler},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var assert_1=__webpack_require__(9),character_1=__webpack_require__(4),messages_1=__webpack_require__(11);function hexValue(ch){return"0123456789abcdef".indexOf(ch.toLowerCase())}function octalValue(ch){return"01234567".indexOf(ch)}var Scanner=function(){function Scanner(code,handler){this.source=code,this.errorHandler=handler,this.trackComment=!1,this.isModule=!1,this.length=code.length,this.index=0,this.lineNumber=0<code.length?1:0,this.lineStart=0,this.curlyStack=[]}return Scanner.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},Scanner.prototype.restoreState=function(state){this.index=state.index,this.lineNumber=state.lineNumber,this.lineStart=state.lineStart},Scanner.prototype.eof=function(){return this.index>=this.length},Scanner.prototype.throwUnexpectedToken=function(message){return void 0===message&&(message=messages_1.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,message)},Scanner.prototype.tolerateUnexpectedToken=function(message){void 0===message&&(message=messages_1.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,message)},Scanner.prototype.skipSingleLineComment=function(offset){var start,loc,comments=[];for(this.trackComment&&(comments=[],start=this.index-offset,loc={start:{line:this.lineNumber,column:this.index-this.lineStart-offset},end:{}});!this.eof();){var ch=this.source.charCodeAt(this.index);if(++this.index,character_1.Character.isLineTerminator(ch)){if(this.trackComment){var entry={multiLine:!(loc.end={line:this.lineNumber,column:this.index-this.lineStart-1}),slice:[start+offset,this.index-1],range:[start,this.index-1],loc:loc};comments.push(entry)}return 13===ch&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,comments}}if(this.trackComment){entry={multiLine:!(loc.end={line:this.lineNumber,column:this.index-this.lineStart}),slice:[start+offset,this.index],range:[start,this.index],loc:loc};comments.push(entry)}return comments},Scanner.prototype.skipMultiLineComment=function(){var start,loc,comments=[];for(this.trackComment&&(comments=[],start=this.index-2,loc={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var ch=this.source.charCodeAt(this.index);if(character_1.Character.isLineTerminator(ch))13===ch&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===ch){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){loc.end={line:this.lineNumber,column:this.index-this.lineStart};var entry={multiLine:!0,slice:[start+2,this.index-2],range:[start,this.index],loc:loc};comments.push(entry)}return comments}++this.index}else++this.index}if(this.trackComment){loc.end={line:this.lineNumber,column:this.index-this.lineStart};entry={multiLine:!0,slice:[start+2,this.index],range:[start,this.index],loc:loc};comments.push(entry)}return this.tolerateUnexpectedToken(),comments},Scanner.prototype.scanComments=function(){var comments;this.trackComment&&(comments=[]);for(var start=0===this.index;!this.eof();){var ch=this.source.charCodeAt(this.index);if(character_1.Character.isWhiteSpace(ch))++this.index;else if(character_1.Character.isLineTerminator(ch))++this.index,13===ch&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,start=!0;else if(47===ch)if(47===(ch=this.source.charCodeAt(this.index+1))){this.index+=2;var comment=this.skipSingleLineComment(2);this.trackComment&&(comments=comments.concat(comment)),start=!0}else{if(42!==ch)break;this.index+=2;comment=this.skipMultiLineComment();this.trackComment&&(comments=comments.concat(comment))}else if(start&&45===ch){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3;comment=this.skipSingleLineComment(3);this.trackComment&&(comments=comments.concat(comment))}else{if(60!==ch||this.isModule)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4;comment=this.skipSingleLineComment(4);this.trackComment&&(comments=comments.concat(comment))}}return comments},Scanner.prototype.isFutureReservedWord=function(id){switch(id){case"enum":case"export":case"import":case"super":return!0;default:return!1}},Scanner.prototype.isStrictModeReservedWord=function(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},Scanner.prototype.isRestrictedWord=function(id){return"eval"===id||"arguments"===id},Scanner.prototype.isKeyword=function(id){switch(id.length){case 2:return"if"===id||"in"===id||"do"===id;case 3:return"var"===id||"for"===id||"new"===id||"try"===id||"let"===id;case 4:return"this"===id||"else"===id||"case"===id||"void"===id||"with"===id||"enum"===id;case 5:return"while"===id||"break"===id||"catch"===id||"throw"===id||"const"===id||"yield"===id||"class"===id||"super"===id;case 6:return"return"===id||"typeof"===id||"delete"===id||"switch"===id||"export"===id||"import"===id;case 7:return"default"===id||"finally"===id||"extends"===id;case 8:return"function"===id||"continue"===id||"debugger"===id;case 10:return"instanceof"===id;default:return!1}},Scanner.prototype.codePointAt=function(i){var cp=this.source.charCodeAt(i);if(55296<=cp&&cp<=56319){var second=this.source.charCodeAt(i+1);if(56320<=second&&second<=57343)cp=1024*(cp-55296)+second-56320+65536}return cp},Scanner.prototype.scanHexEscape=function(prefix){for(var len="u"===prefix?4:2,code=0,i=0;i<len;++i){if(this.eof()||!character_1.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;code=16*code+hexValue(this.source[this.index++])}return String.fromCharCode(code)},Scanner.prototype.scanUnicodeCodePointEscape=function(){var ch=this.source[this.index],code=0;for("}"===ch&&this.throwUnexpectedToken();!this.eof()&&(ch=this.source[this.index++],character_1.Character.isHexDigit(ch.charCodeAt(0)));)code=16*code+hexValue(ch);return(1114111<code||"}"!==ch)&&this.throwUnexpectedToken(),character_1.Character.fromCodePoint(code)},Scanner.prototype.getIdentifier=function(){for(var start=this.index++;!this.eof();){var ch=this.source.charCodeAt(this.index);if(92===ch)return this.index=start,this.getComplexIdentifier();if(55296<=ch&&ch<57343)return this.index=start,this.getComplexIdentifier();if(!character_1.Character.isIdentifierPart(ch))break;++this.index}return this.source.slice(start,this.index)},Scanner.prototype.getComplexIdentifier=function(){var ch,cp=this.codePointAt(this.index),id=character_1.Character.fromCodePoint(cp);for(this.index+=id.length,92===cp&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,ch=this.scanUnicodeCodePointEscape()):null!==(ch=this.scanHexEscape("u"))&&"\\"!==ch&&character_1.Character.isIdentifierStart(ch.charCodeAt(0))||this.throwUnexpectedToken(),id=ch);!this.eof()&&(cp=this.codePointAt(this.index),character_1.Character.isIdentifierPart(cp));)id+=ch=character_1.Character.fromCodePoint(cp),this.index+=ch.length,92===cp&&(id=id.substr(0,id.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,ch=this.scanUnicodeCodePointEscape()):null!==(ch=this.scanHexEscape("u"))&&"\\"!==ch&&character_1.Character.isIdentifierPart(ch.charCodeAt(0))||this.throwUnexpectedToken(),id+=ch);return id},Scanner.prototype.octalToDecimal=function(ch){var octal="0"!==ch,code=octalValue(ch);return!this.eof()&&character_1.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(octal=!0,code=8*code+octalValue(this.source[this.index++]),0<="0123".indexOf(ch)&&!this.eof()&&character_1.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(code=8*code+octalValue(this.source[this.index++]))),{code:code,octal:octal}},Scanner.prototype.scanIdentifier=function(){var type,start=this.index,id=92===this.source.charCodeAt(start)?this.getComplexIdentifier():this.getIdentifier();if(3!==(type=1===id.length?3:this.isKeyword(id)?4:"null"===id?5:"true"===id||"false"===id?1:3)&&start+id.length!==this.index){var restore=this.index;this.index=start,this.tolerateUnexpectedToken(messages_1.Messages.InvalidEscapedReservedWord),this.index=restore}return{type:type,value:id,lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}},Scanner.prototype.scanPunctuator=function(){var start=this.index,str=this.source[this.index];switch(str){case"(":case"{":"{"===str&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,str="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(str=this.source.substr(this.index,4))?this.index+=4:"==="===(str=str.substr(0,3))||"!=="===str||">>>"===str||"<<="===str||">>="===str||"**="===str?this.index+=3:"&&"===(str=str.substr(0,2))||"||"===str||"=="===str||"!="===str||"+="===str||"-="===str||"*="===str||"/="===str||"++"===str||"--"===str||"<<"===str||">>"===str||"&="===str||"|="===str||"^="===str||"%="===str||"<="===str||">="===str||"=>"===str||"**"===str?this.index+=2:(str=this.source[this.index],0<="<>=!+-*%&|^/".indexOf(str)&&++this.index)}return this.index===start&&this.throwUnexpectedToken(),{type:7,value:str,lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}},Scanner.prototype.scanHexLiteral=function(start){for(var num="";!this.eof()&&character_1.Character.isHexDigit(this.source.charCodeAt(this.index));)num+=this.source[this.index++];return 0===num.length&&this.throwUnexpectedToken(),character_1.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+num,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}},Scanner.prototype.scanBinaryLiteral=function(start){for(var ch,num="";!this.eof()&&("0"===(ch=this.source[this.index])||"1"===ch);)num+=this.source[this.index++];return 0===num.length&&this.throwUnexpectedToken(),this.eof()||(ch=this.source.charCodeAt(this.index),(character_1.Character.isIdentifierStart(ch)||character_1.Character.isDecimalDigit(ch))&&this.throwUnexpectedToken()),{type:6,value:parseInt(num,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}},Scanner.prototype.scanOctalLiteral=function(prefix,start){var num="",octal=!1;for(character_1.Character.isOctalDigit(prefix.charCodeAt(0))?(octal=!0,num="0"+this.source[this.index++]):++this.index;!this.eof()&&character_1.Character.isOctalDigit(this.source.charCodeAt(this.index));)num+=this.source[this.index++];return octal||0!==num.length||this.throwUnexpectedToken(),(character_1.Character.isIdentifierStart(this.source.charCodeAt(this.index))||character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(num,8),octal:octal,lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}},Scanner.prototype.isImplicitOctalLiteral=function(){for(var i=this.index+1;i<this.length;++i){var ch=this.source[i];if("8"===ch||"9"===ch)return!1;if(!character_1.Character.isOctalDigit(ch.charCodeAt(0)))return!0}return!0},Scanner.prototype.scanNumericLiteral=function(){var start=this.index,ch=this.source[start];assert_1.assert(character_1.Character.isDecimalDigit(ch.charCodeAt(0))||"."===ch,"Numeric literal must start with a decimal digit or a decimal point");var num="";if("."!==ch){if(num=this.source[this.index++],ch=this.source[this.index],"0"===num){if("x"===ch||"X"===ch)return++this.index,this.scanHexLiteral(start);if("b"===ch||"B"===ch)return++this.index,this.scanBinaryLiteral(start);if("o"===ch||"O"===ch)return this.scanOctalLiteral(ch,start);if(ch&&character_1.Character.isOctalDigit(ch.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(ch,start)}for(;character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index));)num+=this.source[this.index++];ch=this.source[this.index]}if("."===ch){for(num+=this.source[this.index++];character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index));)num+=this.source[this.index++];ch=this.source[this.index]}if("e"===ch||"E"===ch)if(num+=this.source[this.index++],"+"!==(ch=this.source[this.index])&&"-"!==ch||(num+=this.source[this.index++]),character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index));)num+=this.source[this.index++];else this.throwUnexpectedToken();return character_1.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(num),lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}},Scanner.prototype.scanStringLiteral=function(){var start=this.index,quote=this.source[start];assert_1.assert("'"===quote||'"'===quote,"String literal must starts with a quote"),++this.index;for(var octal=!1,str="";!this.eof();){var ch=this.source[this.index++];if(ch===quote){quote="";break}if("\\"===ch)if((ch=this.source[this.index++])&&character_1.Character.isLineTerminator(ch.charCodeAt(0)))++this.lineNumber,"\r"===ch&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(ch){case"u":if("{"===this.source[this.index])++this.index,str+=this.scanUnicodeCodePointEscape();else{var unescaped_1=this.scanHexEscape(ch);null===unescaped_1&&this.throwUnexpectedToken(),str+=unescaped_1}break;case"x":var unescaped=this.scanHexEscape(ch);null===unescaped&&this.throwUnexpectedToken(messages_1.Messages.InvalidHexEscapeSequence),str+=unescaped;break;case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="\t";break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="\v";break;case"8":case"9":str+=ch,this.tolerateUnexpectedToken();break;default:if(ch&&character_1.Character.isOctalDigit(ch.charCodeAt(0))){var octToDec=this.octalToDecimal(ch);octal=octToDec.octal||octal,str+=String.fromCharCode(octToDec.code)}else str+=ch}else{if(character_1.Character.isLineTerminator(ch.charCodeAt(0)))break;str+=ch}}return""!==quote&&(this.index=start,this.throwUnexpectedToken()),{type:8,value:str,octal:octal,lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}},Scanner.prototype.scanTemplate=function(){var cooked="",terminated=!1,start=this.index,head="`"===this.source[start],tail=!1,rawOffset=2;for(++this.index;!this.eof();){var ch=this.source[this.index++];if("`"===ch){rawOffset=1,terminated=tail=!0;break}if("$"===ch){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,terminated=!0;break}cooked+=ch}else if("\\"===ch)if(ch=this.source[this.index++],character_1.Character.isLineTerminator(ch.charCodeAt(0)))++this.lineNumber,"\r"===ch&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(ch){case"n":cooked+="\n";break;case"r":cooked+="\r";break;case"t":cooked+="\t";break;case"u":if("{"===this.source[this.index])++this.index,cooked+=this.scanUnicodeCodePointEscape();else{var restore=this.index,unescaped_2=this.scanHexEscape(ch);null!==unescaped_2?cooked+=unescaped_2:(this.index=restore,cooked+=ch)}break;case"x":var unescaped=this.scanHexEscape(ch);null===unescaped&&this.throwUnexpectedToken(messages_1.Messages.InvalidHexEscapeSequence),cooked+=unescaped;break;case"b":cooked+="\b";break;case"f":cooked+="\f";break;case"v":cooked+="\v";break;default:"0"===ch?(character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(messages_1.Messages.TemplateOctalLiteral),cooked+="\0"):character_1.Character.isOctalDigit(ch.charCodeAt(0))?this.throwUnexpectedToken(messages_1.Messages.TemplateOctalLiteral):cooked+=ch}else character_1.Character.isLineTerminator(ch.charCodeAt(0))?(++this.lineNumber,"\r"===ch&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,cooked+="\n"):cooked+=ch}return terminated||this.throwUnexpectedToken(),head||this.curlyStack.pop(),{type:10,value:this.source.slice(start+1,this.index-rawOffset),cooked:cooked,head:head,tail:tail,lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}},Scanner.prototype.testRegExp=function(pattern,flags){var tmp=pattern,self=this;0<=flags.indexOf("u")&&(tmp=tmp.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function($0,$1,$2){var codePoint=parseInt($1||$2,16);return 1114111<codePoint&&self.throwUnexpectedToken(messages_1.Messages.InvalidRegExp),codePoint<=65535?String.fromCharCode(codePoint):""}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(tmp)}catch(e){this.throwUnexpectedToken(messages_1.Messages.InvalidRegExp)}try{return new RegExp(pattern,flags)}catch(exception){return null}},Scanner.prototype.scanRegExpBody=function(){var ch=this.source[this.index];assert_1.assert("/"===ch,"Regular expression literal must start with a slash");for(var str=this.source[this.index++],classMarker=!1,terminated=!1;!this.eof();)if(str+=ch=this.source[this.index++],"\\"===ch)ch=this.source[this.index++],character_1.Character.isLineTerminator(ch.charCodeAt(0))&&this.throwUnexpectedToken(messages_1.Messages.UnterminatedRegExp),str+=ch;else if(character_1.Character.isLineTerminator(ch.charCodeAt(0)))this.throwUnexpectedToken(messages_1.Messages.UnterminatedRegExp);else if(classMarker)"]"===ch&&(classMarker=!1);else{if("/"===ch){terminated=!0;break}"["===ch&&(classMarker=!0)}return terminated||this.throwUnexpectedToken(messages_1.Messages.UnterminatedRegExp),str.substr(1,str.length-2)},Scanner.prototype.scanRegExpFlags=function(){for(var flags="";!this.eof();){var ch=this.source[this.index];if(!character_1.Character.isIdentifierPart(ch.charCodeAt(0)))break;if(++this.index,"\\"!==ch||this.eof())flags+=ch,0;else if("u"===(ch=this.source[this.index])){++this.index;var restore=this.index,char=this.scanHexEscape("u");if(null!==char)for(flags+=char,0;restore<this.index;++restore)this.source[restore];else this.index=restore,flags+="u",0;this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return flags},Scanner.prototype.scanRegExp=function(){var start=this.index,pattern=this.scanRegExpBody(),flags=this.scanRegExpFlags();return{type:9,value:"",pattern:pattern,flags:flags,regex:this.testRegExp(pattern,flags),lineNumber:this.lineNumber,lineStart:this.lineStart,start:start,end:this.index}},Scanner.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var cp=this.source.charCodeAt(this.index);return character_1.Character.isIdentifierStart(cp)?this.scanIdentifier():40===cp||41===cp||59===cp?this.scanPunctuator():39===cp||34===cp?this.scanStringLiteral():46===cp?character_1.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():character_1.Character.isDecimalDigit(cp)?this.scanNumericLiteral():96===cp||125===cp&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=cp&&cp<57343&&character_1.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},Scanner}();exports.Scanner=Scanner},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TokenName={},exports.TokenName[1]="Boolean",exports.TokenName[2]="<end>",exports.TokenName[3]="Identifier",exports.TokenName[4]="Keyword",exports.TokenName[5]="Null",exports.TokenName[6]="Numeric",exports.TokenName[7]="Punctuator",exports.TokenName[8]="String",exports.TokenName[9]="RegularExpression",exports.TokenName[10]="Template"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var error_handler_1=__webpack_require__(10),scanner_1=__webpack_require__(12),token_1=__webpack_require__(13),Reader=function(){function Reader(){this.values=[],this.curly=this.paren=-1}return Reader.prototype.beforeFunctionExpression=function(t){return 0<=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(t)},Reader.prototype.isRegexStart=function(){var previous=this.values[this.values.length-1],regex=null!==previous;switch(previous){case"this":case"]":regex=!1;break;case")":var keyword=this.values[this.paren-1];regex="if"===keyword||"while"===keyword||"for"===keyword||"with"===keyword;break;case"}":if(regex=!1,"function"===this.values[this.curly-3])regex=!!(check=this.values[this.curly-4])&&!this.beforeFunctionExpression(check);else if("function"===this.values[this.curly-4]){var check;regex=!(check=this.values[this.curly-5])||!this.beforeFunctionExpression(check)}}return regex},Reader.prototype.push=function(token){7===token.type||4===token.type?("{"===token.value?this.curly=this.values.length:"("===token.value&&(this.paren=this.values.length),this.values.push(token.value)):this.values.push(null)},Reader}(),Tokenizer=function(){function Tokenizer(code,config){this.errorHandler=new error_handler_1.ErrorHandler,this.errorHandler.tolerant=!!config&&("boolean"==typeof config.tolerant&&config.tolerant),this.scanner=new scanner_1.Scanner(code,this.errorHandler),this.scanner.trackComment=!!config&&("boolean"==typeof config.comment&&config.comment),this.trackRange=!!config&&("boolean"==typeof config.range&&config.range),this.trackLoc=!!config&&("boolean"==typeof config.loc&&config.loc),this.buffer=[],this.reader=new Reader}return Tokenizer.prototype.errors=function(){return this.errorHandler.errors},Tokenizer.prototype.getNextToken=function(){if(0===this.buffer.length){var comments=this.scanner.scanComments();if(this.scanner.trackComment)for(var i=0;i<comments.length;++i){var e=comments[i],value=this.scanner.source.slice(e.slice[0],e.slice[1]),comment={type:e.multiLine?"BlockComment":"LineComment",value:value};this.trackRange&&(comment.range=e.range),this.trackLoc&&(comment.loc=e.loc),this.buffer.push(comment)}if(!this.scanner.eof()){var loc=void 0;this.trackLoc&&(loc={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var token="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(token);var entry={type:token_1.TokenName[token.type],value:this.scanner.source.slice(token.start,token.end)};if(this.trackRange&&(entry.range=[token.start,token.end]),this.trackLoc&&(loc.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},entry.loc=loc),9===token.type){var pattern=token.pattern,flags=token.flags;entry.regex={pattern:pattern,flags:flags}}this.buffer.push(entry)}}return this.buffer.shift()},Tokenizer}();exports.Tokenizer=Tokenizer}],installedModules={},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0);function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var modules,installedModules},"function"==typeof define&&define.amd?define("esprima",[],factory):"object"==typeof exports&&"object"==typeof module?module.exports=factory():"object"==typeof exports?exports.esprima=factory():root.esprima=factory(),define("esprimaAdapter",["./esprima","env"],function(esprima,env){return"xpconnect"===env.get()&&"undefined"!=typeof Reflect?Reflect:esprima}),function(root,factory){"function"==typeof define&&define.amd?define("source-map",[],factory):root.sourceMap=factory()}(this,function(){return modules=[function(module,exports,__webpack_require__){exports.SourceMapGenerator=__webpack_require__(1).SourceMapGenerator,exports.SourceMapConsumer=__webpack_require__(7).SourceMapConsumer,exports.SourceNode=__webpack_require__(10).SourceNode},function(module,exports,__webpack_require__){var base64VLQ=__webpack_require__(2),util=__webpack_require__(4),ArraySet=__webpack_require__(5).ArraySet,MappingList=__webpack_require__(6).MappingList;function SourceMapGenerator(aArgs){aArgs=aArgs||{},this._file=util.getArg(aArgs,"file",null),this._sourceRoot=util.getArg(aArgs,"sourceRoot",null),this._skipValidation=util.getArg(aArgs,"skipValidation",!1),this._sources=new ArraySet,this._names=new ArraySet,this._mappings=new MappingList,this._sourcesContents=null}SourceMapGenerator.prototype._version=3,SourceMapGenerator.fromSourceMap=function(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot,generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});return aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};null!=mapping.source&&(newMapping.source=mapping.source,null!=sourceRoot&&(newMapping.source=util.relative(sourceRoot,newMapping.source)),newMapping.original={line:mapping.originalLine,column:mapping.originalColumn},null!=mapping.name&&(newMapping.name=mapping.name)),generator.addMapping(newMapping)}),aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);null!=content&&generator.setSourceContent(sourceFile,content)}),generator},SourceMapGenerator.prototype.addMapping=function(aArgs){var generated=util.getArg(aArgs,"generated"),original=util.getArg(aArgs,"original",null),source=util.getArg(aArgs,"source",null),name=util.getArg(aArgs,"name",null);this._skipValidation||this._validateMapping(generated,original,source,name),null!=source&&(source=String(source),this._sources.has(source)||this._sources.add(source)),null!=name&&(name=String(name),this._names.has(name)||this._names.add(name)),this._mappings.add({generatedLine:generated.line,generatedColumn:generated.column,originalLine:null!=original&&original.line,originalColumn:null!=original&&original.column,source:source,name:name})},SourceMapGenerator.prototype.setSourceContent=function(aSourceFile,aSourceContent){var source=aSourceFile;null!=this._sourceRoot&&(source=util.relative(this._sourceRoot,source)),null!=aSourceContent?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[util.toSetString(source)]=aSourceContent):this._sourcesContents&&(delete this._sourcesContents[util.toSetString(source)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},SourceMapGenerator.prototype.applySourceMap=function(aSourceMapConsumer,aSourceFile,aSourceMapPath){var sourceFile=aSourceFile;if(null==aSourceFile){if(null==aSourceMapConsumer.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');sourceFile=aSourceMapConsumer.file}var sourceRoot=this._sourceRoot;null!=sourceRoot&&(sourceFile=util.relative(sourceRoot,sourceFile));var newSources=new ArraySet,newNames=new ArraySet;this._mappings.unsortedForEach(function(mapping){if(mapping.source===sourceFile&&null!=mapping.originalLine){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});null!=original.source&&(mapping.source=original.source,null!=aSourceMapPath&&(mapping.source=util.join(aSourceMapPath,mapping.source)),null!=sourceRoot&&(mapping.source=util.relative(sourceRoot,mapping.source)),mapping.originalLine=original.line,mapping.originalColumn=original.column,null!=original.name&&(mapping.name=original.name))}var source=mapping.source;null==source||newSources.has(source)||newSources.add(source);var name=mapping.name;null==name||newNames.has(name)||newNames.add(name)},this),this._sources=newSources,this._names=newNames,aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);null!=content&&(null!=aSourceMapPath&&(sourceFile=util.join(aSourceMapPath,sourceFile)),null!=sourceRoot&&(sourceFile=util.relative(sourceRoot,sourceFile)),this.setSourceContent(sourceFile,content))},this)},SourceMapGenerator.prototype._validateMapping=function(aGenerated,aOriginal,aSource,aName){if((!(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&0<aGenerated.line&&0<=aGenerated.column)||aOriginal||aSource||aName)&&!(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&0<aGenerated.line&&0<=aGenerated.column&&0<aOriginal.line&&0<=aOriginal.column&&aSource))throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,original:aOriginal,name:aName}))},SourceMapGenerator.prototype._serializeMappings=function(){for(var next,mapping,nameIdx,sourceIdx,previousGeneratedColumn=0,previousGeneratedLine=1,previousOriginalColumn=0,previousOriginalLine=0,previousName=0,previousSource=0,result="",mappings=this._mappings.toArray(),i=0,len=mappings.length;i<len;i++){if(next="",(mapping=mappings[i]).generatedLine!==previousGeneratedLine)for(previousGeneratedColumn=0;mapping.generatedLine!==previousGeneratedLine;)next+=";",previousGeneratedLine++;else if(0<i){if(!util.compareByGeneratedPositionsInflated(mapping,mappings[i-1]))continue;next+=","}next+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn),previousGeneratedColumn=mapping.generatedColumn,null!=mapping.source&&(sourceIdx=this._sources.indexOf(mapping.source),next+=base64VLQ.encode(sourceIdx-previousSource),previousSource=sourceIdx,next+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine),previousOriginalLine=mapping.originalLine-1,next+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn),previousOriginalColumn=mapping.originalColumn,null!=mapping.name&&(nameIdx=this._names.indexOf(mapping.name),next+=base64VLQ.encode(nameIdx-previousName),previousName=nameIdx)),result+=next}return result},SourceMapGenerator.prototype._generateSourcesContent=function(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents)return null;null!=aSourceRoot&&(source=util.relative(aSourceRoot,source));var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)},SourceMapGenerator.prototype.toJSON=function(){var map={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(map.file=this._file),null!=this._sourceRoot&&(map.sourceRoot=this._sourceRoot),this._sourcesContents&&(map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)),map},SourceMapGenerator.prototype.toString=function(){return JSON.stringify(this.toJSON())},exports.SourceMapGenerator=SourceMapGenerator},function(module,exports,__webpack_require__){var base64=__webpack_require__(3);exports.encode=function(aValue){for(var digit,encoded="",vlq=function(aValue){return aValue<0?1+(-aValue<<1):aValue<<1}(aValue);digit=31&vlq,0<(vlq>>>=5)&&(digit|=32),encoded+=base64.encode(digit),0<vlq;);return encoded},exports.decode=function(aStr,aIndex,aOutParam){var continuation,digit,aValue,shifted,strLen=aStr.length,result=0,shift=0;do{if(strLen<=aIndex)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(digit=base64.decode(aStr.charCodeAt(aIndex++))))throw new Error("Invalid base64 digit: "+aStr.charAt(aIndex-1));continuation=!!(32&digit),result+=(digit&=31)<<shift,shift+=5}while(continuation);aOutParam.value=(shifted=(aValue=result)>>1,1==(1&aValue)?-shifted:shifted),aOutParam.rest=aIndex}},function(module,exports){var intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");exports.encode=function(number){if(0<=number&&number<intToCharMap.length)return intToCharMap[number];throw new TypeError("Must be between 0 and 63: "+number)},exports.decode=function(charCode){return 65<=charCode&&charCode<=90?charCode-65:97<=charCode&&charCode<=122?charCode-97+26:48<=charCode&&charCode<=57?charCode-48+52:43==charCode?62:47==charCode?63:-1}},function(module,exports){exports.getArg=function(aArgs,aName,aDefaultValue){if(aName in aArgs)return aArgs[aName];if(3===arguments.length)return aDefaultValue;throw new Error('"'+aName+'" is a required argument.')};var urlRegexp=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,dataUrlRegexp=/^data:.+\,.+$/;function urlParse(aUrl){var match=aUrl.match(urlRegexp);return match?{scheme:match[1],auth:match[2],host:match[3],port:match[4],path:match[5]}:null}function urlGenerate(aParsedUrl){var url="";return aParsedUrl.scheme&&(url+=aParsedUrl.scheme+":"),url+="//",aParsedUrl.auth&&(url+=aParsedUrl.auth+"@"),aParsedUrl.host&&(url+=aParsedUrl.host),aParsedUrl.port&&(url+=":"+aParsedUrl.port),aParsedUrl.path&&(url+=aParsedUrl.path),url}function normalize(aPath){var path=aPath,url=urlParse(aPath);if(url){if(!url.path)return aPath;path=url.path}for(var part,isAbsolute=exports.isAbsolute(path),parts=path.split(/\/+/),up=0,i=parts.length-1;0<=i;i--)"."===(part=parts[i])?parts.splice(i,1):".."===part?up++:0<up&&(""===part?(parts.splice(i+1,up),up=0):(parts.splice(i,2),up--));return""===(path=parts.join("/"))&&(path=isAbsolute?"/":"."),url?(url.path=path,urlGenerate(url)):path}exports.urlParse=urlParse,exports.urlGenerate=urlGenerate,exports.normalize=normalize,exports.join=function(aRoot,aPath){""===aRoot&&(aRoot="."),""===aPath&&(aPath=".");var aPathUrl=urlParse(aPath),aRootUrl=urlParse(aRoot);if(aRootUrl&&(aRoot=aRootUrl.path||"/"),aPathUrl&&!aPathUrl.scheme)return aRootUrl&&(aPathUrl.scheme=aRootUrl.scheme),urlGenerate(aPathUrl);if(aPathUrl||aPath.match(dataUrlRegexp))return aPath;if(aRootUrl&&!aRootUrl.host&&!aRootUrl.path)return aRootUrl.host=aPath,urlGenerate(aRootUrl);var joined="/"===aPath.charAt(0)?aPath:normalize(aRoot.replace(/\/+$/,"")+"/"+aPath);return aRootUrl?(aRootUrl.path=joined,urlGenerate(aRootUrl)):joined},exports.isAbsolute=function(aPath){return"/"===aPath.charAt(0)||!!aPath.match(urlRegexp)},exports.relative=function(aRoot,aPath){""===aRoot&&(aRoot="."),aRoot=aRoot.replace(/\/$/,"");for(var level=0;0!==aPath.indexOf(aRoot+"/");){var index=aRoot.lastIndexOf("/");if(index<0)return aPath;if((aRoot=aRoot.slice(0,index)).match(/^([^\/]+:\/)?\/*$/))return aPath;++level}return Array(level+1).join("../")+aPath.substr(aRoot.length+1)};var supportsNullProto=!("__proto__"in Object.create(null));function identity(s){return s}function isProtoString(s){if(s){var length=s.length;if(!(length<9)&&95===s.charCodeAt(length-1)&&95===s.charCodeAt(length-2)&&111===s.charCodeAt(length-3)&&116===s.charCodeAt(length-4)&&111===s.charCodeAt(length-5)&&114===s.charCodeAt(length-6)&&112===s.charCodeAt(length-7)&&95===s.charCodeAt(length-8)&&95===s.charCodeAt(length-9)){for(var i=length-10;0<=i;i--)if(36!==s.charCodeAt(i))return;return 1}}}function strcmp(aStr1,aStr2){return aStr1===aStr2?0:aStr2<aStr1?1:-1}exports.toSetString=supportsNullProto?identity:function(aStr){return isProtoString(aStr)?"$"+aStr:aStr},exports.fromSetString=supportsNullProto?identity:function(aStr){return isProtoString(aStr)?aStr.slice(1):aStr},exports.compareByOriginalPositions=function(mappingA,mappingB,onlyCompareOriginal){var cmp=mappingA.source-mappingB.source;return 0!==cmp||0!==(cmp=mappingA.originalLine-mappingB.originalLine)||0!==(cmp=mappingA.originalColumn-mappingB.originalColumn)||onlyCompareOriginal||0!==(cmp=mappingA.generatedColumn-mappingB.generatedColumn)||0!==(cmp=mappingA.generatedLine-mappingB.generatedLine)?cmp:mappingA.name-mappingB.name},exports.compareByGeneratedPositionsDeflated=function(mappingA,mappingB,onlyCompareGenerated){var cmp=mappingA.generatedLine-mappingB.generatedLine;return 0!==cmp||0!==(cmp=mappingA.generatedColumn-mappingB.generatedColumn)||onlyCompareGenerated||0!==(cmp=mappingA.source-mappingB.source)||0!==(cmp=mappingA.originalLine-mappingB.originalLine)||0!==(cmp=mappingA.originalColumn-mappingB.originalColumn)?cmp:mappingA.name-mappingB.name},exports.compareByGeneratedPositionsInflated=function(mappingA,mappingB){var cmp=mappingA.generatedLine-mappingB.generatedLine;return 0!==cmp||0!==(cmp=mappingA.generatedColumn-mappingB.generatedColumn)||0!==(cmp=strcmp(mappingA.source,mappingB.source))||0!==(cmp=mappingA.originalLine-mappingB.originalLine)||0!==(cmp=mappingA.originalColumn-mappingB.originalColumn)?cmp:strcmp(mappingA.name,mappingB.name)}},function(module,exports,__webpack_require__){var util=__webpack_require__(4),has=Object.prototype.hasOwnProperty;function ArraySet(){this._array=[],this._set=Object.create(null)}ArraySet.fromArray=function(aArray,aAllowDuplicates){for(var set=new ArraySet,i=0,len=aArray.length;i<len;i++)set.add(aArray[i],aAllowDuplicates);return set},ArraySet.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},ArraySet.prototype.add=function(aStr,aAllowDuplicates){var sStr=util.toSetString(aStr),isDuplicate=has.call(this._set,sStr),idx=this._array.length;isDuplicate&&!aAllowDuplicates||this._array.push(aStr),isDuplicate||(this._set[sStr]=idx)},ArraySet.prototype.has=function(aStr){var sStr=util.toSetString(aStr);return has.call(this._set,sStr)},ArraySet.prototype.indexOf=function(aStr){var sStr=util.toSetString(aStr);if(has.call(this._set,sStr))return this._set[sStr];throw new Error('"'+aStr+'" is not in the set.')},ArraySet.prototype.at=function(aIdx){if(0<=aIdx&&aIdx<this._array.length)return this._array[aIdx];throw new Error("No element indexed by "+aIdx)},ArraySet.prototype.toArray=function(){return this._array.slice()},exports.ArraySet=ArraySet},function(module,exports,__webpack_require__){var util=__webpack_require__(4);function MappingList(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}MappingList.prototype.unsortedForEach=function(aCallback,aThisArg){this._array.forEach(aCallback,aThisArg)},MappingList.prototype.add=function(aMapping){var mappingA,mappingB,lineA,lineB,columnA,columnB;mappingA=this._last,mappingB=aMapping,lineA=mappingA.generatedLine,lineB=mappingB.generatedLine,columnA=mappingA.generatedColumn,columnB=mappingB.generatedColumn,lineA<lineB||lineB==lineA&&columnA<=columnB||util.compareByGeneratedPositionsInflated(mappingA,mappingB)<=0?this._last=aMapping:this._sorted=!1,this._array.push(aMapping)},MappingList.prototype.toArray=function(){return this._sorted||(this._array.sort(util.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},exports.MappingList=MappingList},function(module,exports,__webpack_require__){var util=__webpack_require__(4),binarySearch=__webpack_require__(8),ArraySet=__webpack_require__(5).ArraySet,base64VLQ=__webpack_require__(2),quickSort=__webpack_require__(9).quickSort;function SourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;return"string"==typeof aSourceMap&&(sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))),new(null!=sourceMap.sections?IndexedSourceMapConsumer:BasicSourceMapConsumer)(sourceMap)}function BasicSourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;"string"==typeof aSourceMap&&(sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,"")));var version=util.getArg(sourceMap,"version"),sources=util.getArg(sourceMap,"sources"),names=util.getArg(sourceMap,"names",[]),sourceRoot=util.getArg(sourceMap,"sourceRoot",null),sourcesContent=util.getArg(sourceMap,"sourcesContent",null),mappings=util.getArg(sourceMap,"mappings"),file=util.getArg(sourceMap,"file",null);if(version!=this._version)throw new Error("Unsupported version: "+version);sources=sources.map(String).map(util.normalize).map(function(source){return sourceRoot&&util.isAbsolute(sourceRoot)&&util.isAbsolute(source)?util.relative(sourceRoot,source):source}),this._names=ArraySet.fromArray(names.map(String),!0),this._sources=ArraySet.fromArray(sources,!0),this.sourceRoot=sourceRoot,this.sourcesContent=sourcesContent,this._mappings=mappings,this.file=file}function Mapping(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function IndexedSourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;"string"==typeof aSourceMap&&(sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,"")));var version=util.getArg(sourceMap,"version"),sections=util.getArg(sourceMap,"sections");if(version!=this._version)throw new Error("Unsupported version: "+version);this._sources=new ArraySet,this._names=new ArraySet;var lastOffset={line:-1,column:0};this._sections=sections.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var offset=util.getArg(s,"offset"),offsetLine=util.getArg(offset,"line"),offsetColumn=util.getArg(offset,"column");if(offsetLine<lastOffset.line||offsetLine===lastOffset.line&&offsetColumn<lastOffset.column)throw new Error("Section offsets must be ordered and non-overlapping.");return lastOffset=offset,{generatedOffset:{generatedLine:offsetLine+1,generatedColumn:offsetColumn+1},consumer:new SourceMapConsumer(util.getArg(s,"map"))}})}SourceMapConsumer.fromSourceMap=function(aSourceMap){return BasicSourceMapConsumer.fromSourceMap(aSourceMap)},SourceMapConsumer.prototype._version=3,SourceMapConsumer.prototype.__generatedMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),SourceMapConsumer.prototype.__originalMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),SourceMapConsumer.prototype._charIsMappingSeparator=function(aStr,index){var c=aStr.charAt(index);return";"===c||","===c},SourceMapConsumer.prototype._parseMappings=function(){throw new Error("Subclasses must implement _parseMappings")},SourceMapConsumer.GENERATED_ORDER=1,SourceMapConsumer.ORIGINAL_ORDER=2,SourceMapConsumer.GREATEST_LOWER_BOUND=1,SourceMapConsumer.LEAST_UPPER_BOUND=2,SourceMapConsumer.prototype.eachMapping=function(aCallback,aContext,aOrder){var mappings,context=aContext||null;switch(aOrder||SourceMapConsumer.GENERATED_ORDER){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var sourceRoot=this.sourceRoot;mappings.map(function(mapping){var source=null===mapping.source?null:this._sources.at(mapping.source);return null!=source&&null!=sourceRoot&&(source=util.join(sourceRoot,source)),{source:source,generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:null===mapping.name?null:this._names.at(mapping.name)}},this).forEach(aCallback,context)},SourceMapConsumer.prototype.allGeneratedPositionsFor=function(aArgs){var line=util.getArg(aArgs,"line"),needle={source:util.getArg(aArgs,"source"),originalLine:line,originalColumn:util.getArg(aArgs,"column",0)};if(null!=this.sourceRoot&&(needle.source=util.relative(this.sourceRoot,needle.source)),!this._sources.has(needle.source))return[];needle.source=this._sources.indexOf(needle.source);var mappings=[],index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,binarySearch.LEAST_UPPER_BOUND);if(0<=index){var mapping=this._originalMappings[index];if(void 0===aArgs.column)for(var originalLine=mapping.originalLine;mapping&&mapping.originalLine===originalLine;)mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}),mapping=this._originalMappings[++index];else for(var originalColumn=mapping.originalColumn;mapping&&mapping.originalLine===line&&mapping.originalColumn==originalColumn;)mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}),mapping=this._originalMappings[++index]}return mappings},exports.SourceMapConsumer=SourceMapConsumer,(BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).consumer=SourceMapConsumer,BasicSourceMapConsumer.fromSourceMap=function(aSourceMap){var smc=Object.create(BasicSourceMapConsumer.prototype),names=smc._names=ArraySet.fromArray(aSourceMap._names.toArray(),!0),sources=smc._sources=ArraySet.fromArray(aSourceMap._sources.toArray(),!0);smc.sourceRoot=aSourceMap._sourceRoot,smc.sourcesContent=aSourceMap._generateSourcesContent(smc._sources.toArray(),smc.sourceRoot),smc.file=aSourceMap._file;for(var generatedMappings=aSourceMap._mappings.toArray().slice(),destGeneratedMappings=smc.__generatedMappings=[],destOriginalMappings=smc.__originalMappings=[],i=0,length=generatedMappings.length;i<length;i++){var srcMapping=generatedMappings[i],destMapping=new Mapping;destMapping.generatedLine=srcMapping.generatedLine,destMapping.generatedColumn=srcMapping.generatedColumn,srcMapping.source&&(destMapping.source=sources.indexOf(srcMapping.source),destMapping.originalLine=srcMapping.originalLine,destMapping.originalColumn=srcMapping.originalColumn,srcMapping.name&&(destMapping.name=names.indexOf(srcMapping.name)),destOriginalMappings.push(destMapping)),destGeneratedMappings.push(destMapping)}return quickSort(smc.__originalMappings,util.compareByOriginalPositions),smc},BasicSourceMapConsumer.prototype._version=3,Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._sources.toArray().map(function(s){return null!=this.sourceRoot?util.join(this.sourceRoot,s):s},this)}}),BasicSourceMapConsumer.prototype._parseMappings=function(aStr){for(var mapping,str,segment,end,value,generatedLine=1,previousGeneratedColumn=0,previousOriginalLine=0,previousOriginalColumn=0,previousSource=0,previousName=0,length=aStr.length,index=0,cachedSegments={},temp={},originalMappings=[],generatedMappings=[];index<length;)if(";"===aStr.charAt(index))generatedLine++,index++,previousGeneratedColumn=0;else if(","===aStr.charAt(index))index++;else{for((mapping=new Mapping).generatedLine=generatedLine,end=index;end<length&&!this._charIsMappingSeparator(aStr,end);end++);if(segment=cachedSegments[str=aStr.slice(index,end)])index+=str.length;else{for(segment=[];index<end;)base64VLQ.decode(aStr,index,temp),value=temp.value,index=temp.rest,segment.push(value);if(2===segment.length)throw new Error("Found a source, but no line and column");if(3===segment.length)throw new Error("Found a source and line, but no column");cachedSegments[str]=segment}mapping.generatedColumn=previousGeneratedColumn+segment[0],previousGeneratedColumn=mapping.generatedColumn,1<segment.length&&(mapping.source=previousSource+segment[1],previousSource+=segment[1],mapping.originalLine=previousOriginalLine+segment[2],previousOriginalLine=mapping.originalLine,mapping.originalLine+=1,mapping.originalColumn=previousOriginalColumn+segment[3],previousOriginalColumn=mapping.originalColumn,4<segment.length&&(mapping.name=previousName+segment[4],previousName+=segment[4])),generatedMappings.push(mapping),"number"==typeof mapping.originalLine&&originalMappings.push(mapping)}quickSort(generatedMappings,util.compareByGeneratedPositionsDeflated),this.__generatedMappings=generatedMappings,quickSort(originalMappings,util.compareByOriginalPositions),this.__originalMappings=originalMappings},BasicSourceMapConsumer.prototype._findMapping=function(aNeedle,aMappings,aLineName,aColumnName,aComparator,aBias){if(aNeedle[aLineName]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName]);if(aNeedle[aColumnName]<0)throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName]);return binarySearch.search(aNeedle,aMappings,aComparator,aBias)},BasicSourceMapConsumer.prototype.computeColumnSpans=function(){for(var index=0;index<this._generatedMappings.length;++index){var mapping=this._generatedMappings[index];if(index+1<this._generatedMappings.length){var nextMapping=this._generatedMappings[index+1];if(mapping.generatedLine===nextMapping.generatedLine){mapping.lastGeneratedColumn=nextMapping.generatedColumn-1;continue}}mapping.lastGeneratedColumn=1/0}},BasicSourceMapConsumer.prototype.originalPositionFor=function(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")},index=this._findMapping(needle,this._generatedMappings,"generatedLine","generatedColumn",util.compareByGeneratedPositionsDeflated,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=index){var mapping=this._generatedMappings[index];if(mapping.generatedLine===needle.generatedLine){var source=util.getArg(mapping,"source",null);null!==source&&(source=this._sources.at(source),null!=this.sourceRoot&&(source=util.join(this.sourceRoot,source)));var name=util.getArg(mapping,"name",null);return null!==name&&(name=this._names.at(name)),{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:name}}}return{source:null,line:null,column:null,name:null}},BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(sc){return null==sc}))},BasicSourceMapConsumer.prototype.sourceContentFor=function(aSource,nullOnMissing){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(aSource=util.relative(this.sourceRoot,aSource)),this._sources.has(aSource))return this.sourcesContent[this._sources.indexOf(aSource)];var url;if(null!=this.sourceRoot&&(url=util.urlParse(this.sourceRoot))){var fileUriAbsPath=aSource.replace(/^file:\/\//,"");if("file"==url.scheme&&this._sources.has(fileUriAbsPath))return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)];if((!url.path||"/"==url.path)&&this._sources.has("/"+aSource))return this.sourcesContent[this._sources.indexOf("/"+aSource)]}if(nullOnMissing)return null;throw new Error('"'+aSource+'" is not in the SourceMap.')},BasicSourceMapConsumer.prototype.generatedPositionFor=function(aArgs){var source=util.getArg(aArgs,"source");if(null!=this.sourceRoot&&(source=util.relative(this.sourceRoot,source)),!this._sources.has(source))return{line:null,column:null,lastColumn:null};var needle={source:source=this._sources.indexOf(source),originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")},index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=index){var mapping=this._originalMappings[index];if(mapping.source===needle.source)return{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},exports.BasicSourceMapConsumer=BasicSourceMapConsumer,(IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).constructor=SourceMapConsumer,IndexedSourceMapConsumer.prototype._version=3,Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){for(var sources=[],i=0;i<this._sections.length;i++)for(var j=0;j<this._sections[i].consumer.sources.length;j++)sources.push(this._sections[i].consumer.sources[j]);return sources}}),IndexedSourceMapConsumer.prototype.originalPositionFor=function(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")},sectionIndex=binarySearch.search(needle,this._sections,function(needle,section){var cmp=needle.generatedLine-section.generatedOffset.generatedLine;return cmp||needle.generatedColumn-section.generatedOffset.generatedColumn}),section=this._sections[sectionIndex];return section?section.consumer.originalPositionFor({line:needle.generatedLine-(section.generatedOffset.generatedLine-1),column:needle.generatedColumn-(section.generatedOffset.generatedLine===needle.generatedLine?section.generatedOffset.generatedColumn-1:0),bias:aArgs.bias}):{source:null,line:null,column:null,name:null}},IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(s){return s.consumer.hasContentsOfAllSources()})},IndexedSourceMapConsumer.prototype.sourceContentFor=function(aSource,nullOnMissing){for(var i=0;i<this._sections.length;i++){var content=this._sections[i].consumer.sourceContentFor(aSource,!0);if(content)return content}if(nullOnMissing)return null;throw new Error('"'+aSource+'" is not in the SourceMap.')},IndexedSourceMapConsumer.prototype.generatedPositionFor=function(aArgs){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];if(-1!==section.consumer.sources.indexOf(util.getArg(aArgs,"source"))){var generatedPosition=section.consumer.generatedPositionFor(aArgs);if(generatedPosition)return{line:generatedPosition.line+(section.generatedOffset.generatedLine-1),column:generatedPosition.column+(section.generatedOffset.generatedLine===generatedPosition.line?section.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},IndexedSourceMapConsumer.prototype._parseMappings=function(){this.__generatedMappings=[],this.__originalMappings=[];for(var i=0;i<this._sections.length;i++)for(var section=this._sections[i],sectionMappings=section.consumer._generatedMappings,j=0;j<sectionMappings.length;j++){var mapping=sectionMappings[j],source=section.consumer._sources.at(mapping.source);null!==section.consumer.sourceRoot&&(source=util.join(section.consumer.sourceRoot,source)),this._sources.add(source),source=this._sources.indexOf(source);var name=section.consumer._names.at(mapping.name);this._names.add(name),name=this._names.indexOf(name);var adjustedMapping={source:source,generatedLine:mapping.generatedLine+(section.generatedOffset.generatedLine-1),generatedColumn:mapping.generatedColumn+(section.generatedOffset.generatedLine===mapping.generatedLine?section.generatedOffset.generatedColumn-1:0),originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:name};this.__generatedMappings.push(adjustedMapping),"number"==typeof adjustedMapping.originalLine&&this.__originalMappings.push(adjustedMapping)}quickSort(this.__generatedMappings,util.compareByGeneratedPositionsDeflated),quickSort(this.__originalMappings,util.compareByOriginalPositions)},exports.IndexedSourceMapConsumer=IndexedSourceMapConsumer},function(module,exports){exports.GREATEST_LOWER_BOUND=1,exports.LEAST_UPPER_BOUND=2,exports.search=function(aNeedle,aHaystack,aCompare,aBias){if(0===aHaystack.length)return-1;var index=function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare,aBias){var mid=Math.floor((aHigh-aLow)/2)+aLow,cmp=aCompare(aNeedle,aHaystack[mid],!0);return 0===cmp?mid:0<cmp?1<aHigh-mid?recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare,aBias):aBias==exports.LEAST_UPPER_BOUND?aHigh<aHaystack.length?aHigh:-1:mid:1<mid-aLow?recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare,aBias):aBias==exports.LEAST_UPPER_BOUND?mid:aLow<0?-1:aLow}(-1,aHaystack.length,aNeedle,aHaystack,aCompare,aBias||exports.GREATEST_LOWER_BOUND);if(index<0)return-1;for(;0<=index-1&&0===aCompare(aHaystack[index],aHaystack[index-1],!0);)--index;return index}},function(module,exports){function swap(ary,x,y){var temp=ary[x];ary[x]=ary[y],ary[y]=temp}function doQuickSort(ary,comparator,p,r){if(p<r){var i=p-1;swap(ary,(low=p,high=r,Math.round(low+Math.random()*(high-low))),r);for(var pivot=ary[r],j=p;j<r;j++)comparator(ary[j],pivot)<=0&&swap(ary,i+=1,j);swap(ary,i+1,j);var q=i+1;doQuickSort(ary,comparator,p,q-1),doQuickSort(ary,comparator,q+1,r)}var low,high}exports.quickSort=function(ary,comparator){doQuickSort(ary,comparator,0,ary.length-1)}},function(module,exports,__webpack_require__){var SourceMapGenerator=__webpack_require__(1).SourceMapGenerator,util=__webpack_require__(4),REGEX_NEWLINE=/(\r?\n)/,isSourceNode="$$$isSourceNode$$$";function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[],this.sourceContents={},this.line=null==aLine?null:aLine,this.column=null==aColumn?null:aColumn,this.source=null==aSource?null:aSource,this.name=null==aName?null:aName,this[isSourceNode]=!0,null!=aChunks&&this.add(aChunks)}SourceNode.fromStringWithSourceMap=function(aGeneratedCode,aSourceMapConsumer,aRelativePath){function shiftNextLine(){return remainingLines.shift()+(remainingLines.shift()||"")}var node=new SourceNode,remainingLines=aGeneratedCode.split(REGEX_NEWLINE),lastGeneratedLine=1,lastGeneratedColumn=0,lastMapping=null;return aSourceMapConsumer.eachMapping(function(mapping){if(null!==lastMapping){if(!(lastGeneratedLine<mapping.generatedLine)){var code=(nextLine=remainingLines[0]).substr(0,mapping.generatedColumn-lastGeneratedColumn);return remainingLines[0]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn),lastGeneratedColumn=mapping.generatedColumn,addMappingWithCode(lastMapping,code),void(lastMapping=mapping)}addMappingWithCode(lastMapping,shiftNextLine()),lastGeneratedLine++,lastGeneratedColumn=0}for(;lastGeneratedLine<mapping.generatedLine;)node.add(shiftNextLine()),lastGeneratedLine++;if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[0];node.add(nextLine.substr(0,mapping.generatedColumn)),remainingLines[0]=nextLine.substr(mapping.generatedColumn),lastGeneratedColumn=mapping.generatedColumn}lastMapping=mapping},this),0<remainingLines.length&&(lastMapping&&addMappingWithCode(lastMapping,shiftNextLine()),node.add(remainingLines.join(""))),aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);null!=content&&(null!=aRelativePath&&(sourceFile=util.join(aRelativePath,sourceFile)),node.setSourceContent(sourceFile,content))}),node;function addMappingWithCode(mapping,code){if(null===mapping||void 0===mapping.source)node.add(code);else{var source=aRelativePath?util.join(aRelativePath,mapping.source):mapping.source;node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,source,code,mapping.name))}}},SourceNode.prototype.add=function(aChunk){if(Array.isArray(aChunk))aChunk.forEach(function(chunk){this.add(chunk)},this);else{if(!aChunk[isSourceNode]&&"string"!=typeof aChunk)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk);aChunk&&this.children.push(aChunk)}return this},SourceNode.prototype.prepend=function(aChunk){if(Array.isArray(aChunk))for(var i=aChunk.length-1;0<=i;i--)this.prepend(aChunk[i]);else{if(!aChunk[isSourceNode]&&"string"!=typeof aChunk)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk);this.children.unshift(aChunk)}return this},SourceNode.prototype.walk=function(aFn){for(var chunk,i=0,len=this.children.length;i<len;i++)(chunk=this.children[i])[isSourceNode]?chunk.walk(aFn):""!==chunk&&aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})},SourceNode.prototype.join=function(aSep){var newChildren,i,len=this.children.length;if(0<len){for(newChildren=[],i=0;i<len-1;i++)newChildren.push(this.children[i]),newChildren.push(aSep);newChildren.push(this.children[i]),this.children=newChildren}return this},SourceNode.prototype.replaceRight=function(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];return lastChild[isSourceNode]?lastChild.replaceRight(aPattern,aReplacement):"string"==typeof lastChild?this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement):this.children.push("".replace(aPattern,aReplacement)),this},SourceNode.prototype.setSourceContent=function(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent},SourceNode.prototype.walkSourceContents=function(aFn){for(var i=0,len=this.children.length;i<len;i++)this.children[i][isSourceNode]&&this.children[i].walkSourceContents(aFn);var sources=Object.keys(this.sourceContents);for(i=0,len=sources.length;i<len;i++)aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])},SourceNode.prototype.toString=function(){var str="";return this.walk(function(chunk){str+=chunk}),str},SourceNode.prototype.toStringWithSourceMap=function(aArgs){var generated={code:"",line:1,column:0},map=new SourceMapGenerator(aArgs),sourceMappingActive=!1,lastOriginalSource=null,lastOriginalLine=null,lastOriginalColumn=null,lastOriginalName=null;return this.walk(function(chunk,original){generated.code+=chunk,null!==original.source&&null!==original.line&&null!==original.column?(lastOriginalSource===original.source&&lastOriginalLine===original.line&&lastOriginalColumn===original.column&&lastOriginalName===original.name||map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name}),lastOriginalSource=original.source,lastOriginalLine=original.line,lastOriginalColumn=original.column,lastOriginalName=original.name,sourceMappingActive=!0):sourceMappingActive&&(map.addMapping({generated:{line:generated.line,column:generated.column}}),lastOriginalSource=null,sourceMappingActive=!1);for(var idx=0,length=chunk.length;idx<length;idx++)10===chunk.charCodeAt(idx)?(generated.line++,generated.column=0,idx+1===length?(lastOriginalSource=null,sourceMappingActive=!1):sourceMappingActive&&map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})):generated.column++}),this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)}),{code:generated.code,map:map}},exports.SourceNode=SourceNode}],installedModules={},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0);function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var modules,installedModules}),define("uglifyjs",["exports","source-map","logger","env!env/file"],function(exports,MOZ_SourceMap,logger,rjsFile){"use strict";function array_to_hash(a){for(var ret=Object.create(null),i=0;i<a.length;++i)ret[a[i]]=!0;return ret}function characters(str){return str.split("")}function member(name,array){return 0<=array.indexOf(name)}function find_if(func,array){for(var i=0,n=array.length;i<n;++i)if(func(array[i]))return array[i]}function configure_error_stack(fn){Object.defineProperty(fn.prototype,"stack",{get:function(){var err=new Error(this.message);err.name=this.name;try{throw err}catch(e){return e.stack}}})}function DefaultsError(msg,defs){this.message=msg,this.defs=defs}function defaults(args,defs,croak){!0===args&&(args={});var ret=args||{};if(croak)for(var i in ret)HOP(ret,i)&&!HOP(defs,i)&&DefaultsError.croak("`"+i+"` is not a supported option",defs);for(var i in defs)HOP(defs,i)&&(ret[i]=args&&HOP(args,i)?args[i]:defs[i]);return ret}function merge(obj,ext){var count=0;for(var i in ext)HOP(ext,i)&&(obj[i]=ext[i],count++);return count}function noop(){}function return_false(){return!1}function return_true(){return!0}function return_this(){return this}function return_null(){return null}((DefaultsError.prototype=Object.create(Error.prototype)).constructor=DefaultsError).prototype.name="DefaultsError",configure_error_stack(DefaultsError),DefaultsError.croak=function(msg,defs){throw new DefaultsError(msg,defs)};var MAP=function(){function MAP(a,f,backwards){var i,ret=[],top=[];function doit(){var val=f(a[i],i),is_last=val instanceof Last;return is_last&&(val=val.v),val instanceof AtTop?(val=val.v)instanceof Splice?top.push.apply(top,backwards?val.v.slice().reverse():val.v):top.push(val):val!==skip&&(val instanceof Splice?ret.push.apply(ret,backwards?val.v.slice().reverse():val.v):ret.push(val)),is_last}if(a instanceof Array)if(backwards){for(i=a.length;0<=--i&&!doit(););ret.reverse(),top.reverse()}else for(i=0;i<a.length&&!doit();++i);else for(i in a)if(HOP(a,i)&&doit())break;return top.concat(ret)}MAP.at_top=function(val){return new AtTop(val)},MAP.splice=function(val){return new Splice(val)},MAP.last=function(val){return new Last(val)};var skip=MAP.skip={};function AtTop(val){this.v=val}function Splice(val){this.v=val}function Last(val){this.v=val}return MAP}();function push_uniq(array,el){array.indexOf(el)<0&&array.push(el)}function string_template(text,props){return text.replace(/\{(.+?)\}/g,function(str,p){return props&&props[p]})}function remove(array,el){for(var i=array.length;0<=--i;)array[i]===el&&array.splice(i,1)}function mergeSort(array,cmp){if(array.length<2)return array.slice();return function _ms(a){if(a.length<=1)return a;var m=Math.floor(a.length/2),left=a.slice(0,m),right=a.slice(m);return function(a,b){for(var r=[],ai=0,bi=0,i=0;ai<a.length&&bi<b.length;)cmp(a[ai],b[bi])<=0?r[i++]=a[ai++]:r[i++]=b[bi++];return ai<a.length&&r.push.apply(r,a.slice(ai)),bi<b.length&&r.push.apply(r,b.slice(bi)),r}(left=_ms(left),right=_ms(right))}(array)}function makePredicate(words){words instanceof Array||(words=words.split(" "));var f="",cats=[];out:for(var i=0;i<words.length;++i){for(var j=0;j<cats.length;++j)if(cats[j][0].length==words[i].length){cats[j].push(words[i]);continue out}cats.push([words[i]])}function quote(word){return JSON.stringify(word).replace(/[\u2028\u2029]/g,function(s){switch(s){case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}return s})}function compareTo(arr){if(1==arr.length)return f+="return str === "+quote(arr[0])+";";f+="switch(str){";for(var i=0;i<arr.length;++i)f+="case "+quote(arr[i])+":";f+="return true}return false;"}if(3<cats.length){cats.sort(function(a,b){return b.length-a.length}),f+="switch(str.length){";for(i=0;i<cats.length;++i){var cat=cats[i];f+="case "+cat[0].length+":",compareTo(cat)}f+="}"}else compareTo(words);return new Function("str",f)}function all(array,predicate){for(var i=array.length;0<=--i;)if(!predicate(array[i]))return;return 1}function Dictionary(){this._values=Object.create(null),this._size=0}function HOP(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}function first_in_statement(stack){for(var p,node=stack.parent(-1),i=0;p=stack.parent(i);i++){if(p instanceof AST_Statement&&p.body===node)return!0;if(!(p instanceof AST_Seq&&p.car===node||p instanceof AST_Call&&p.expression===node&&!(p instanceof AST_New)||p instanceof AST_Dot&&p.expression===node||p instanceof AST_Sub&&p.expression===node||p instanceof AST_Conditional&&p.condition===node||p instanceof AST_Binary&&p.left===node||p instanceof AST_UnaryPostfix&&p.expression===node))return!1;node=p}}function DEFNODE(type,props,methods,base){arguments.length<4&&(base=AST_Node);var self_props=props=props?props.split(/\s+/):[];base&&base.PROPS&&(props=props.concat(base.PROPS));for(var code="return function AST_"+type+"(props){ if (props) { ",i=props.length;0<=--i;)code+="this."+props[i]+" = props."+props[i]+";";var proto=base&&new base;(proto&&proto.initialize||methods&&methods.initialize)&&(code+="this.initialize();"),code+="}}";var ctor=new Function(code)();if(proto&&(ctor.prototype=proto,ctor.BASE=base),base&&base.SUBCLASSES.push(ctor),(ctor.prototype.CTOR=ctor).PROPS=props||null,ctor.SELF_PROPS=self_props,ctor.SUBCLASSES=[],type&&(ctor.prototype.TYPE=ctor.TYPE=type),methods)for(i in methods)HOP(methods,i)&&(/^\$/.test(i)?ctor[i.substr(1)]=methods[i]:ctor.prototype[i]=methods[i]);return ctor.DEFMETHOD=function(name,method){this.prototype[name]=method},void 0!==exports&&(exports["AST_"+type]=ctor),ctor}Dictionary.prototype={set:function(key,val){return this.has(key)||++this._size,this._values["$"+key]=val,this},add:function(key,val){return this.has(key)?this.get(key).push(val):this.set(key,[val]),this},get:function(key){return this._values["$"+key]},del:function(key){return this.has(key)&&(--this._size,delete this._values["$"+key]),this},has:function(key){return"$"+key in this._values},each:function(f){for(var i in this._values)f(this._values[i],i.substr(1))},size:function(){return this._size},map:function(f){var ret=[];for(var i in this._values)ret.push(f(this._values[i],i.substr(1)));return ret},toObject:function(){return this._values}},Dictionary.fromObject=function(obj){var dict=new Dictionary;return dict._size=merge(dict._values,obj),dict};var AST_Token=DEFNODE("Token","type value line col pos endline endcol endpos nlb comments_before file raw",{},null),AST_Node=DEFNODE("Node","start end",{_clone:function(deep){if(deep){var self=this.clone();return self.transform(new TreeTransformer(function(node){if(node!==self)return node.clone(!0)}))}return new this.CTOR(this)},clone:function(deep){return this._clone(deep)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},_walk:function(visitor){return visitor._visit(this)},walk:function(visitor){return this._walk(visitor)}},null);AST_Node.warn_function=null,AST_Node.warn=function(txt,props){AST_Node.warn_function&&AST_Node.warn_function(string_template(txt,props))};var AST_Statement=DEFNODE("Statement",null,{$documentation:"Base class of all statements"}),AST_Debugger=DEFNODE("Debugger",null,{$documentation:"Represents a debugger statement"},AST_Statement),AST_Directive=DEFNODE("Directive","value scope quote",{$documentation:'Represents a directive, like "use strict";',$propdoc:{value:"[string] The value of this directive as a plain string (it's not an AST_String!)",scope:"[AST_Scope/S] The scope that this directive affects",quote:"[string] the original quote character"}},AST_Statement),AST_SimpleStatement=DEFNODE("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_walk:function(visitor){return visitor._visit(this,function(){this.body._walk(visitor)})}},AST_Statement);function walk_body(node,visitor){var body=node.body;if(body instanceof AST_Statement)body._walk(visitor);else for(var i=0,len=body.length;i<len;i++)body[i]._walk(visitor)}var AST_Block=DEFNODE("Block","body",{$documentation:"A body of statements (usually bracketed)",$propdoc:{body:"[AST_Statement*] an array of statements"},_walk:function(visitor){return visitor._visit(this,function(){walk_body(this,visitor)})}},AST_Statement),AST_BlockStatement=DEFNODE("BlockStatement",null,{$documentation:"A block statement"},AST_Block),AST_EmptyStatement=DEFNODE("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_walk:function(visitor){return visitor._visit(this)}},AST_Statement),AST_StatementWithBody=DEFNODE("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_walk:function(visitor){return visitor._visit(this,function(){this.body._walk(visitor)})}},AST_Statement),AST_LabeledStatement=DEFNODE("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_walk:function(visitor){return visitor._visit(this,function(){this.label._walk(visitor),this.body._walk(visitor)})},clone:function(deep){var node=this._clone(deep);if(deep){var label=node.label,def=this.label;node.walk(new TreeWalker(function(node){node instanceof AST_LoopControl&&node.label&&node.label.thedef===def&&(node.label.thedef=label).references.push(node)}))}return node}},AST_StatementWithBody),AST_IterationStatement=DEFNODE("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it."},AST_StatementWithBody),AST_DWLoop=DEFNODE("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"}},AST_IterationStatement),AST_Do=DEFNODE("Do",null,{$documentation:"A `do` statement",_walk:function(visitor){return visitor._visit(this,function(){this.body._walk(visitor),this.condition._walk(visitor)})}},AST_DWLoop),AST_While=DEFNODE("While",null,{$documentation:"A `while` statement",_walk:function(visitor){return visitor._visit(this,function(){this.condition._walk(visitor),this.body._walk(visitor)})}},AST_DWLoop),AST_For=DEFNODE("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_walk:function(visitor){return visitor._visit(this,function(){this.init&&this.init._walk(visitor),this.condition&&this.condition._walk(visitor),this.step&&this.step._walk(visitor),this.body._walk(visitor)})}},AST_IterationStatement),AST_ForIn=DEFNODE("ForIn","init name object",{$documentation:"A `for ... in` statement",$propdoc:{init:"[AST_Node] the `for/in` initialization code",name:"[AST_SymbolRef?] the loop variable, only if `init` is AST_Var",object:"[AST_Node] the object that we're looping through"},_walk:function(visitor){return visitor._visit(this,function(){this.init._walk(visitor),this.object._walk(visitor),this.body._walk(visitor)})}},AST_IterationStatement),AST_With=DEFNODE("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor),this.body._walk(visitor)})}},AST_StatementWithBody),AST_Scope=DEFNODE("Scope","directives variables functions uses_with uses_eval parent_scope enclosed cname",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{directives:"[string*/S] an array of directives declared in this scope",variables:"[Object/S] a map of name -> SymbolDef for all variables/functions defined in this scope",functions:"[Object/S] like `variables`, but only lists function declarations",uses_with:"[boolean/S] tells whether this scope uses the `with` statement",uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",parent_scope:"[AST_Scope?/S] link to the parent scope",enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any subscopes",cname:"[integer/S] current index for mangling variables (used internally by the mangler)"}},AST_Block),AST_Toplevel=DEFNODE("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Object/S] a map of name -> SymbolDef for all undeclared names"},wrap_enclose:function(arg_parameter_pairs){var self=this,args=[],parameters=[];arg_parameter_pairs.forEach(function(pair){var splitAt=pair.lastIndexOf(":");args.push(pair.substr(0,splitAt)),parameters.push(pair.substr(splitAt+1))});var wrapped_tl="(function("+parameters.join(",")+"){ '$ORIG'; })("+args.join(",")+")";return wrapped_tl=(wrapped_tl=parse(wrapped_tl)).transform(new TreeTransformer(function(node){if(node instanceof AST_Directive&&"$ORIG"==node.value)return MAP.splice(self.body)}))},wrap_commonjs:function(name,export_all){var self=this,to_export=[];export_all&&(self.figure_out_scope(),self.walk(new TreeWalker(function(node){node instanceof AST_SymbolDeclaration&&node.definition().global&&(find_if(function(n){return n.name==node.name},to_export)||to_export.push(node))})));var wrapped_tl="(function(exports, global){ '$ORIG'; '$EXPORTS'; global['"+name+"'] = exports; }({}, (function(){return this}())))";return wrapped_tl=(wrapped_tl=parse(wrapped_tl)).transform(new TreeTransformer(function(node){if(node instanceof AST_Directive)switch(node.value){case"$ORIG":return MAP.splice(self.body);case"$EXPORTS":var body=[];return to_export.forEach(function(sym){body.push(new AST_SimpleStatement({body:new AST_Assign({left:new AST_Sub({expression:new AST_SymbolRef({name:"exports"}),property:new AST_String({value:sym.name})}),operator:"=",right:new AST_SymbolRef(sym)})}))}),MAP.splice(body)}}))}},AST_Scope),AST_Lambda=DEFNODE("Lambda","name argnames uses_arguments",{$documentation:"Base class for functions",$propdoc:{name:"[AST_SymbolDeclaration?] the name of this function",argnames:"[AST_SymbolFunarg*] array of function arguments",uses_arguments:"[boolean/S] tells whether this function accesses the arguments array"},_walk:function(visitor){return visitor._visit(this,function(){this.name&&this.name._walk(visitor);for(var argnames=this.argnames,i=0,len=argnames.length;i<len;i++)argnames[i]._walk(visitor);walk_body(this,visitor)})}},AST_Scope),AST_Accessor=DEFNODE("Accessor",null,{$documentation:"A setter/getter function.  The `name` property is always null."},AST_Lambda),AST_Function=DEFNODE("Function",null,{$documentation:"A function expression"},AST_Lambda),AST_Defun=DEFNODE("Defun",null,{$documentation:"A function definition"},AST_Lambda),AST_Jump=DEFNODE("Jump",null,{$documentation:"Base class for jumps (for now that's `return`, `throw`, `break` and `continue`)"},AST_Statement),AST_Exit=DEFNODE("Exit","value",{$documentation:"Base class for exits (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_walk:function(visitor){return visitor._visit(this,this.value&&function(){this.value._walk(visitor)})}},AST_Jump),AST_Return=DEFNODE("Return",null,{$documentation:"A `return` statement"},AST_Exit),AST_Throw=DEFNODE("Throw",null,{$documentation:"A `throw` statement"},AST_Exit),AST_LoopControl=DEFNODE("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_walk:function(visitor){return visitor._visit(this,this.label&&function(){this.label._walk(visitor)})}},AST_Jump),AST_Break=DEFNODE("Break",null,{$documentation:"A `break` statement"},AST_LoopControl),AST_Continue=DEFNODE("Continue",null,{$documentation:"A `continue` statement"},AST_LoopControl),AST_If=DEFNODE("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_walk:function(visitor){return visitor._visit(this,function(){this.condition._walk(visitor),this.body._walk(visitor),this.alternative&&this.alternative._walk(visitor)})}},AST_StatementWithBody),AST_Switch=DEFNODE("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` discriminant"},_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor),walk_body(this,visitor)})}},AST_Block),AST_SwitchBranch=DEFNODE("SwitchBranch",null,{$documentation:"Base class for `switch` branches"},AST_Block),AST_Default=DEFNODE("Default",null,{$documentation:"A `default` switch branch"},AST_SwitchBranch),AST_Case=DEFNODE("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor),walk_body(this,visitor)})}},AST_SwitchBranch),AST_Try=DEFNODE("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_walk:function(visitor){return visitor._visit(this,function(){walk_body(this,visitor),this.bcatch&&this.bcatch._walk(visitor),this.bfinally&&this.bfinally._walk(visitor)})}},AST_Block),AST_Catch=DEFNODE("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[AST_SymbolCatch] symbol for the exception"},_walk:function(visitor){return visitor._visit(this,function(){this.argname._walk(visitor),walk_body(this,visitor)})}},AST_Block),AST_Finally=DEFNODE("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},AST_Block),AST_Definitions=DEFNODE("Definitions","definitions",{$documentation:"Base class for `var` or `const` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_walk:function(visitor){return visitor._visit(this,function(){for(var definitions=this.definitions,i=0,len=definitions.length;i<len;i++)definitions[i]._walk(visitor)})}},AST_Statement),AST_Var=DEFNODE("Var",null,{$documentation:"A `var` statement"},AST_Definitions),AST_Const=DEFNODE("Const",null,{$documentation:"A `const` statement"},AST_Definitions),AST_VarDef=DEFNODE("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_SymbolVar|AST_SymbolConst] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_walk:function(visitor){return visitor._visit(this,function(){this.name._walk(visitor),this.value&&this.value._walk(visitor)})}}),AST_Call=DEFNODE("Call","expression args",{$documentation:"A function call expression",$propdoc:{expression:"[AST_Node] expression to invoke as function",args:"[AST_Node*] array of arguments"},_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor);for(var args=this.args,i=0,len=args.length;i<len;i++)args[i]._walk(visitor)})}}),AST_New=DEFNODE("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties"},AST_Call),AST_Seq=DEFNODE("Seq","car cdr",{$documentation:"A sequence expression (two comma-separated expressions)",$propdoc:{car:"[AST_Node] first element in sequence",cdr:"[AST_Node] second element in sequence"},$cons:function(x,y){var seq=new AST_Seq(x);return seq.car=x,seq.cdr=y,seq},$from_array:function(array){if(0==array.length)return null;if(1==array.length)return array[0].clone();for(var list=null,i=array.length;0<=--i;)list=AST_Seq.cons(array[i],list);for(var p=list;p;){if(p.cdr&&!p.cdr.cdr){p.cdr=p.cdr.car;break}p=p.cdr}return list},to_array:function(){for(var p=this,a=[];p;){if(a.push(p.car),p.cdr&&!(p.cdr instanceof AST_Seq)){a.push(p.cdr);break}p=p.cdr}return a},add:function(node){for(var p=this;p;){if(!(p.cdr instanceof AST_Seq)){var cell=AST_Seq.cons(p.cdr,node);return p.cdr=cell}p=p.cdr}},len:function(){return this.cdr instanceof AST_Seq?this.cdr.len()+1:2},_walk:function(visitor){return visitor._visit(this,function(){this.car._walk(visitor),this.cdr&&this.cdr._walk(visitor)})}}),AST_PropAccess=DEFNODE("PropAccess","expression property",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the container expression",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node"}}),AST_Dot=DEFNODE("Dot",null,{$documentation:"A dotted property access expression",_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor)})}},AST_PropAccess),AST_Sub=DEFNODE("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor),this.property._walk(visitor)})}},AST_PropAccess),AST_Unary=DEFNODE("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor)})}}),AST_UnaryPrefix=DEFNODE("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},AST_Unary),AST_UnaryPostfix=DEFNODE("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},AST_Unary),AST_Binary=DEFNODE("Binary","left operator right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_walk:function(visitor){return visitor._visit(this,function(){this.left._walk(visitor),this.right._walk(visitor)})}}),AST_Conditional=DEFNODE("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_walk:function(visitor){return visitor._visit(this,function(){this.condition._walk(visitor),this.consequent._walk(visitor),this.alternative._walk(visitor)})}}),AST_Assign=DEFNODE("Assign",null,{$documentation:"An assignment expression  `a = b + 5`"},AST_Binary),AST_Array=DEFNODE("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_walk:function(visitor){return visitor._visit(this,function(){for(var elements=this.elements,i=0,len=elements.length;i<len;i++)elements[i]._walk(visitor)})}}),AST_Object=DEFNODE("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[AST_ObjectProperty*] array of properties"},_walk:function(visitor){return visitor._visit(this,function(){for(var properties=this.properties,i=0,len=properties.length;i<len;i++)properties[i]._walk(visitor)})}}),AST_ObjectProperty=DEFNODE("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string] the property name converted to a string for ObjectKeyVal.  For setters and getters this is an AST_SymbolAccessor.",value:"[AST_Node] property value.  For setters and getters this is an AST_Accessor."},_walk:function(visitor){return visitor._visit(this,function(){this.value._walk(visitor)})}}),AST_ObjectKeyVal=DEFNODE("ObjectKeyVal","quote",{$documentation:"A key: value object property",$propdoc:{quote:"[string] the original quote character"}},AST_ObjectProperty),AST_ObjectSetter=DEFNODE("ObjectSetter",null,{$documentation:"An object setter property"},AST_ObjectProperty),AST_ObjectGetter=DEFNODE("ObjectGetter",null,{$documentation:"An object getter property"},AST_ObjectProperty),AST_Symbol=DEFNODE("Symbol","scope name thedef",{$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},$documentation:"Base class for all symbols"}),AST_SymbolAccessor=DEFNODE("SymbolAccessor",null,{$documentation:"The name of a property accessor (setter/getter function)"},AST_Symbol),AST_SymbolDeclaration=DEFNODE("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var/const, function name or argument, symbol in catch)"},AST_Symbol),AST_SymbolVar=DEFNODE("SymbolVar",null,{$documentation:"Symbol defining a variable"},AST_SymbolDeclaration),AST_SymbolConst=DEFNODE("SymbolConst",null,{$documentation:"A constant declaration"},AST_SymbolDeclaration),AST_SymbolFunarg=DEFNODE("SymbolFunarg",null,{$documentation:"Symbol naming a function argument"},AST_SymbolVar),AST_SymbolDefun=DEFNODE("SymbolDefun",null,{$documentation:"Symbol defining a function"},AST_SymbolDeclaration),AST_SymbolLambda=DEFNODE("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},AST_SymbolDeclaration),AST_SymbolCatch=DEFNODE("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},AST_SymbolDeclaration),AST_Label=DEFNODE("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},AST_Symbol),AST_SymbolRef=DEFNODE("SymbolRef",null,{$documentation:"Reference to some symbol (not definition/declaration)"},AST_Symbol),AST_LabelRef=DEFNODE("LabelRef",null,{$documentation:"Reference to a label symbol"},AST_Symbol),AST_This=DEFNODE("This",null,{$documentation:"The `this` symbol"},AST_Symbol),AST_Constant=DEFNODE("Constant",null,{$documentation:"Base class for all constants",getValue:function(){return this.value}}),AST_String=DEFNODE("String","value quote",{$documentation:"A string literal",$propdoc:{value:"[string] the contents of this string",quote:"[string] the original quote character"}},AST_Constant),AST_Number=DEFNODE("Number","value literal",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value",literal:"[string] numeric value as string (optional)"}},AST_Constant),AST_RegExp=DEFNODE("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"}},AST_Constant),AST_Atom=DEFNODE("Atom",null,{$documentation:"Base class for atoms"},AST_Constant),AST_Null=DEFNODE("Null",null,{$documentation:"The `null` atom",value:null},AST_Atom),AST_NaN=DEFNODE("NaN",null,{$documentation:"The impossible value",value:NaN},AST_Atom),AST_Undefined=DEFNODE("Undefined",null,{$documentation:"The `undefined` value",value:void 0},AST_Atom),AST_Hole=DEFNODE("Hole",null,{$documentation:"A hole in an array",value:void 0},AST_Atom),AST_Infinity=DEFNODE("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},AST_Atom),AST_Boolean=DEFNODE("Boolean",null,{$documentation:"Base class for booleans"},AST_Atom),AST_False=DEFNODE("False",null,{$documentation:"The `false` atom",value:!1},AST_Boolean),AST_True=DEFNODE("True",null,{$documentation:"The `true` atom",value:!0},AST_Boolean);function TreeWalker(callback){this.visit=callback,this.stack=[],this.directives=Object.create(null)}TreeWalker.prototype={_visit:function(node,descend){this.push(node);var ret=this.visit(node,descend?function(){descend.call(node)}:noop);return!ret&&descend&&descend.call(node),this.pop(node),ret},parent:function(n){return this.stack[this.stack.length-2-(n||0)]},push:function(node){node instanceof AST_Lambda?this.directives=Object.create(this.directives):node instanceof AST_Directive&&!this.directives[node.value]&&(this.directives[node.value]=node),this.stack.push(node)},pop:function(node){this.stack.pop(),node instanceof AST_Lambda&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(type){for(var stack=this.stack,i=stack.length;0<=--i;){var x=stack[i];if(x instanceof type)return x}},has_directive:function(type){var dir=this.directives[type];if(dir)return dir;var node=this.stack[this.stack.length-1];if(node instanceof AST_Scope)for(var i=0;i<node.body.length;++i){var st=node.body[i];if(!(st instanceof AST_Directive))break;if(st.value==type)return st}},in_boolean_context:function(){for(var stack=this.stack,i=stack.length,self=stack[--i];0<i;){var p=stack[--i];if(p instanceof AST_If&&p.condition===self||p instanceof AST_Conditional&&p.condition===self||p instanceof AST_DWLoop&&p.condition===self||p instanceof AST_For&&p.condition===self||p instanceof AST_UnaryPrefix&&"!"==p.operator&&p.expression===self)return!0;if(!(p instanceof AST_Binary)||"&&"!=p.operator&&"||"!=p.operator)return!1;self=p}},loopcontrol_target:function(node){var stack=this.stack;if(node.label)for(var i=stack.length;0<=--i;){if((x=stack[i])instanceof AST_LabeledStatement&&x.label.name==node.label.name)return x.body}else for(i=stack.length;0<=--i;){var x;if((x=stack[i])instanceof AST_IterationStatement||node instanceof AST_Break&&x instanceof AST_Switch)return x}}};var KEYWORDS="break case catch const continue debugger default delete do else finally for function if in instanceof new return switch throw try typeof var void while with",KEYWORDS_ATOM="false null true",RESERVED_WORDS="abstract boolean byte char class double enum export extends final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield "+KEYWORDS_ATOM+" "+KEYWORDS,KEYWORDS_BEFORE_EXPRESSION="return new delete throw else case";KEYWORDS=makePredicate(KEYWORDS),RESERVED_WORDS=makePredicate(RESERVED_WORDS),KEYWORDS_BEFORE_EXPRESSION=makePredicate(KEYWORDS_BEFORE_EXPRESSION),KEYWORDS_ATOM=makePredicate(KEYWORDS_ATOM);var OPERATOR_CHARS=makePredicate(characters("+-*&%=<>!?|~^")),RE_HEX_NUMBER=/^0x[0-9a-f]+$/i,RE_OCT_NUMBER=/^0[0-7]+$/,OPERATORS=makePredicate(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","||"]),WHITESPACE_CHARS=makePredicate(characters(" \n\r\t\f\v\u2028\u2029\ufeff")),NEWLINE_CHARS=makePredicate(characters("\n\r\u2028\u2029")),PUNC_BEFORE_EXPRESSION=makePredicate(characters("[{(,;:")),PUNC_CHARS=makePredicate(characters("[]{}(),;:")),UNICODE=(makePredicate(characters("gmsiy")),{letter:new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),digit:new RegExp("[\\u0030-\\u0039\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0BE6-\\u0BEF\\u0C66-\\u0C6F\\u0CE6-\\u0CEF\\u0D66-\\u0D6F\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F29\\u1040-\\u1049\\u1090-\\u1099\\u17E0-\\u17E9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19D9\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\uA620-\\uA629\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19]"),non_spacing_mark:new RegExp("[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065E\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0900-\\u0902\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0CBC\\u0CBF\\u0CC6\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F90-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1DC0-\\u1DE6\\u1DFD-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F\\uA67C\\uA67D\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]"),space_combining_mark:new RegExp("[\\u0903\\u093E-\\u0940\\u0949-\\u094C\\u094E\\u0982\\u0983\\u09BE-\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u09D7\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0B02\\u0B03\\u0B3E\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B57\\u0BBE\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD7\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82\\u0C83\\u0CBE\\u0CC0-\\u0CC4\\u0CC7\\u0CC8\\u0CCA\\u0CCB\\u0CD5\\u0CD6\\u0D02\\u0D03\\u0D3E-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D57\\u0D82\\u0D83\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0F3E\\u0F3F\\u0F7F\\u102B\\u102C\\u1031\\u1038\\u103B\\u103C\\u1056\\u1057\\u1062-\\u1064\\u1067-\\u106D\\u1083\\u1084\\u1087-\\u108C\\u108F\\u109A-\\u109C\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A19-\\u1A1B\\u1A55\\u1A57\\u1A61\\u1A63\\u1A64\\u1A6D-\\u1A72\\u1B04\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B44\\u1B82\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1C24-\\u1C2B\\u1C34\\u1C35\\u1CE1\\u1CF2\\uA823\\uA824\\uA827\\uA880\\uA881\\uA8B4-\\uA8C3\\uA952\\uA953\\uA983\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BD-\\uA9C0\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA4D\\uAA7B\\uABE3\\uABE4\\uABE6\\uABE7\\uABE9\\uABEA\\uABEC]"),connector_punctuation:new RegExp("[\\u005F\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F]")});function is_letter(code){return 97<=code&&code<=122||65<=code&&code<=90||170<=code&&UNICODE.letter.test(String.fromCharCode(code))}function is_digit(code){return 48<=code&&code<=57}function is_identifier(name){return!RESERVED_WORDS(name)&&/^[a-z_$][a-z0-9_$]*$/i.test(name)}function is_identifier_start(code){return 36==code||95==code||is_letter(code)}function is_identifier_char(ch){var code=ch.charCodeAt(0);return is_identifier_start(code)||is_digit(code)||8204==code||8205==code||function(ch){return UNICODE.non_spacing_mark.test(ch)||UNICODE.space_combining_mark.test(ch)}(ch)||function(ch){return UNICODE.connector_punctuation.test(ch)}(ch)||function(code){return UNICODE.digit.test(String.fromCharCode(code))}(code)}function is_identifier_string(str){return/^[a-z_$][a-z0-9_$]*$/i.test(str)}function JS_Parse_Error(message,filename,line,col,pos){this.message=message,this.filename=filename,this.line=line,this.col=col,this.pos=pos}function js_error(message,filename,line,col,pos){throw new JS_Parse_Error(message,filename,line,col,pos)}function is_token(token,type,val){return token.type==type&&(null==val||token.value==val)}((JS_Parse_Error.prototype=Object.create(Error.prototype)).constructor=JS_Parse_Error).prototype.name="SyntaxError",configure_error_stack(JS_Parse_Error);var EX_EOF={};function tokenizer($TEXT,filename,html5_comments,shebang){var S={text:$TEXT,filename:filename,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:{},directive_stack:[]};function peek(){return S.text.charAt(S.pos)}function next(signal_eof,in_string){var ch=S.text.charAt(S.pos++);if(signal_eof&&!ch)throw EX_EOF;return NEWLINE_CHARS(ch)?(S.newline_before=S.newline_before||!in_string,++S.line,S.col=0,in_string||"\r"!=ch||"\n"!=peek()||(++S.pos,ch="\n")):++S.col,ch}function forward(i){for(;0<i--;)next()}function looking_at(str){return S.text.substr(S.pos,str.length)==str}function start_token(){S.tokline=S.line,S.tokcol=S.col,S.tokpos=S.pos}var prev_was_dot=!1;function token(type,value,is_comment){S.regex_allowed="operator"==type&&!UNARY_POSTFIX(value)||"keyword"==type&&KEYWORDS_BEFORE_EXPRESSION(value)||"punc"==type&&PUNC_BEFORE_EXPRESSION(value),"punc"==type&&"."==value?prev_was_dot=!0:is_comment||(prev_was_dot=!1);var ret={type:type,value:value,line:S.tokline,col:S.tokcol,pos:S.tokpos,endline:S.line,endcol:S.col,endpos:S.pos,nlb:S.newline_before,file:filename};if(/^(?:num|string|regexp)$/i.test(type)&&(ret.raw=$TEXT.substring(ret.pos,ret.endpos)),!is_comment){ret.comments_before=S.comments_before,S.comments_before=[];for(var i=0,len=ret.comments_before.length;i<len;i++)ret.nlb=ret.nlb||ret.comments_before[i].nlb}return S.newline_before=!1,new AST_Token(ret)}function skip_whitespace(){for(;WHITESPACE_CHARS(peek());)next()}function parse_error(err){js_error(err,filename,S.tokline,S.tokcol,S.tokpos)}function read_num(prefix){var has_e=!1,after_e=!1,has_x=!1,has_dot="."==prefix,num=function(pred){for(var ch,ret="",i=0;(ch=peek())&&pred(ch,i++);)ret+=next();return ret}(function(ch,i){var code=ch.charCodeAt(0);switch(code){case 120:case 88:return!has_x&&(has_x=!0);case 101:case 69:return has_x||!has_e&&(has_e=after_e=!0);case 45:return after_e||0==i&&!prefix;case 43:return after_e;case after_e=!1,46:return!(has_dot||has_x||has_e)&&(has_dot=!0)}return function(code){return is_digit(code)||is_letter(code)}(code)});prefix&&(num=prefix+num),RE_OCT_NUMBER.test(num)&&next_token.has_directive("use strict")&&parse_error("Legacy octal literals are not allowed in strict mode");var valid=function(num){if(RE_HEX_NUMBER.test(num))return parseInt(num.substr(2),16);if(RE_OCT_NUMBER.test(num))return parseInt(num.substr(1),8);var val=parseFloat(num);return val==num?val:void 0}(num);if(!isNaN(valid))return token("num",valid);parse_error("Invalid syntax: "+num)}function read_escaped_char(in_string){var ch=next(!0,in_string);switch(ch.charCodeAt(0)){case 110:return"\n";case 114:return"\r";case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 120:return String.fromCharCode(hex_bytes(2));case 117:return String.fromCharCode(hex_bytes(4));case 10:return"";case 13:if("\n"==peek())return next(!0,in_string),""}return"0"<=ch&&ch<="7"?function(ch){var p=peek();"0"<=p&&p<="7"&&(ch+=next(!0))[0]<="3"&&"0"<=(p=peek())&&p<="7"&&(ch+=next(!0));if("0"===ch)return"\0";0<ch.length&&next_token.has_directive("use strict")&&parse_error("Legacy octal escape sequences are not allowed in strict mode");return String.fromCharCode(parseInt(ch,8))}(ch):ch}function hex_bytes(n){for(var num=0;0<n;--n){var digit=parseInt(next(!0),16);isNaN(digit)&&parse_error("Invalid hex-character pattern in string"),num=num<<4|digit}return num}var read_string=with_eof_error("Unterminated string constant",function(quote_char){for(var quote=next(),ret="";;){var ch=next(!0,!0);if("\\"==ch)ch=read_escaped_char(!0);else if(NEWLINE_CHARS(ch))parse_error("Unterminated string constant");else if(ch==quote)break;ret+=ch}var tok=token("string",ret);return tok.quote=quote_char,tok});function skip_line_comment(type){var ret,regex_allowed=S.regex_allowed,i=function(){for(var text=S.text,i=S.pos,n=S.text.length;i<n;++i){var ch=text[i];if(NEWLINE_CHARS(ch))return i}return-1}();return-1==i?(ret=S.text.substr(S.pos),S.pos=S.text.length):(ret=S.text.substring(S.pos,i),S.pos=i),S.col=S.tokcol+(S.pos-S.tokpos),S.comments_before.push(token(type,ret,!0)),S.regex_allowed=regex_allowed,next_token}var skip_multiline_comment=with_eof_error("Unterminated multiline comment",function(){var regex_allowed=S.regex_allowed,i=function(what,signal_eof){var pos=S.text.indexOf(what,S.pos);if(signal_eof&&-1==pos)throw EX_EOF;return pos}("*/",!0),text=S.text.substring(S.pos,i).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return forward(text.length+2),S.comments_before.push(token("comment2",text,!0)),S.regex_allowed=regex_allowed,next_token});function read_name(){for(var ch,hex,backslash=!1,name="",escaped=!1;null!=(ch=peek());)if(backslash)"u"!=ch&&parse_error("Expecting UnicodeEscapeSequence -- uXXXX"),is_identifier_char(ch=read_escaped_char())||parse_error("Unicode char: "+ch.charCodeAt(0)+" is not valid in identifier"),name+=ch,backslash=!1;else if("\\"==ch)escaped=backslash=!0,next();else{if(!is_identifier_char(ch))break;name+=next()}return KEYWORDS(name)&&escaped&&(hex=name.charCodeAt(0).toString(16).toUpperCase(),name="\\u"+"0000".substr(hex.length)+hex+name.slice(1)),name}var read_regexp=with_eof_error("Unterminated regular expression",function(regexp){for(var ch,prev_backslash=!1,in_class=!1;ch=next(!0);)if(NEWLINE_CHARS(ch))parse_error("Unexpected line terminator");else if(prev_backslash)regexp+="\\"+ch,prev_backslash=!1;else if("["==ch)in_class=!0,regexp+=ch;else if("]"==ch&&in_class)in_class=!1,regexp+=ch;else{if("/"==ch&&!in_class)break;"\\"==ch?prev_backslash=!0:regexp+=ch}var mods=read_name();try{return token("regexp",new RegExp(regexp,mods))}catch(e){parse_error(e.message)}});function read_operator(prefix){return token("operator",function grow(op){if(!peek())return op;var bigger=op+peek();return OPERATORS(bigger)?(next(),grow(bigger)):op}(prefix||next()))}function handle_slash(){switch(next(),peek()){case"/":return next(),skip_line_comment("comment1");case"*":return next(),skip_multiline_comment()}return S.regex_allowed?read_regexp(""):read_operator("/")}function with_eof_error(eof_error,cont){return function(x){try{return cont(x)}catch(ex){if(ex!==EX_EOF)throw ex;parse_error(eof_error)}}}function next_token(force_regexp){if(null!=force_regexp)return read_regexp(force_regexp);for(shebang&&0==S.pos&&looking_at("#!")&&(start_token(),forward(2),skip_line_comment("comment5"));;){if(skip_whitespace(),start_token(),html5_comments){if(looking_at("\x3c!--")){forward(4),skip_line_comment("comment3");continue}if(looking_at("--\x3e")&&S.newline_before){forward(3),skip_line_comment("comment4");continue}}var ch=peek();if(!ch)return token("eof");var code=ch.charCodeAt(0);switch(code){case 34:case 39:return read_string(ch);case 46:return next(),is_digit(peek().charCodeAt(0))?read_num("."):token("punc",".");case 47:var tok=handle_slash();if(tok===next_token)continue;return tok}if(is_digit(code))return read_num();if(PUNC_CHARS(ch))return token("punc",next());if(OPERATOR_CHARS(ch))return read_operator();if(92==code||is_identifier_start(code))return word=read_name(),prev_was_dot?token("name",word):KEYWORDS_ATOM(word)?token("atom",word):KEYWORDS(word)?OPERATORS(word)?token("operator",word):token("keyword",word):token("name",word);break}var word;parse_error("Unexpected character '"+ch+"'")}return next_token.context=function(nc){return nc&&(S=nc),S},next_token.add_directive=function(directive){S.directive_stack[S.directive_stack.length-1].push(directive),void 0===S.directives[directive]?S.directives[directive]=1:S.directives[directive]++},next_token.push_directives_stack=function(){S.directive_stack.push([])},next_token.pop_directives_stack=function(){for(var directives=S.directive_stack[S.directive_stack.length-1],i=0;i<directives.length;i++)S.directives[directives[i]]--;S.directive_stack.pop()},next_token.has_directive=function(directive){return void 0!==S.directives[directive]&&0<S.directives[directive]},next_token}var UNARY_PREFIX=makePredicate(["typeof","void","delete","--","++","!","~","-","+"]),UNARY_POSTFIX=makePredicate(["--","++"]),ASSIGNMENT=makePredicate(["=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="]),PRECEDENCE=function(a,ret){for(var i=0;i<a.length;++i)for(var b=a[i],j=0;j<b.length;++j)ret[b[j]]=i+1;return ret}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),ATOMIC_START_TOKEN=(array_to_hash(["for","do","while","switch"]),array_to_hash(["atom","num","string","regexp","name"]));function parse($TEXT,options){options=defaults(options,{bare_returns:!1,cli:!1,expression:!1,filename:null,html5_comments:!0,shebang:!0,strict:!1,toplevel:null});var S={input:"string"==typeof $TEXT?tokenizer($TEXT,options.filename,options.html5_comments,options.shebang):$TEXT,token:null,prev:null,peeked:null,in_function:0,in_directives:!0,in_loop:0,labels:[]};function is(type,value){return is_token(S.token,type,value)}function peek(){return S.peeked||(S.peeked=S.input())}function next(){return S.prev=S.token,S.peeked?(S.token=S.peeked,S.peeked=null):S.token=S.input(),S.in_directives=S.in_directives&&("string"==S.token.type||is("punc",";")),S.token}function prev(){return S.prev}function croak(msg,line,col,pos){var ctx=S.input.context();js_error(msg,ctx.filename,null!=line?line:ctx.tokline,null!=col?col:ctx.tokcol,null!=pos?pos:ctx.tokpos)}function token_error(token,msg){croak(msg,token.line,token.col)}function unexpected(token){null==token&&(token=S.token),token_error(token,"Unexpected token: "+token.type+" ("+token.value+")")}function expect_token(type,val){if(is(type,val))return next();token_error(S.token,"Unexpected token "+S.token.type+" "+S.token.value+", expected "+type+" "+val+"")}function expect(punc){return expect_token("punc",punc)}function can_insert_semicolon(){return!options.strict&&(S.token.nlb||is("eof")||is("punc","}"))}function semicolon(optional){is("punc",";")?next():optional||can_insert_semicolon()||unexpected()}function parenthesised(){expect("(");var exp=expression(!0);return expect(")"),exp}function embed_tokens(parser){return function(){var start=S.token,expr=parser(),end=prev();return expr.start=start,expr.end=end,expr}}function handle_regexp(){(is("operator","/")||is("operator","/="))&&(S.peeked=null,S.token=S.input(S.token.value.substr(1)))}S.token=next();var statement=embed_tokens(function(){switch(handle_regexp(),S.token.type){case"string":if(S.in_directives){var token=peek();-1==S.token.raw.indexOf("\\")&&(token.nlb||is_token(token,"eof")||is_token(token,"punc",";")||is_token(token,"punc","}"))?S.input.add_directive(S.token.value):S.in_directives=!1}var dir=S.in_directives,stat=simple_statement();return dir?new AST_Directive(stat.body):stat;case"num":case"regexp":case"operator":case"atom":return simple_statement();case"name":return(is_token(peek(),"punc",":")?function(){var label=as_symbol(AST_Label);find_if(function(l){return l.name==label.name},S.labels)&&croak("Label "+label.name+" defined twice");expect(":"),S.labels.push(label);var stat=statement();S.labels.pop(),stat instanceof AST_IterationStatement||label.references.forEach(function(ref){ref instanceof AST_Continue&&(ref=ref.label.start,croak("Continue label `"+label.name+"` refers to non-IterationStatement.",ref.line,ref.col,ref.pos))});return new AST_LabeledStatement({body:stat,label:label})}:simple_statement)();case"punc":switch(S.token.value){case"{":return new AST_BlockStatement({start:S.token,body:block_(),end:prev()});case"[":case"(":return simple_statement();case";":return S.in_directives=!1,next(),new AST_EmptyStatement;default:unexpected()}case"keyword":switch(S.token.value){case"break":return next(),break_cont(AST_Break);case"continue":return next(),break_cont(AST_Continue);case"debugger":return next(),semicolon(),new AST_Debugger;case"do":next();var body=in_loop(statement);expect_token("keyword","while");var condition=parenthesised();return semicolon(!0),new AST_Do({body:body,condition:condition});case"while":return next(),new AST_While({condition:parenthesised(),body:in_loop(statement)});case"for":return next(),function(){expect("(");var init=null;if(!is("punc",";")&&(init=is("keyword","var")?(next(),var_(!0)):expression(!0,!0),is("operator","in")))return init instanceof AST_Var&&1<init.definitions.length&&croak("Only one variable declaration allowed in for..in loop"),next(),function(init){var lhs=init instanceof AST_Var?init.definitions[0].name:null,obj=expression(!0);return expect(")"),new AST_ForIn({init:init,name:lhs,object:obj,body:in_loop(statement)})}(init);return function(init){expect(";");var test=is("punc",";")?null:expression(!0);expect(";");var step=is("punc",")")?null:expression(!0);return expect(")"),new AST_For({init:init,condition:test,step:step,body:in_loop(statement)})}(init)}();case"function":return next(),function_(AST_Defun);case"if":return next(),function(){var cond=parenthesised(),body=statement(),belse=null;is("keyword","else")&&(next(),belse=statement());return new AST_If({condition:cond,body:body,alternative:belse})}();case"return":0!=S.in_function||options.bare_returns||croak("'return' outside of function"),next();var value=null;return is("punc",";")?next():can_insert_semicolon()||(value=expression(!0),semicolon()),new AST_Return({value:value});case"switch":return next(),new AST_Switch({expression:parenthesised(),body:in_loop(switch_body_)});case"throw":next(),S.token.nlb&&croak("Illegal newline after 'throw'");value=expression(!0);return semicolon(),new AST_Throw({value:value});case"try":return next(),function(){var body=block_(),bcatch=null,bfinally=null;if(is("keyword","catch")){var start=S.token;next(),expect("(");var name=as_symbol(AST_SymbolCatch);expect(")"),bcatch=new AST_Catch({start:start,argname:name,body:block_(),end:prev()})}if(is("keyword","finally")){start=S.token;next(),bfinally=new AST_Finally({start:start,body:block_(),end:prev()})}bcatch||bfinally||croak("Missing catch/finally blocks");return new AST_Try({body:body,bcatch:bcatch,bfinally:bfinally})}();case"var":next();var node=var_();return semicolon(),node;case"const":next();node=const_();return semicolon(),node;case"with":return S.input.has_directive("use strict")&&croak("Strict mode may not include a with statement"),next(),new AST_With({expression:parenthesised(),body:statement()})}}unexpected()});function simple_statement(tmp){return new AST_SimpleStatement({body:(tmp=expression(!0),semicolon(),tmp)})}function break_cont(type){var ldef,label=null;can_insert_semicolon()||(label=as_symbol(AST_LabelRef,!0)),null!=label?((ldef=find_if(function(l){return l.name==label.name},S.labels))||croak("Undefined label "+label.name),label.thedef=ldef):0==S.in_loop&&croak(type.TYPE+" not inside a loop or switch"),semicolon();var stat=new type({label:label});return ldef&&ldef.references.push(stat),stat}var function_=function(ctor){var in_statement=ctor===AST_Defun,name=is("name")?as_symbol(in_statement?AST_SymbolDefun:AST_SymbolLambda):null;return in_statement&&!name&&unexpected(),expect("("),new ctor({name:name,argnames:function(first,a){for(;!is("punc",")");)first?first=!1:expect(","),a.push(as_symbol(AST_SymbolFunarg));return next(),a}(!0,[]),body:function(loop,labels){++S.in_function,S.in_directives=!0,S.input.push_directives_stack(),S.in_loop=0,S.labels=[];var a=block_();return S.input.pop_directives_stack(),--S.in_function,S.in_loop=loop,S.labels=labels,a}(S.in_loop,S.labels)})};function block_(){expect("{");for(var a=[];!is("punc","}");)is("eof")&&unexpected(),a.push(statement());return next(),a}function switch_body_(){expect("{");for(var tmp,a=[],cur=null,branch=null;!is("punc","}");)is("eof")&&unexpected(),is("keyword","case")?(branch&&(branch.end=prev()),cur=[],branch=new AST_Case({start:(tmp=S.token,next(),tmp),expression:expression(!0),body:cur}),a.push(branch),expect(":")):is("keyword","default")?(branch&&(branch.end=prev()),cur=[],branch=new AST_Default({start:(tmp=S.token,next(),expect(":"),tmp),body:cur}),a.push(branch)):(cur||unexpected(),cur.push(statement()));return branch&&(branch.end=prev()),next(),a}function vardefs(no_in,in_const){for(var a=[];a.push(new AST_VarDef({start:S.token,name:as_symbol(in_const?AST_SymbolConst:AST_SymbolVar),value:is("operator","=")?(next(),expression(!1,no_in)):null,end:prev()})),is("punc",",");)next();return a}var var_=function(no_in){return new AST_Var({start:prev(),definitions:vardefs(no_in,!1),end:prev()})},const_=function(){return new AST_Const({start:prev(),definitions:vardefs(!1,!0),end:prev()})};var expr_atom=function(allow_calls){if(is("operator","new"))return function(allow_calls){var start=S.token;expect_token("operator","new");var args,newexp=expr_atom(!1);return args=is("punc","(")?(next(),expr_list(")")):[],subscripts(new AST_New({start:start,expression:newexp,args:args,end:prev()}),allow_calls)}(allow_calls);var start=S.token;if(is("punc")){switch(start.value){case"(":next();var ex=expression(!0);return ex.start=start,ex.end=S.token,expect(")"),subscripts(ex,allow_calls);case"[":return subscripts(array_(),allow_calls);case"{":return subscripts(object_(),allow_calls)}unexpected()}if(is("keyword","function")){next();var func=function_(AST_Function);return func.start=start,func.end=prev(),subscripts(func,allow_calls)}if(ATOMIC_START_TOKEN[S.token.type])return subscripts(function(){var ret,tok=S.token;switch(tok.type){case"name":case"keyword":ret=_make_symbol(AST_SymbolRef);break;case"num":ret=new AST_Number({start:tok,end:tok,value:tok.value});break;case"string":ret=new AST_String({start:tok,end:tok,value:tok.value,quote:tok.quote});break;case"regexp":ret=new AST_RegExp({start:tok,end:tok,value:tok.value});break;case"atom":switch(tok.value){case"false":ret=new AST_False({start:tok,end:tok});break;case"true":ret=new AST_True({start:tok,end:tok});break;case"null":ret=new AST_Null({start:tok,end:tok})}break;case"operator":is_identifier_string(tok.value)||croak("Invalid getter/setter name: "+tok.value,tok.line,tok.col,tok.pos),ret=_make_symbol(AST_SymbolRef)}return next(),ret}(),allow_calls);unexpected()};function expr_list(closing,allow_trailing_comma,allow_empty){for(var first=!0,a=[];!is("punc",closing)&&(first?first=!1:expect(","),!allow_trailing_comma||!is("punc",closing));)is("punc",",")&&allow_empty?a.push(new AST_Hole({start:S.token,end:S.token})):a.push(expression(!1));return next(),a}var array_=embed_tokens(function(){return expect("["),new AST_Array({elements:expr_list("]",!options.strict,!0)})}),create_accessor=embed_tokens(function(){return function_(AST_Accessor)}),object_=embed_tokens(function(){expect("{");for(var first=!0,a=[];!is("punc","}")&&(first?first=!1:expect(","),options.strict||!is("punc","}"));){var start=S.token,type=start.type,name=as_property_name();if("name"==type&&!is("punc",":")){var key=new AST_SymbolAccessor({start:S.token,name:as_property_name(),end:prev()});if("get"==name){a.push(new AST_ObjectGetter({start:start,key:key,value:create_accessor(),end:prev()}));continue}if("set"==name){a.push(new AST_ObjectSetter({start:start,key:key,value:create_accessor(),end:prev()}));continue}}expect(":"),a.push(new AST_ObjectKeyVal({start:start,quote:start.quote,key:name,value:expression(!1),end:prev()}))}return next(),new AST_Object({properties:a})});function as_property_name(){var tmp=S.token;switch(tmp.type){case"operator":KEYWORDS(tmp.value)||unexpected();case"num":case"string":case"name":case"keyword":case"atom":return next(),tmp.value;default:unexpected()}}function _make_symbol(type){var name=S.token.value;return new("this"==name?AST_This:type)({name:String(name),start:S.token,end:S.token})}function as_symbol(type,noerror){if(!is("name"))return noerror||croak("Name expected"),null;var sym=_make_symbol(type);return next(),sym}var subscripts=function(expr,allow_calls){var tmp,start=expr.start;if(is("punc","."))return next(),subscripts(new AST_Dot({start:start,expression:expr,property:("name"!=(tmp=S.token).type&&unexpected(),next(),tmp.value),end:prev()}),allow_calls);if(is("punc","[")){next();var prop=expression(!0);return expect("]"),subscripts(new AST_Sub({start:start,expression:expr,property:prop,end:prev()}),allow_calls)}return allow_calls&&is("punc","(")?(next(),subscripts(new AST_Call({start:start,expression:expr,args:expr_list(")"),end:prev()}),!0)):expr},maybe_unary=function(allow_calls){var start=S.token;if(is("operator")&&UNARY_PREFIX(start.value)){next(),handle_regexp();var ex=make_unary(AST_UnaryPrefix,start,maybe_unary(allow_calls));return ex.start=start,ex.end=prev(),ex}for(var val=expr_atom(allow_calls);is("operator")&&UNARY_POSTFIX(S.token.value)&&!S.token.nlb;)(val=make_unary(AST_UnaryPostfix,S.token,val)).start=start,val.end=S.token,next();return val};function make_unary(ctor,token,expr){var op=token.value;return"++"!=op&&"--"!=op||is_assignable(expr)||croak("Invalid use of "+op+" operator",token.line,token.col,token.pos),new ctor({operator:op,expression:expr})}var expr_op=function(left,min_prec,no_in){var op=is("operator")?S.token.value:null;"in"==op&&no_in&&(op=null);var prec=null!=op?PRECEDENCE[op]:null;if(null!=prec&&min_prec<prec){next();var right=expr_op(maybe_unary(!0),prec,no_in);return expr_op(new AST_Binary({start:left.start,left:left,operator:op,right:right,end:right.end}),min_prec,no_in)}return left};function maybe_conditional(no_in){var start=S.token,expr=function(no_in){return expr_op(maybe_unary(!0),0,no_in)}(no_in);if(is("operator","?")){next();var yes=expression(!1);return expect(":"),new AST_Conditional({start:start,condition:expr,consequent:yes,alternative:expression(!1,no_in),end:prev()})}return expr}function is_assignable(expr){return options.cli||(expr instanceof AST_PropAccess||expr instanceof AST_SymbolRef)}var maybe_assign=function(no_in){var start=S.token,left=maybe_conditional(no_in),val=S.token.value;if(is("operator")&&ASSIGNMENT(val)){if(is_assignable(left))return next(),new AST_Assign({start:start,left:left,operator:val,right:maybe_assign(no_in),end:prev()});croak("Invalid assignment")}return left},expression=function(commas,no_in){var start=S.token,expr=maybe_assign(no_in);return commas&&is("punc",",")?(next(),new AST_Seq({start:start,car:expr,cdr:expression(!0,no_in),end:peek()})):expr};function in_loop(cont){++S.in_loop;var ret=cont();return--S.in_loop,ret}return options.expression?expression(!0):function(){var start=S.token,body=[];for(S.input.push_directives_stack();!is("eof");)body.push(statement());S.input.pop_directives_stack();var end=prev(),toplevel=options.toplevel;return toplevel?(toplevel.body=toplevel.body.concat(body),toplevel.end=end):toplevel=new AST_Toplevel({start:start,body:body,end:end}),toplevel}()}function TreeTransformer(before,after){TreeWalker.call(this),this.before=before,this.after=after}function _(node,descend){node.DEFMETHOD("transform",function(tw,in_list){var x,y;return tw.push(this),tw.before&&(x=tw.before(this,descend,in_list)),void 0===x&&(tw.after?(tw.stack[tw.stack.length-1]=x=this,descend(x,tw),void 0!==(y=tw.after(x,in_list))&&(x=y)):descend(x=this,tw)),tw.pop(this),x})}function do_list(list,tw){return MAP(list,function(node){return node.transform(tw,!0)})}function SymbolDef(scope,index,orig){this.name=orig.name,this.orig=[orig],this.scope=scope,this.references=[],this.global=!1,this.mangled_name=null,this.undeclared=!1,this.index=index,this.id=SymbolDef.next_id++}TreeTransformer.prototype=new TreeWalker,_(AST_Node,noop),_(AST_LabeledStatement,function(self,tw){self.label=self.label.transform(tw),self.body=self.body.transform(tw)}),_(AST_SimpleStatement,function(self,tw){self.body=self.body.transform(tw)}),_(AST_Block,function(self,tw){self.body=do_list(self.body,tw)}),_(AST_DWLoop,function(self,tw){self.condition=self.condition.transform(tw),self.body=self.body.transform(tw)}),_(AST_For,function(self,tw){self.init&&(self.init=self.init.transform(tw)),self.condition&&(self.condition=self.condition.transform(tw)),self.step&&(self.step=self.step.transform(tw)),self.body=self.body.transform(tw)}),_(AST_ForIn,function(self,tw){self.init=self.init.transform(tw),self.object=self.object.transform(tw),self.body=self.body.transform(tw)}),_(AST_With,function(self,tw){self.expression=self.expression.transform(tw),self.body=self.body.transform(tw)}),_(AST_Exit,function(self,tw){self.value&&(self.value=self.value.transform(tw))}),_(AST_LoopControl,function(self,tw){self.label&&(self.label=self.label.transform(tw))}),_(AST_If,function(self,tw){self.condition=self.condition.transform(tw),self.body=self.body.transform(tw),self.alternative&&(self.alternative=self.alternative.transform(tw))}),_(AST_Switch,function(self,tw){self.expression=self.expression.transform(tw),self.body=do_list(self.body,tw)}),_(AST_Case,function(self,tw){self.expression=self.expression.transform(tw),self.body=do_list(self.body,tw)}),_(AST_Try,function(self,tw){self.body=do_list(self.body,tw),self.bcatch&&(self.bcatch=self.bcatch.transform(tw)),self.bfinally&&(self.bfinally=self.bfinally.transform(tw))}),_(AST_Catch,function(self,tw){self.argname=self.argname.transform(tw),self.body=do_list(self.body,tw)}),_(AST_Definitions,function(self,tw){self.definitions=do_list(self.definitions,tw)}),_(AST_VarDef,function(self,tw){self.name=self.name.transform(tw),self.value&&(self.value=self.value.transform(tw))}),_(AST_Lambda,function(self,tw){self.name&&(self.name=self.name.transform(tw)),self.argnames=do_list(self.argnames,tw),self.body=do_list(self.body,tw)}),_(AST_Call,function(self,tw){self.expression=self.expression.transform(tw),self.args=do_list(self.args,tw)}),_(AST_Seq,function(self,tw){self.car=self.car.transform(tw),self.cdr=self.cdr.transform(tw)}),_(AST_Dot,function(self,tw){self.expression=self.expression.transform(tw)}),_(AST_Sub,function(self,tw){self.expression=self.expression.transform(tw),self.property=self.property.transform(tw)}),_(AST_Unary,function(self,tw){self.expression=self.expression.transform(tw)}),_(AST_Binary,function(self,tw){self.left=self.left.transform(tw),self.right=self.right.transform(tw)}),_(AST_Conditional,function(self,tw){self.condition=self.condition.transform(tw),self.consequent=self.consequent.transform(tw),self.alternative=self.alternative.transform(tw)}),_(AST_Array,function(self,tw){self.elements=do_list(self.elements,tw)}),_(AST_Object,function(self,tw){self.properties=do_list(self.properties,tw)}),_(AST_ObjectProperty,function(self,tw){self.value=self.value.transform(tw)}),SymbolDef.next_id=1,SymbolDef.prototype={unmangleable:function(options){return options=options||{},this.global&&!options.toplevel||this.undeclared||!options.eval&&(this.scope.uses_eval||this.scope.uses_with)||options.keep_fnames&&(this.orig[0]instanceof AST_SymbolLambda||this.orig[0]instanceof AST_SymbolDefun)},mangle:function(options){var cache=options.cache&&options.cache.props;if(this.global&&cache&&cache.has(this.name))this.mangled_name=cache.get(this.name);else if(!this.mangled_name&&!this.unmangleable(options)){var def,s=this.scope,sym=this.orig[0];!options.screw_ie8&&sym instanceof AST_SymbolLambda&&(s=s.parent_scope),this.defun&&(def=this.defun.variables.get(this.name))?this.mangled_name=def.mangled_name||def.name:this.mangled_name=s.next_mangled(options,this),this.global&&cache&&cache.set(this.name,this.mangled_name)}}},AST_Toplevel.DEFMETHOD("figure_out_scope",function(options){options=defaults(options,{cache:null,screw_ie8:!0});var self=this,scope=self.parent_scope=null,labels=new Dictionary,defun=null,tw=new TreeWalker(function(node,descend){if(node instanceof AST_Catch){var save_scope=scope;return(scope=new AST_Scope(node)).init_scope_vars(save_scope),descend(),scope=save_scope,!0}if(node instanceof AST_Scope){node.init_scope_vars(scope);save_scope=scope;var save_defun=defun,save_labels=labels;return defun=scope=node,labels=new Dictionary,descend(),scope=save_scope,defun=save_defun,labels=save_labels,!0}if(node instanceof AST_LabeledStatement){var l=node.label;if(labels.has(l.name))throw new Error(string_template("Label {name} defined twice",l));return labels.set(l.name,l),descend(),labels.del(l.name),!0}if(node instanceof AST_With)for(var s=scope;s;s=s.parent_scope)s.uses_with=!0;else if(node instanceof AST_Symbol&&(node.scope=scope),node instanceof AST_Label&&((node.thedef=node).references=[]),node instanceof AST_SymbolLambda)defun.def_function(node);else if(node instanceof AST_SymbolDefun)(node.scope=defun.parent_scope).def_function(node);else if(node instanceof AST_SymbolVar||node instanceof AST_SymbolConst){if(defun.def_variable(node),defun!==scope){node.mark_enclosed(options);var def=scope.find_variable(node);node.thedef!==def&&(node.thedef=def,node.reference(options))}}else if(node instanceof AST_SymbolCatch)scope.def_variable(node).defun=defun;else if(node instanceof AST_LabelRef){var sym=labels.get(node.name);if(!sym)throw new Error(string_template("Undefined label {name} [{line},{col}]",{name:node.name,line:node.start.line,col:node.start.col}));node.thedef=sym}});self.walk(tw);var func=null;self.globals=new Dictionary,tw=new TreeWalker(function(node,descend){if(node instanceof AST_Lambda){var prev_func=func;return func=node,descend(),func=prev_func,!0}if(node instanceof AST_LoopControl&&node.label)return node.label.thedef.references.push(node),!0;if(node instanceof AST_SymbolRef){var name=node.name;if("eval"==name&&tw.parent()instanceof AST_Call)for(var s=node.scope;s&&!s.uses_eval;s=s.parent_scope)s.uses_eval=!0;var sym=node.scope.find_variable(name);return node.scope instanceof AST_Lambda&&"arguments"==name&&(node.scope.uses_arguments=!0),sym=sym||self.def_global(node),node.thedef=sym,node.reference(options),!0}});self.walk(tw),options.screw_ie8||self.walk(new TreeWalker(function(node,descend){if(node instanceof AST_SymbolCatch){var name=node.name,refs=node.thedef.references,scope=node.thedef.defun,def=scope.find_variable(name)||self.globals.get(name)||scope.def_variable(node);return refs.forEach(function(ref){ref.thedef=def,ref.reference(options)}),node.thedef=def,!0}})),options.cache&&(this.cname=options.cache.cname)}),AST_Toplevel.DEFMETHOD("def_global",function(node){var globals=this.globals,name=node.name;if(globals.has(name))return globals.get(name);var g=new SymbolDef(this,globals.size(),node);return g.undeclared=!0,g.global=!0,globals.set(name,g),g}),AST_Scope.DEFMETHOD("init_scope_vars",function(parent_scope){this.variables=new Dictionary,this.functions=new Dictionary,this.uses_with=!1,this.uses_eval=!1,this.parent_scope=parent_scope,this.enclosed=[],this.cname=-1}),AST_Lambda.DEFMETHOD("init_scope_vars",function(){AST_Scope.prototype.init_scope_vars.apply(this,arguments),this.uses_arguments=!1,this.def_variable(new AST_SymbolVar({name:"arguments",start:this.start,end:this.end}))}),AST_Symbol.DEFMETHOD("mark_enclosed",function(options){for(var def=this.definition(),s=this.scope;s&&(push_uniq(s.enclosed,def),options.keep_fnames&&s.functions.each(function(d){push_uniq(def.scope.enclosed,d)}),s!==def.scope);)s=s.parent_scope}),AST_Symbol.DEFMETHOD("reference",function(options){this.definition().references.push(this),this.mark_enclosed(options)}),AST_Scope.DEFMETHOD("find_variable",function(name){return name instanceof AST_Symbol&&(name=name.name),this.variables.get(name)||this.parent_scope&&this.parent_scope.find_variable(name)}),AST_Scope.DEFMETHOD("def_function",function(symbol){this.functions.set(symbol.name,this.def_variable(symbol))}),AST_Scope.DEFMETHOD("def_variable",function(symbol){var def;return this.variables.has(symbol.name)?(def=this.variables.get(symbol.name)).orig.push(symbol):(def=new SymbolDef(this,this.variables.size(),symbol),this.variables.set(symbol.name,def),def.global=!this.parent_scope),symbol.thedef=def}),AST_Scope.DEFMETHOD("next_mangled",function(options){var ext=this.enclosed;out:for(;;){var m=base54(++this.cname);if(is_identifier(m)&&!(0<=options.except.indexOf(m))){for(var i=ext.length;0<=--i;){var sym=ext[i];if(m==(sym.mangled_name||sym.unmangleable(options)&&sym.name))continue out}return m}}}),AST_Function.DEFMETHOD("next_mangled",function(options,def){for(var tricky_def=def.orig[0]instanceof AST_SymbolFunarg&&this.name&&this.name.definition(),tricky_name=tricky_def?tricky_def.mangled_name||tricky_def.name:null;;){var name=AST_Lambda.prototype.next_mangled.call(this,options,def);if(!tricky_name||tricky_name!=name)return name}}),AST_Symbol.DEFMETHOD("unmangleable",function(options){return this.definition().unmangleable(options)}),AST_Label.DEFMETHOD("unmangleable",function(){return!1}),AST_Symbol.DEFMETHOD("unreferenced",function(){return 0==this.definition().references.length&&!(this.scope.uses_eval||this.scope.uses_with)}),AST_Symbol.DEFMETHOD("undeclared",function(){return this.definition().undeclared}),AST_LabelRef.DEFMETHOD("undeclared",function(){return!1}),AST_Label.DEFMETHOD("undeclared",function(){return!1}),AST_Symbol.DEFMETHOD("definition",function(){return this.thedef}),AST_Symbol.DEFMETHOD("global",function(){return this.definition().global}),AST_Toplevel.DEFMETHOD("_default_mangler_options",function(options){return defaults(options,{eval:!1,except:[],keep_fnames:!1,screw_ie8:!0,sort:!1,toplevel:!1})}),AST_Toplevel.DEFMETHOD("mangle_names",function(options){(options=this._default_mangler_options(options)).except.push("arguments");var lname=-1,to_mangle=[];options.cache&&this.globals.each(function(symbol){options.except.indexOf(symbol.name)<0&&to_mangle.push(symbol)});var tw=new TreeWalker(function(node,descend){if(node instanceof AST_LabeledStatement){var save_nesting=lname;return descend(),lname=save_nesting,!0}if(node instanceof AST_Scope){tw.parent();var a=[];return node.variables.each(function(symbol){options.except.indexOf(symbol.name)<0&&a.push(symbol)}),void to_mangle.push.apply(to_mangle,a)}if(node instanceof AST_Label){for(var name;!is_identifier(name=base54(++lname)););return node.mangled_name=name,!0}options.screw_ie8&&node instanceof AST_SymbolCatch&&to_mangle.push(node.definition())});this.walk(tw),to_mangle.forEach(function(def){def.mangle(options)}),options.cache&&(options.cache.cname=this.cname)}),AST_Toplevel.DEFMETHOD("compute_char_frequency",function(options){options=this._default_mangler_options(options);var tw=new TreeWalker(function(node){node instanceof AST_Constant?base54.consider(node.print_to_string()):node instanceof AST_Return?base54.consider("return"):node instanceof AST_Throw?base54.consider("throw"):node instanceof AST_Continue?base54.consider("continue"):node instanceof AST_Break?base54.consider("break"):node instanceof AST_Debugger?base54.consider("debugger"):node instanceof AST_Directive?base54.consider(node.value):node instanceof AST_While?base54.consider("while"):node instanceof AST_Do?base54.consider("do while"):node instanceof AST_If?(base54.consider("if"),node.alternative&&base54.consider("else")):node instanceof AST_Var?base54.consider("var"):node instanceof AST_Const?base54.consider("const"):node instanceof AST_Lambda?base54.consider("function"):node instanceof AST_For?base54.consider("for"):node instanceof AST_ForIn?base54.consider("for in"):node instanceof AST_Switch?base54.consider("switch"):node instanceof AST_Case?base54.consider("case"):node instanceof AST_Default?base54.consider("default"):node instanceof AST_With?base54.consider("with"):node instanceof AST_ObjectSetter?base54.consider("set"+node.key):node instanceof AST_ObjectGetter?base54.consider("get"+node.key):node instanceof AST_ObjectKeyVal?base54.consider(node.key):node instanceof AST_New?base54.consider("new"):node instanceof AST_This?base54.consider("this"):node instanceof AST_Try?base54.consider("try"):node instanceof AST_Catch?base54.consider("catch"):node instanceof AST_Finally?base54.consider("finally"):node instanceof AST_Symbol&&node.unmangleable(options)?base54.consider(node.name):node instanceof AST_Unary||node instanceof AST_Binary?base54.consider(node.operator):node instanceof AST_Dot&&base54.consider(node.property)});this.walk(tw),base54.sort()});var base54=function(){var chars,frequency;function reset(){frequency=Object.create(null),(chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_0123456789".split("").map(function(ch){return ch.charCodeAt(0)})).forEach(function(ch){frequency[ch]=0})}function base54(num){var ret="",base=54;for(num++;num--,ret+=String.fromCharCode(chars[num%base]),num=Math.floor(num/base),base=64,0<num;);return ret}return base54.consider=function(str){for(var i=str.length;0<=--i;){var code=str.charCodeAt(i);code in frequency&&++frequency[code]}},base54.sort=function(){chars=mergeSort(chars,function(a,b){return is_digit(a)&&!is_digit(b)?1:is_digit(b)&&!is_digit(a)?-1:frequency[b]-frequency[a]})},(base54.reset=reset)(),base54.get=function(){return chars},base54.freq=function(){return frequency},base54}();AST_Toplevel.DEFMETHOD("scope_warnings",function(options){options=defaults(options,{assign_to_global:!0,eval:!0,func_arguments:!0,nested_defuns:!0,undeclared:!1,unreferenced:!0});var tw=new TreeWalker(function(node){if(options.undeclared&&node instanceof AST_SymbolRef&&node.undeclared()&&AST_Node.warn("Undeclared symbol: {name} [{file}:{line},{col}]",{name:node.name,file:node.start.file,line:node.start.line,col:node.start.col}),options.assign_to_global){var sym=null;node instanceof AST_Assign&&node.left instanceof AST_SymbolRef?sym=node.left:node instanceof AST_ForIn&&node.init instanceof AST_SymbolRef&&(sym=node.init),sym&&(sym.undeclared()||sym.global()&&sym.scope!==sym.definition().scope)&&AST_Node.warn("{msg}: {name} [{file}:{line},{col}]",{msg:sym.undeclared()?"Accidental global?":"Assignment to global",name:sym.name,file:sym.start.file,line:sym.start.line,col:sym.start.col})}options.eval&&node instanceof AST_SymbolRef&&node.undeclared()&&"eval"==node.name&&AST_Node.warn("Eval is used [{file}:{line},{col}]",node.start),options.unreferenced&&(node instanceof AST_SymbolDeclaration||node instanceof AST_Label)&&!(node instanceof AST_SymbolCatch)&&node.unreferenced()&&AST_Node.warn("{type} {name} is declared but not referenced [{file}:{line},{col}]",{type:node instanceof AST_Label?"Label":"Symbol",name:node.name,file:node.start.file,line:node.start.line,col:node.start.col}),options.func_arguments&&node instanceof AST_Lambda&&node.uses_arguments&&AST_Node.warn("arguments used in function {name} [{file}:{line},{col}]",{name:node.name?node.name.name:"anonymous",file:node.start.file,line:node.start.line,col:node.start.col}),options.nested_defuns&&node instanceof AST_Defun&&!(tw.parent()instanceof AST_Scope)&&AST_Node.warn('Function {name} declared in nested statement "{type}" [{file}:{line},{col}]',{name:node.name.name,type:tw.parent().TYPE,file:node.start.file,line:node.start.line,col:node.start.col})});this.walk(tw)});var use_asm,in_directive,EXPECT_DIRECTIVE=/^$|[;{][\s\n]*$/;function is_some_comments(comment){return"comment2"==comment.type&&/@preserve|@license|@cc_on/i.test(comment.value)}function OutputStream(options){var comment_filter=return_false;if((options=defaults(options,{ascii_only:!1,beautify:!1,bracketize:!1,comments:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,screw_ie8:!0,semicolons:!0,shebang:!0,source_map:null,space_colon:!0,unescape_regexps:!1,width:80,wrap_iife:!1},!0)).comments){var comments=options.comments;if("string"==typeof options.comments&&/^\/.*\/[a-zA-Z]*$/.test(options.comments)){var regex_pos=options.comments.lastIndexOf("/");comments=new RegExp(options.comments.substr(1,regex_pos-1),options.comments.substr(regex_pos+1))}comment_filter=comments instanceof RegExp?function(comment){return"comment5"!=comment.type&&comments.test(comment.value)}:"function"==typeof comments?function(comment){return"comment5"!=comment.type&&comments(this,comment)}:"some"===comments?is_some_comments:return_true}var indentation=0,current_col=0,current_line=1,current_pos=0,OUTPUT="";function to_ascii(str,identifier){return str.replace(/[\u0000-\u001f\u007f-\uffff]/g,function(ch){var code=ch.charCodeAt(0).toString(16);if(code.length<=2&&!identifier){for(;code.length<2;)code="0"+code;return"\\x"+code}for(;code.length<4;)code="0"+code;return"\\u"+code})}function encode_string(str,quote){var ret=function(str,quote){var dq=0,sq=0;function quote_single(){return"'"+str.replace(/\x27/g,"\\'")+"'"}function quote_double(){return'"'+str.replace(/\x22/g,'\\"')+'"'}switch(str=str.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(s,i){switch(s){case'"':return++dq,'"';case"'":return++sq,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return options.screw_ie8?"\\v":"\\x0B";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-7]/.test(str.charAt(i+1))?"\\x00":"\\0"}return s}),options.ascii_only&&(str=to_ascii(str)),options.quote_style){case 1:return quote_single();case 2:return quote_double();case 3:return("'"==quote?quote_single:quote_double)();default:return(sq<dq?quote_single:quote_double)()}}(str,quote);return options.inline_script&&(ret=(ret=(ret=ret.replace(/<\x2fscript([>\/\t\n\f\r ])/gi,"<\\/script$1")).replace(/\x3c!--/g,"\\x3c!--")).replace(/--\x3e/g,"--\\x3e")),ret}function make_indent(back){return function repeat_string(str,i){if(i<=0)return"";if(1==i)return str;var d=repeat_string(str,i>>1);return d+=d,1&i&&(d+=str),d}(" ",options.indent_start+indentation-back*options.indent_level)}var might_need_space=!1,might_need_semicolon=!1,might_add_newline=0,last="",ensure_line_len=options.max_line_len?function(){if(current_col>options.max_line_len){if(might_add_newline){var left=OUTPUT.slice(0,might_add_newline),right=OUTPUT.slice(might_add_newline);OUTPUT=left+"\n"+right,current_line++,current_pos++,current_col=right.length}current_col>options.max_line_len&&AST_Node.warn("Output exceeds {max_line_len} characters",options)}might_add_newline=0}:noop,requireSemicolonChars=makePredicate("( [ + * / - , .");function print(str){var ch=(str=String(str)).charAt(0),prev=last.charAt(last.length-1);if(might_need_semicolon&&(might_need_semicolon=!1,(":"==prev&&"}"==ch||(!ch||";}".indexOf(ch)<0)&&";"!=prev)&&(options.semicolons||requireSemicolonChars(ch)?(OUTPUT+=";",current_col++,current_pos++):(ensure_line_len(),OUTPUT+="\n",current_pos++,current_line++,current_col=0,/^\s+$/.test(str)&&(might_need_semicolon=!0)),options.beautify||(might_need_space=!1))),!options.beautify&&options.preserve_line&&stack[stack.length-1])for(var target_line=stack[stack.length-1].start.line;current_line<target_line;)ensure_line_len(),OUTPUT+="\n",current_pos++,current_line++,current_col=0,might_need_space=!1;might_need_space&&((is_identifier_char(prev)&&(is_identifier_char(ch)||"\\"==ch)||"/"==ch&&ch==prev||("+"==ch||"-"==ch)&&ch==last)&&(OUTPUT+=" ",current_col++,current_pos++),might_need_space=!1),OUTPUT+=str,current_pos+=str.length;var a=str.split(/\r?\n/),n=a.length-1;current_line+=n,current_col+=a[0].length,0<n&&(ensure_line_len(),current_col=a[n].length),last=str}var space=options.beautify?function(){print(" ")}:function(){might_need_space=!0},indent=options.beautify?function(half){options.beautify&&print(make_indent(half?.5:0))}:noop,with_indent=options.beautify?function(col,cont){!0===col&&(col=next_indent());var save_indentation=indentation;indentation=col;var ret=cont();return indentation=save_indentation,ret}:function(col,cont){return cont()},newline=options.beautify?function(){print("\n")}:options.max_line_len?function(){ensure_line_len(),might_add_newline=OUTPUT.length}:noop,semicolon=options.beautify?function(){print(";")}:function(){might_need_semicolon=!0};function force_semicolon(){might_need_semicolon=!1,print(";")}function next_indent(){return indentation+options.indent_level}var add_mapping=options.source_map?function(token,name){try{token&&options.source_map.add(token.file||"?",current_line,current_col,token.line,token.col,name||"name"!=token.type?name:token.value)}catch(ex){AST_Node.warn("Couldn't figure out mapping for {file}:{line},{col}  {cline},{ccol} [{name}]",{file:token.file,line:token.line,col:token.col,cline:current_line,ccol:current_col,name:name||""})}}:noop;function get(){return might_add_newline&&ensure_line_len(),OUTPUT}var stack=[];return{get:get,toString:get,indent:indent,indentation:function(){return indentation},current_width:function(){return current_col-indentation},should_break:function(){return options.width&&this.current_width()>=options.width},newline:newline,print:print,space:space,comma:function(){print(","),space()},colon:function(){print(":"),options.space_colon&&space()},last:function(){return last},semicolon:semicolon,force_semicolon:force_semicolon,to_ascii:to_ascii,print_name:function(name){print(function(name){return name=name.toString(),options.ascii_only&&(name=to_ascii(name,!0)),name}(name))},print_string:function(str,quote,escape_directive){var encoded=encode_string(str,quote);!0===escape_directive&&-1===encoded.indexOf("\\")&&(EXPECT_DIRECTIVE.test(OUTPUT)||force_semicolon(),force_semicolon()),print(encoded)},encode_string:encode_string,next_indent:next_indent,with_indent:with_indent,with_block:function(cont){var ret;return print("{"),newline(),with_indent(next_indent(),function(){ret=cont()}),indent(),print("}"),ret},with_parens:function(cont){print("(");var ret=cont();return print(")"),ret},with_square:function(cont){print("[");var ret=cont();return print("]"),ret},add_mapping:add_mapping,option:function(opt){return options[opt]},comment_filter:comment_filter,line:function(){return current_line},col:function(){return current_col},pos:function(){return current_pos},push_node:function(node){stack.push(node)},pop_node:function(){return stack.pop()},parent:function(n){return stack[stack.length-2-(n||0)]}}}function DEFPRINT(nodetype,generator){nodetype.DEFMETHOD("_codegen",generator)}function PARENS(nodetype,func){Array.isArray(nodetype)?nodetype.forEach(function(nodetype){PARENS(nodetype,func)}):nodetype.DEFMETHOD("needs_parens",func)}function display_body(body,is_toplevel,output,allow_directives){var last=body.length-1;in_directive=allow_directives,body.forEach(function(stmt,i){!0!==in_directive||stmt instanceof AST_Directive||stmt instanceof AST_EmptyStatement||stmt instanceof AST_SimpleStatement&&stmt.body instanceof AST_String||(in_directive=!1),stmt instanceof AST_EmptyStatement||(output.indent(),stmt.print(output),i==last&&is_toplevel||(output.newline(),is_toplevel&&output.newline())),!0===in_directive&&stmt instanceof AST_SimpleStatement&&stmt.body instanceof AST_String&&(in_directive=!1)}),in_directive=!1}function print_bracketed(body,output,allow_directives){0<body.length?output.with_block(function(){display_body(body,!1,output,allow_directives)}):output.print("{}")}function parenthesize_for_noin(node,output,noin){if(noin)try{node.walk(new TreeWalker(function(node){if(node instanceof AST_Binary&&"in"==node.operator)throw output})),node.print(output)}catch(ex){if(ex!==output)throw ex;node.print(output,!0)}else node.print(output)}function print_property_name(key,quote,output){output.option("quote_keys")?output.print_string(key+""):("number"==typeof key||!output.option("beautify")&&+key+""==key)&&0<=parseFloat(key)?output.print(make_num(key)):(RESERVED_WORDS(key)?!output.option("screw_ie8"):!is_identifier_string(key))||quote&&output.option("keep_quoted_props")?output.print_string(key,quote):output.print_name(key)}function force_statement(stat,output){output.option("bracketize")?make_block(stat,output):!stat||stat instanceof AST_EmptyStatement?output.force_semicolon():stat.print(output)}function need_constructor_parens(self,output){return 0<self.args.length||output.option("beautify")}function make_num(num){var m,str=num.toString(10),a=[str.replace(/^0\./,".").replace("e+","e")];return Math.floor(num)===num?(0<=num?a.push("0x"+num.toString(16).toLowerCase(),"0"+num.toString(8)):a.push("-0x"+(-num).toString(16).toLowerCase(),"-0"+(-num).toString(8)),(m=/^(.*?)(0+)$/.exec(num))&&a.push(m[1]+"e"+m[2].length)):(m=/^0?\.(0+)(.*)$/.exec(num))&&a.push(m[2]+"e-"+(m[1].length+m[2].length),str.substr(str.indexOf("."))),function(a){for(var best=a[0],len=best.length,i=1;i<a.length;++i)a[i].length<len&&(len=(best=a[i]).length);return best}(a)}function make_block(stmt,output){!stmt||stmt instanceof AST_EmptyStatement?output.print("{}"):stmt instanceof AST_BlockStatement?stmt.print(output):output.with_block(function(){output.indent(),stmt.print(output),output.newline()})}function DEFMAP(nodetype,generator){nodetype.DEFMETHOD("add_source_map",function(stream){generator(this,stream)})}function basic_sourcemap_gen(self,output){output.add_mapping(self.start)}function Compressor(options,false_by_default){if(!(this instanceof Compressor))return new Compressor(options,false_by_default);TreeTransformer.call(this,this.before,this.after),this.options=defaults(options,{angular:!1,booleans:!false_by_default,cascade:!false_by_default,collapse_vars:!false_by_default,comparisons:!false_by_default,conditionals:!false_by_default,dead_code:!false_by_default,drop_console:!1,drop_debugger:!false_by_default,evaluate:!false_by_default,expression:!1,global_defs:{},hoist_funs:!false_by_default,hoist_vars:!1,if_return:!false_by_default,join_vars:!false_by_default,keep_fargs:!0,keep_fnames:!1,keep_infinity:!1,loops:!false_by_default,negate_iife:!false_by_default,passes:1,properties:!false_by_default,pure_getters:!false_by_default&&"strict",pure_funcs:null,reduce_vars:!false_by_default,screw_ie8:!0,sequences:!false_by_default,side_effects:!false_by_default,switches:!false_by_default,top_retain:null,toplevel:!(!options||!options.top_retain),unsafe:!1,unsafe_comps:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unused:!false_by_default,warnings:!0},!0);var pure_funcs=this.options.pure_funcs;this.pure_funcs="function"==typeof pure_funcs?pure_funcs:pure_funcs?function(node){return pure_funcs.indexOf(node.expression.print_to_string())<0}:return_true;var top_retain=this.options.top_retain;top_retain instanceof RegExp?this.top_retain=function(def){return top_retain.test(def.name)}:"function"==typeof top_retain?this.top_retain=top_retain:top_retain&&("string"==typeof top_retain&&(top_retain=top_retain.split(/,/)),this.top_retain=function(def){return 0<=top_retain.indexOf(def.name)});var sequences=this.options.sequences;this.sequences_limit=1==sequences?200:0|sequences,this.warnings_produced={}}function readReservedFile(filename,reserved){reserved=reserved||{vars:[],props:[]};var data=rjsFile.readFile(filename,"utf8");return(data=JSON.parse(data)).vars&&data.vars.forEach(function(name){exports.push_uniq(reserved.vars,name)}),data.props&&data.props.forEach(function(name){exports.push_uniq(reserved.props,name)}),reserved}in_directive=use_asm=!1,AST_Node.DEFMETHOD("print",function(stream,force_parens){var self=this,generator=self._codegen,prev_use_asm=use_asm;function doit(){self.add_comments(stream),self.add_source_map(stream),generator(self,stream)}self instanceof AST_Directive&&"use asm"==self.value&&stream.parent()instanceof AST_Scope&&(use_asm=!0),stream.push_node(self),force_parens||self.needs_parens(stream)?stream.with_parens(doit):doit(),stream.pop_node(),self instanceof AST_Scope&&(use_asm=prev_use_asm)}),AST_Node.DEFMETHOD("print_to_string",function(options){var s=OutputStream(options);return options||(s._readonly=!0),this.print(s),s.get()}),AST_Node.DEFMETHOD("add_comments",function(output){if(!output._readonly){var start=this.start;if(start&&!start._comments_dumped){start._comments_dumped=!0;var comments=start.comments_before||[];if(this instanceof AST_Exit&&this.value&&this.value.walk(new TreeWalker(function(node){if(node.start&&node.start.comments_before&&(comments=comments.concat(node.start.comments_before),node.start.comments_before=[]),node instanceof AST_Function||node instanceof AST_Array||node instanceof AST_Object)return!0})),0==output.pos()){0<comments.length&&output.option("shebang")&&"comment5"==comments[0].type&&(output.print("#!"+comments.shift().value+"\n"),output.indent());var preamble=output.option("preamble");preamble&&output.print(preamble.replace(/\r\n?|[\n\u2028\u2029]|\s*$/g,"\n"))}comments=comments.filter(output.comment_filter,this),!output.option("beautify")&&0<comments.length&&/comment[134]/.test(comments[0].type)&&0!==output.col()&&comments[0].nlb&&output.print("\n"),comments.forEach(function(c){/comment[134]/.test(c.type)?(output.print("//"+c.value+"\n"),output.indent()):"comment2"==c.type&&(output.print("/*"+c.value+"*/"),start.nlb?(output.print("\n"),output.indent()):output.space())})}}}),PARENS(AST_Node,function(){return!1}),PARENS(AST_Function,function(output){if(first_in_statement(output))return!0;if(output.option("wrap_iife")){var p=output.parent();return p instanceof AST_Call&&p.expression===this}return!1}),PARENS(AST_Object,function(output){return first_in_statement(output)}),PARENS(AST_Unary,function(output){var p=output.parent();return p instanceof AST_PropAccess&&p.expression===this||p instanceof AST_Call&&p.expression===this}),PARENS(AST_Seq,function(output){var p=output.parent();return p instanceof AST_Call||p instanceof AST_Unary||p instanceof AST_Binary||p instanceof AST_VarDef||p instanceof AST_PropAccess||p instanceof AST_Array||p instanceof AST_ObjectProperty||p instanceof AST_Conditional}),PARENS(AST_Binary,function(output){var p=output.parent();if(p instanceof AST_Call&&p.expression===this)return!0;if(p instanceof AST_Unary)return!0;if(p instanceof AST_PropAccess&&p.expression===this)return!0;if(p instanceof AST_Binary){var po=p.operator,pp=PRECEDENCE[po],so=this.operator,sp=PRECEDENCE[so];if(sp<pp||pp==sp&&this===p.right)return!0}}),PARENS(AST_PropAccess,function(output){var p=output.parent();if(p instanceof AST_New&&p.expression===this)try{this.walk(new TreeWalker(function(node){if(node instanceof AST_Call)throw p}))}catch(ex){if(ex!==p)throw ex;return!0}}),PARENS(AST_Call,function(output){var p1,p=output.parent();return p instanceof AST_New&&p.expression===this||this.expression instanceof AST_Function&&p instanceof AST_PropAccess&&p.expression===this&&(p1=output.parent(1))instanceof AST_Assign&&p1.left===p}),PARENS(AST_New,function(output){var p=output.parent();if(!need_constructor_parens(this,output)&&(p instanceof AST_PropAccess||p instanceof AST_Call&&p.expression===this))return!0}),PARENS(AST_Number,function(output){var p=output.parent();if(p instanceof AST_PropAccess&&p.expression===this){var value=this.getValue();if(value<0||/^0/.test(make_num(value)))return!0}}),PARENS([AST_Assign,AST_Conditional],function(output){var p=output.parent();return p instanceof AST_Unary||(p instanceof AST_Binary&&!(p instanceof AST_Assign)||(p instanceof AST_Call&&p.expression===this||(p instanceof AST_Conditional&&p.condition===this||(p instanceof AST_PropAccess&&p.expression===this||void 0))))}),DEFPRINT(AST_Directive,function(self,output){output.print_string(self.value,self.quote),output.semicolon()}),DEFPRINT(AST_Debugger,function(self,output){output.print("debugger"),output.semicolon()}),AST_StatementWithBody.DEFMETHOD("_do_print_body",function(output){force_statement(this.body,output)}),DEFPRINT(AST_Statement,function(self,output){self.body.print(output),output.semicolon()}),DEFPRINT(AST_Toplevel,function(self,output){display_body(self.body,!0,output,!0),output.print("")}),DEFPRINT(AST_LabeledStatement,function(self,output){self.label.print(output),output.colon(),self.body.print(output)}),DEFPRINT(AST_SimpleStatement,function(self,output){self.body.print(output),output.semicolon()}),DEFPRINT(AST_BlockStatement,function(self,output){print_bracketed(self.body,output)}),DEFPRINT(AST_EmptyStatement,function(self,output){output.semicolon()}),DEFPRINT(AST_Do,function(self,output){output.print("do"),output.space(),make_block(self.body,output),output.space(),output.print("while"),output.space(),output.with_parens(function(){self.condition.print(output)}),output.semicolon()}),DEFPRINT(AST_While,function(self,output){output.print("while"),output.space(),output.with_parens(function(){self.condition.print(output)}),output.space(),self._do_print_body(output)}),DEFPRINT(AST_For,function(self,output){output.print("for"),output.space(),output.with_parens(function(){self.init?(self.init instanceof AST_Definitions?self.init.print(output):parenthesize_for_noin(self.init,output,!0),output.print(";"),output.space()):output.print(";"),self.condition?(self.condition.print(output),output.print(";"),output.space()):output.print(";"),self.step&&self.step.print(output)}),output.space(),self._do_print_body(output)}),DEFPRINT(AST_ForIn,function(self,output){output.print("for"),output.space(),output.with_parens(function(){self.init.print(output),output.space(),output.print("in"),output.space(),self.object.print(output)}),output.space(),self._do_print_body(output)}),DEFPRINT(AST_With,function(self,output){output.print("with"),output.space(),output.with_parens(function(){self.expression.print(output)}),output.space(),self._do_print_body(output)}),AST_Lambda.DEFMETHOD("_do_print",function(output,nokeyword){var self=this;nokeyword||output.print("function"),self.name&&(output.space(),self.name.print(output)),output.with_parens(function(){self.argnames.forEach(function(arg,i){i&&output.comma(),arg.print(output)})}),output.space(),print_bracketed(self.body,output,!0)}),DEFPRINT(AST_Lambda,function(self,output){self._do_print(output)}),AST_Exit.DEFMETHOD("_do_print",function(output,kind){output.print(kind),this.value&&(output.space(),this.value.print(output)),output.semicolon()}),DEFPRINT(AST_Return,function(self,output){self._do_print(output,"return")}),DEFPRINT(AST_Throw,function(self,output){self._do_print(output,"throw")}),AST_LoopControl.DEFMETHOD("_do_print",function(output,kind){output.print(kind),this.label&&(output.space(),this.label.print(output)),output.semicolon()}),DEFPRINT(AST_Break,function(self,output){self._do_print(output,"break")}),DEFPRINT(AST_Continue,function(self,output){self._do_print(output,"continue")}),DEFPRINT(AST_If,function(self,output){output.print("if"),output.space(),output.with_parens(function(){self.condition.print(output)}),output.space(),self.alternative?(function(self,output){var b=self.body;if(output.option("bracketize")||!output.option("screw_ie8")&&b instanceof AST_Do)return make_block(b,output);if(!b)return output.force_semicolon();for(;;)if(b instanceof AST_If){if(!b.alternative)return make_block(self.body,output);b=b.alternative}else{if(!(b instanceof AST_StatementWithBody))break;b=b.body}force_statement(self.body,output)}(self,output),output.space(),output.print("else"),output.space(),self.alternative instanceof AST_If?self.alternative.print(output):force_statement(self.alternative,output)):self._do_print_body(output)}),DEFPRINT(AST_Switch,function(self,output){output.print("switch"),output.space(),output.with_parens(function(){self.expression.print(output)}),output.space();var last=self.body.length-1;last<0?output.print("{}"):output.with_block(function(){self.body.forEach(function(branch,i){output.indent(!0),branch.print(output),i<last&&0<branch.body.length&&output.newline()})})}),AST_SwitchBranch.DEFMETHOD("_do_print_body",function(output){output.newline(),this.body.forEach(function(stmt){output.indent(),stmt.print(output),output.newline()})}),DEFPRINT(AST_Default,function(self,output){output.print("default:"),self._do_print_body(output)}),DEFPRINT(AST_Case,function(self,output){output.print("case"),output.space(),self.expression.print(output),output.print(":"),self._do_print_body(output)}),DEFPRINT(AST_Try,function(self,output){output.print("try"),output.space(),print_bracketed(self.body,output),self.bcatch&&(output.space(),self.bcatch.print(output)),self.bfinally&&(output.space(),self.bfinally.print(output))}),DEFPRINT(AST_Catch,function(self,output){output.print("catch"),output.space(),output.with_parens(function(){self.argname.print(output)}),output.space(),print_bracketed(self.body,output)}),DEFPRINT(AST_Finally,function(self,output){output.print("finally"),output.space(),print_bracketed(self.body,output)}),AST_Definitions.DEFMETHOD("_do_print",function(output,kind){output.print(kind),output.space(),this.definitions.forEach(function(def,i){i&&output.comma(),def.print(output)});var p=output.parent();(p instanceof AST_For||p instanceof AST_ForIn)&&p.init===this||output.semicolon()}),DEFPRINT(AST_Var,function(self,output){self._do_print(output,"var")}),DEFPRINT(AST_Const,function(self,output){self._do_print(output,"const")}),DEFPRINT(AST_VarDef,function(self,output){if(self.name.print(output),self.value){output.space(),output.print("="),output.space();var p=output.parent(1),noin=p instanceof AST_For||p instanceof AST_ForIn;parenthesize_for_noin(self.value,output,noin)}}),DEFPRINT(AST_Call,function(self,output){self.expression.print(output),self instanceof AST_New&&!need_constructor_parens(self,output)||output.with_parens(function(){self.args.forEach(function(expr,i){i&&output.comma(),expr.print(output)})})}),DEFPRINT(AST_New,function(self,output){output.print("new"),output.space(),AST_Call.prototype._codegen(self,output)}),AST_Seq.DEFMETHOD("_do_print",function(output){this.car.print(output),this.cdr&&(output.comma(),output.should_break()&&(output.newline(),output.indent()),this.cdr.print(output))}),DEFPRINT(AST_Seq,function(self,output){self._do_print(output)}),DEFPRINT(AST_Dot,function(self,output){var expr=self.expression;expr.print(output),expr instanceof AST_Number&&0<=expr.getValue()&&(/[xa-f.)]/i.test(output.last())||output.print(".")),output.print("."),output.add_mapping(self.end),output.print_name(self.property)}),DEFPRINT(AST_Sub,function(self,output){self.expression.print(output),output.print("["),self.property.print(output),output.print("]")}),DEFPRINT(AST_UnaryPrefix,function(self,output){var op=self.operator;output.print(op),(/^[a-z]/i.test(op)||/[+-]$/.test(op)&&self.expression instanceof AST_UnaryPrefix&&/^[+-]/.test(self.expression.operator))&&output.space(),self.expression.print(output)}),DEFPRINT(AST_UnaryPostfix,function(self,output){self.expression.print(output),output.print(self.operator)}),DEFPRINT(AST_Binary,function(self,output){var op=self.operator;self.left.print(output),">"==op[0]&&self.left instanceof AST_UnaryPostfix&&"--"==self.left.operator?output.print(" "):output.space(),output.print(op),("<"==op||"<<"==op)&&self.right instanceof AST_UnaryPrefix&&"!"==self.right.operator&&self.right.expression instanceof AST_UnaryPrefix&&"--"==self.right.expression.operator?output.print(" "):output.space(),self.right.print(output)}),DEFPRINT(AST_Conditional,function(self,output){self.condition.print(output),output.space(),output.print("?"),output.space(),self.consequent.print(output),output.space(),output.colon(),self.alternative.print(output)}),DEFPRINT(AST_Array,function(self,output){output.with_square(function(){var a=self.elements,len=a.length;0<len&&output.space(),a.forEach(function(exp,i){i&&output.comma(),exp.print(output),i===len-1&&exp instanceof AST_Hole&&output.comma()}),0<len&&output.space()})}),DEFPRINT(AST_Object,function(self,output){0<self.properties.length?output.with_block(function(){self.properties.forEach(function(prop,i){i&&(output.print(","),output.newline()),output.indent(),prop.print(output)}),output.newline()}):output.print("{}")}),DEFPRINT(AST_ObjectKeyVal,function(self,output){print_property_name(self.key,self.quote,output),output.colon(),self.value.print(output)}),AST_ObjectProperty.DEFMETHOD("_print_getter_setter",function(type,output){output.print(type),output.space(),print_property_name(this.key.name,this.quote,output),this.value._do_print(output,!0)}),DEFPRINT(AST_ObjectSetter,function(self,output){self._print_getter_setter("set",output)}),DEFPRINT(AST_ObjectGetter,function(self,output){self._print_getter_setter("get",output)}),DEFPRINT(AST_Symbol,function(self,output){var def=self.definition();output.print_name(def?def.mangled_name||def.name:self.name)}),DEFPRINT(AST_Hole,noop),DEFPRINT(AST_This,function(self,output){output.print("this")}),DEFPRINT(AST_Constant,function(self,output){output.print(self.getValue())}),DEFPRINT(AST_String,function(self,output){output.print_string(self.getValue(),self.quote,in_directive)}),DEFPRINT(AST_Number,function(self,output){use_asm&&self.start&&null!=self.start.raw?output.print(self.start.raw):output.print(make_num(self.getValue()))}),DEFPRINT(AST_RegExp,function(self,output){var str=self.getValue().toString();output.option("ascii_only")?str=output.to_ascii(str):output.option("unescape_regexps")&&(str=str.split("\\\\").map(function(str){return str.replace(/\\u[0-9a-fA-F]{4}|\\x[0-9a-fA-F]{2}/g,function(s){var code=parseInt(s.substr(2),16);return function(code){return[92,47,46,43,42,63,40,41,91,93,123,125,36,94,58,124,33,10,13,0,65279,8232,8233].indexOf(code)<0}(code)?String.fromCharCode(code):s})}).join("\\\\")),output.print(str);var p=output.parent();p instanceof AST_Binary&&/^in/.test(p.operator)&&p.left===self&&output.print(" ")}),DEFMAP(AST_Node,noop),DEFMAP(AST_Directive,basic_sourcemap_gen),DEFMAP(AST_Debugger,basic_sourcemap_gen),DEFMAP(AST_Symbol,basic_sourcemap_gen),DEFMAP(AST_Jump,basic_sourcemap_gen),DEFMAP(AST_StatementWithBody,basic_sourcemap_gen),DEFMAP(AST_LabeledStatement,noop),DEFMAP(AST_Lambda,basic_sourcemap_gen),DEFMAP(AST_Switch,basic_sourcemap_gen),DEFMAP(AST_SwitchBranch,basic_sourcemap_gen),DEFMAP(AST_BlockStatement,basic_sourcemap_gen),DEFMAP(AST_Toplevel,noop),DEFMAP(AST_New,basic_sourcemap_gen),DEFMAP(AST_Try,basic_sourcemap_gen),DEFMAP(AST_Catch,basic_sourcemap_gen),DEFMAP(AST_Finally,basic_sourcemap_gen),DEFMAP(AST_Definitions,basic_sourcemap_gen),DEFMAP(AST_Constant,basic_sourcemap_gen),DEFMAP(AST_ObjectSetter,function(self,output){output.add_mapping(self.start,self.key.name)}),DEFMAP(AST_ObjectGetter,function(self,output){output.add_mapping(self.start,self.key.name)}),DEFMAP(AST_ObjectProperty,function(self,output){output.add_mapping(self.start,self.key)}),merge(Compressor.prototype=new TreeTransformer,{option:function(key){return this.options[key]},compress:function(node){this.option("expression")&&(node=node.process_expression(!0));for(var passes=+this.options.passes||1,pass=0;pass<passes&&pass<3;++pass)(0<pass||this.option("reduce_vars"))&&node.reset_opt_flags(this,!0),node=node.transform(this);return this.option("expression")&&(node=node.process_expression(!1)),node},info:function(){"verbose"==this.options.warnings&&AST_Node.warn.apply(AST_Node,arguments)},warn:function(text,props){if(this.options.warnings){var message=string_template(text,props);message in this.warnings_produced||(this.warnings_produced[message]=!0,AST_Node.warn.apply(AST_Node,arguments))}},clear_warnings:function(){this.warnings_produced={}},before:function(node,descend,in_list){if(node._squeezed)return node;var was_scope=!1;node instanceof AST_Scope&&(node=node.hoist_declarations(this),was_scope=!0),descend(node,this),descend(node,this);var opt=node.optimize(this);return was_scope&&opt instanceof AST_Scope&&(opt.drop_unused(this),descend(opt,this)),opt===node&&(opt._squeezed=!0),opt}}),function(){function OPT(node,optimizer){node.DEFMETHOD("optimize",function(compressor){if(this._optimized)return this;if(compressor.has_directive("use asm"))return this;var opt=optimizer(this,compressor);return opt._optimized=!0,opt})}function is_reference_const(ref){if(ref instanceof AST_SymbolRef)for(var orig=ref.definition().orig,i=orig.length;0<=--i;)if(orig[i]instanceof AST_SymbolConst)return 1}function find_variable(compressor,name){for(var scope,i=0;(scope=compressor.parent(i++))&&!(scope instanceof AST_Scope);)if(scope instanceof AST_Catch){scope=scope.argname.definition().scope;break}return scope.find_variable(name)}function make_node(ctor,orig,props){return props=props||{},orig&&(props.start||(props.start=orig.start),props.end||(props.end=orig.end)),new ctor(props)}function make_node_from_constant(val,orig){switch(typeof val){case"string":return make_node(AST_String,orig,{value:val});case"number":return isNaN(val)?make_node(AST_NaN,orig):isFinite(val)?1/val<0?make_node(AST_UnaryPrefix,orig,{operator:"-",expression:make_node(AST_Number,orig,{value:-val})}):make_node(AST_Number,orig,{value:val}):val<0?make_node(AST_UnaryPrefix,orig,{operator:"-",expression:make_node(AST_Infinity,orig)}):make_node(AST_Infinity,orig);case"boolean":return make_node(val?AST_True:AST_False,orig);case"undefined":return make_node(AST_Undefined,orig);default:if(null===val)return make_node(AST_Null,orig,{value:null});if(val instanceof RegExp)return make_node(AST_RegExp,orig,{value:val});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof val}))}}function maintain_this_binding(parent,orig,val){return parent instanceof AST_UnaryPrefix&&"delete"==parent.operator||parent instanceof AST_Call&&parent.expression===orig&&(val instanceof AST_PropAccess||val instanceof AST_SymbolRef&&"eval"==val.name)?make_node(AST_Seq,orig,{car:make_node(AST_Number,orig,{value:0}),cdr:val}):val}function as_statement_array(thing){if(null===thing)return[];if(thing instanceof AST_BlockStatement)return thing.body;if(thing instanceof AST_EmptyStatement)return[];if(thing instanceof AST_Statement)return[thing];throw new Error("Can't convert thing to statement array")}function is_empty(thing){return null===thing||(thing instanceof AST_EmptyStatement||thing instanceof AST_BlockStatement&&0==thing.body.length)}function loop_body(x){return!(x instanceof AST_Switch)&&(x instanceof AST_For||x instanceof AST_ForIn||x instanceof AST_DWLoop)&&x.body instanceof AST_BlockStatement?x.body:x}function is_iife_call(node){return node instanceof AST_Call&&!(node instanceof AST_New)&&(node.expression instanceof AST_Function||is_iife_call(node.expression))}function tighten_body(statements,compressor){for(var CHANGED,max_iter=10;CHANGED=!1,compressor.option("angular")&&(statements=process_for_angular(statements)),statements=eliminate_spurious_blocks(statements),compressor.option("dead_code")&&(statements=eliminate_dead_code(statements,compressor)),compressor.option("if_return")&&(statements=handle_if_return(statements,compressor)),0<compressor.sequences_limit&&(statements=sequencesize(statements,compressor)),compressor.option("join_vars")&&(statements=join_consecutive_vars(statements)),compressor.option("collapse_vars")&&(statements=collapse_single_use_vars(statements,compressor)),CHANGED&&0<max_iter--;);return statements;function collapse_single_use_vars(statements,compressor){for(var self=compressor.self(),var_defs_removed=!1,toplevel=compressor.option("toplevel"),stat_index=statements.length;0<=--stat_index;){var stat=statements[stat_index];if(!(stat instanceof AST_Definitions)){if([stat,stat.body,stat.alternative,stat.bcatch,stat.bfinally].forEach(function(node){node&&node.body&&collapse_single_use_vars(node.body,compressor)}),stat_index<=0)break;var prev_stat_index=stat_index-1,prev_stat=statements[prev_stat_index];if(prev_stat instanceof AST_Definitions){var var_defs=prev_stat.definitions;if(null!=var_defs)for(var var_names_seen={},side_effects_encountered=!1,lvalues_encountered=!1,lvalues={},var_defs_index=var_defs.length;0<=--var_defs_index;){var var_decl=var_defs[var_defs_index];if(null==var_decl.value)break;var var_name=var_decl.name.name;if(!var_name||!var_name.length)break;if(var_name in var_names_seen)break;var_names_seen[var_name]=!0;var def=self.find_variable&&self.find_variable(var_name);if(def&&def.references&&1===def.references.length&&"arguments"!=var_name&&(toplevel||!def.global)){var ref=def.references[0];if(ref.scope.uses_eval||ref.scope.uses_with)break;if(var_decl.value.is_constant()){var ctt=new TreeTransformer(function(node){var parent=ctt.parent();return parent instanceof AST_IterationStatement&&(parent.condition===node||parent.init===node)?node:node===ref?replace_var(node,parent,!0):void 0});stat.transform(ctt)}else if(!(side_effects_encountered|=lvalues_encountered)){var value_has_side_effects=var_decl.value.has_side_effects(compressor);if(ref.scope===self){var tw=new TreeWalker(function(node){node instanceof AST_SymbolRef&&is_lvalue(node,tw.parent())&&(lvalues[node.name]=lvalues_encountered=!0)});var_decl.value.walk(tw);var unwind=!1,tt=new TreeTransformer(function(node){if(unwind)return node;var parent=tt.parent();if(node instanceof AST_Lambda||node instanceof AST_Try||node instanceof AST_With||node instanceof AST_Case||node instanceof AST_IterationStatement||parent instanceof AST_If&&node!==parent.condition||parent instanceof AST_Conditional&&node!==parent.condition||node instanceof AST_SymbolRef&&value_has_side_effects&&!function(def,scope){if(1===def.orig.length&&def.orig[0]instanceof AST_SymbolDefun)return 1;if(def.scope!==scope)return;for(var refs=def.references,i=0,len=refs.length;i<len;i++)if(refs[i].scope!==scope)return;return 1}(node.definition(),self)||parent instanceof AST_Binary&&("&&"==parent.operator||"||"==parent.operator)&&node===parent.right||parent instanceof AST_Switch&&node!==parent.expression)return side_effects_encountered=unwind=!0,node},function(node){return unwind?node:node===ref?(unwind=!0,replace_var(node,tt.parent(),!1)):(side_effects_encountered|=node.has_side_effects(compressor))?(unwind=!0,node):lvalues_encountered&&node instanceof AST_SymbolRef&&node.name in lvalues?(unwind=side_effects_encountered=!0,node):void 0});stat.transform(tt)}else side_effects_encountered|=value_has_side_effects}}else side_effects_encountered=!0}}}}if(var_defs_removed)for(var i=statements.length;0<=--i;)1<statements.length&&statements[i]instanceof AST_EmptyStatement&&statements.splice(i,1);return statements;function is_lvalue(node,parent){return node instanceof AST_SymbolRef&&is_lhs(node,parent)}function replace_var(node,parent,is_constant){if(is_lvalue(node,parent))return node;var value=maintain_this_binding(parent,node,var_decl.value);return var_decl.value=null,var_defs.splice(var_defs_index,1),0===var_defs.length&&(statements[prev_stat_index]=make_node(AST_EmptyStatement,self),var_defs_removed=!0),stat.reset_opt_flags(compressor),compressor.info("Collapsing "+(is_constant?"constant":"variable")+" "+var_name+" [{file}:{line},{col}]",node.start),CHANGED=!0,value}}function process_for_angular(statements){function has_inject(comment){return/@ngInject/.test(comment.value)}function make_arguments_names_list(func){return func.argnames.map(function(sym){return make_node(AST_String,sym,{value:sym.name})})}function make_array(orig,elements){return make_node(AST_Array,orig,{elements:elements})}function make_injector(func,name){return make_node(AST_SimpleStatement,func,{body:make_node(AST_Assign,func,{operator:"=",left:make_node(AST_Dot,name,{expression:make_node(AST_SymbolRef,name,name),property:"$inject"}),right:make_array(func,make_arguments_names_list(func))})})}return statements.reduce(function(a,stat){if(a.push(stat),stat.body&&stat.body.args)!function check_expression(body){body&&body.args&&(body.args.forEach(function(argument,index,array){var comments=argument.start.comments_before;argument instanceof AST_Lambda&&comments.length&&has_inject(comments[0])&&(array[index]=make_array(argument,make_arguments_names_list(argument).concat(argument)))}),body.expression&&body.expression.expression&&check_expression(body.expression.expression))}(stat.body);else{var token=stat.start,comments=token.comments_before;if(comments&&0<comments.length)has_inject(comments.pop())&&(stat instanceof AST_Defun?a.push(make_injector(stat,stat.name)):stat instanceof AST_Definitions?stat.definitions.forEach(function(def){def.value&&def.value instanceof AST_Lambda&&a.push(make_injector(def.value,def.name))}):compressor.warn("Unknown statement marked with @ngInject [{file}:{line},{col}]",token))}return a},[])}function eliminate_spurious_blocks(statements){var seen_dirs=[];return statements.reduce(function(a,stat){return stat instanceof AST_BlockStatement?(CHANGED=!0,a.push.apply(a,eliminate_spurious_blocks(stat.body))):stat instanceof AST_EmptyStatement?CHANGED=!0:stat instanceof AST_Directive?seen_dirs.indexOf(stat.value)<0?(a.push(stat),seen_dirs.push(stat.value)):CHANGED=!0:a.push(stat),a},[])}function handle_if_return(statements,compressor){var self=compressor.self(),multiple_if_returns=function(statements){for(var n=0,i=statements.length;0<=--i;){var stat=statements[i];if(stat instanceof AST_If&&stat.body instanceof AST_Return&&1<++n)return!0}return!1}(statements),in_lambda=self instanceof AST_Lambda,ret=[];loop:for(var i=statements.length;0<=--i;){var stat=statements[i];switch(!0){case in_lambda&&stat instanceof AST_Return&&!stat.value&&0==ret.length:CHANGED=!0;continue loop;case stat instanceof AST_If:if(stat.body instanceof AST_Return){if((in_lambda&&0==ret.length||ret[0]instanceof AST_Return&&!ret[0].value)&&!stat.body.value&&!stat.alternative){CHANGED=!0;var cond=make_node(AST_SimpleStatement,stat.condition,{body:stat.condition});ret.unshift(cond);continue loop}if(ret[0]instanceof AST_Return&&stat.body.value&&ret[0].value&&!stat.alternative){CHANGED=!0,(stat=stat.clone()).alternative=ret[0],ret[0]=stat.transform(compressor);continue loop}if(multiple_if_returns&&(0==ret.length||ret[0]instanceof AST_Return)&&stat.body.value&&!stat.alternative&&in_lambda){CHANGED=!0,(stat=stat.clone()).alternative=ret[0]||make_node(AST_Return,stat,{value:null}),ret[0]=stat.transform(compressor);continue loop}if(!stat.body.value&&in_lambda){CHANGED=!0,(stat=stat.clone()).condition=stat.condition.negate(compressor);var funs=extract_functions_from_statement_array(body=as_statement_array(stat.alternative).concat(ret));stat.body=make_node(AST_BlockStatement,stat,{body:body}),stat.alternative=null,ret=funs.concat([stat.transform(compressor)]);continue loop}if(compressor.option("sequences")&&0<i&&statements[i-1]instanceof AST_If&&statements[i-1].body instanceof AST_Return&&1==ret.length&&in_lambda&&ret[0]instanceof AST_SimpleStatement&&!stat.alternative){CHANGED=!0,ret.push(make_node(AST_Return,ret[0],{value:null}).transform(compressor)),ret.unshift(stat);continue loop}}var lct=(ab=aborts(stat.body))instanceof AST_LoopControl?compressor.loopcontrol_target(ab):null;if(ab&&(ab instanceof AST_Return&&!ab.value&&in_lambda||ab instanceof AST_Continue&&self===loop_body(lct)||ab instanceof AST_Break&&lct instanceof AST_BlockStatement&&self===lct)){ab.label&&remove(ab.label.thedef.references,ab),CHANGED=!0;var body=as_statement_array(stat.body).slice(0,-1);(stat=stat.clone()).condition=stat.condition.negate(compressor),stat.body=make_node(AST_BlockStatement,stat,{body:as_statement_array(stat.alternative).concat(ret)}),stat.alternative=make_node(AST_BlockStatement,stat,{body:body}),ret=[stat.transform(compressor)];continue loop}var ab;lct=(ab=aborts(stat.alternative))instanceof AST_LoopControl?compressor.loopcontrol_target(ab):null;if(ab&&(ab instanceof AST_Return&&!ab.value&&in_lambda||ab instanceof AST_Continue&&self===loop_body(lct)||ab instanceof AST_Break&&lct instanceof AST_BlockStatement&&self===lct)){ab.label&&remove(ab.label.thedef.references,ab),CHANGED=!0,(stat=stat.clone()).body=make_node(AST_BlockStatement,stat.body,{body:as_statement_array(stat.body).concat(ret)}),stat.alternative=make_node(AST_BlockStatement,stat.alternative,{body:as_statement_array(stat.alternative).slice(0,-1)}),ret=[stat.transform(compressor)];continue loop}ret.unshift(stat);break;default:ret.unshift(stat)}}return ret}function eliminate_dead_code(statements,compressor){var has_quit=!1,orig=statements.length,self=compressor.self();return statements=statements.reduce(function(a,stat){if(has_quit)extract_declarations_from_unreachable_code(compressor,stat,a);else{if(stat instanceof AST_LoopControl){var lct=compressor.loopcontrol_target(stat);stat instanceof AST_Break&&!(lct instanceof AST_IterationStatement)&&loop_body(lct)===self||stat instanceof AST_Continue&&loop_body(lct)===self?stat.label&&remove(stat.label.thedef.references,stat):a.push(stat)}else a.push(stat);aborts(stat)&&(has_quit=!0)}return a},[]),CHANGED=statements.length!=orig,statements}function sequencesize(statements,compressor){if(statements.length<2)return statements;var seq=[],ret=[];function push_seq(){(seq=AST_Seq.from_array(seq))&&ret.push(make_node(AST_SimpleStatement,seq,{body:seq})),seq=[]}return statements.forEach(function(stat){if(stat instanceof AST_SimpleStatement){(function(a){for(var len=0,i=0;i<a.length;++i){var stat=a[i];stat instanceof AST_Seq?len+=stat.len():len++}return len})(seq)>=compressor.sequences_limit&&push_seq();var body=stat.body;0<seq.length&&(body=body.drop_side_effect_free(compressor)),body&&seq.push(body)}else push_seq(),ret.push(stat)}),push_seq(),ret=function(statements,compressor){function cons_seq(right){ret.pop();var left=prev.body;return left instanceof AST_Seq?left.add(right):left=AST_Seq.cons(left,right),left.transform(compressor)}var ret=[],prev=null;return statements.forEach(function(stat){if(prev)if(stat instanceof AST_For){var opera={};try{prev.body.walk(new TreeWalker(function(node){if(node instanceof AST_Binary&&"in"==node.operator)throw opera})),!stat.init||stat.init instanceof AST_Definitions?stat.init||(stat.init=prev.body.drop_side_effect_free(compressor),ret.pop()):stat.init=cons_seq(stat.init)}catch(ex){if(ex!==opera)throw ex}}else stat instanceof AST_If?stat.condition=cons_seq(stat.condition):stat instanceof AST_With?stat.expression=cons_seq(stat.expression):stat instanceof AST_Exit&&stat.value?stat.value=cons_seq(stat.value):stat instanceof AST_Exit?stat.value=cons_seq(make_node(AST_Undefined,stat).transform(compressor)):stat instanceof AST_Switch&&(stat.expression=cons_seq(stat.expression));ret.push(stat),prev=stat instanceof AST_SimpleStatement?stat:null}),ret}(ret,compressor),CHANGED=ret.length!=statements.length,ret}function join_consecutive_vars(statements){var prev=null;return statements.reduce(function(a,stat){return stat instanceof AST_Definitions&&prev&&prev.TYPE==stat.TYPE?(prev.definitions=prev.definitions.concat(stat.definitions),CHANGED=!0):stat instanceof AST_For&&prev instanceof AST_Var&&(!stat.init||stat.init.TYPE==prev.TYPE)?(CHANGED=!0,a.pop(),stat.init?stat.init.definitions=prev.definitions.concat(stat.init.definitions):stat.init=prev,a.push(stat),prev=stat):(prev=stat,a.push(stat)),a},[])}}function extract_functions_from_statement_array(statements){for(var funs=[],i=statements.length-1;0<=i;--i){var stat=statements[i];stat instanceof AST_Defun&&(statements.splice(i,1),funs.unshift(stat))}return funs}function extract_declarations_from_unreachable_code(compressor,stat,target){stat instanceof AST_Defun||compressor.warn("Dropping unreachable code [{file}:{line},{col}]",stat.start),stat.walk(new TreeWalker(function(node){return node instanceof AST_Definitions?(compressor.warn("Declarations in unreachable code! [{file}:{line},{col}]",node.start),node.remove_initializers(),target.push(node),!0):node instanceof AST_Defun?(target.push(node),!0):node instanceof AST_Scope||void 0}))}function is_undefined(node,compressor){return node.is_undefined||node instanceof AST_Undefined||node instanceof AST_UnaryPrefix&&"void"==node.operator&&!node.expression.has_side_effects(compressor)}function is_strict(pure_getters){return/strict/.test(pure_getters)}var def;OPT(AST_Node,function(self,compressor){return self}),AST_Node.DEFMETHOD("equivalent_to",function(node){return this.TYPE==node.TYPE&&this.print_to_string()==node.print_to_string()}),AST_Node.DEFMETHOD("process_expression",function(insert,compressor){var self=this,tt=new TreeTransformer(function(node){if(insert&&node instanceof AST_SimpleStatement)return make_node(AST_Return,node,{value:node.body});if(!insert&&node instanceof AST_Return){if(compressor){var value=node.value&&node.value.drop_side_effect_free(compressor,!0);return value?make_node(AST_SimpleStatement,node,{body:value}):make_node(AST_EmptyStatement,node)}return make_node(AST_SimpleStatement,node,{body:node.value||make_node(AST_UnaryPrefix,node,{operator:"void",expression:make_node(AST_Number,node,{value:0})})})}if(node instanceof AST_Lambda&&node!==self)return node;if(node instanceof AST_Block){var index=node.body.length-1;0<=index&&(node.body[index]=node.body[index].transform(tt))}return node instanceof AST_If&&(node.body=node.body.transform(tt),node.alternative&&(node.alternative=node.alternative.transform(tt))),node instanceof AST_With&&(node.body=node.body.transform(tt)),node});return self.transform(tt)}),AST_Node.DEFMETHOD("reset_opt_flags",function(compressor,rescan){var reduce_vars=rescan&&compressor.option("reduce_vars"),toplevel=compressor.option("toplevel"),safe_ids=Object.create(null),suppressor=new TreeWalker(function(node){if(node instanceof AST_Symbol){var d=node.definition();node instanceof AST_SymbolRef&&d.references.push(node),d.fixed=!1}}),tw=new TreeWalker(function(node,descend){if(node._squeezed=!1,node._optimized=!1,reduce_vars){var iife;if(node instanceof AST_Toplevel&&node.globals.each(reset_def),node instanceof AST_Scope&&node.variables.each(reset_def),node instanceof AST_SymbolRef)if((d=node.definition()).references.push(node),void 0===d.fixed||!is_safe(d)||function is_modified(node,level,func){var parent=tw.parent(level);{if(is_lhs(node,parent)||!func&&parent instanceof AST_Call&&parent.expression===node)return!0;if(parent instanceof AST_PropAccess&&parent.expression===node)return!func&&is_modified(parent,level+1)}}(node,0,node.fixed_value()instanceof AST_Lambda))d.fixed=!1;else{var parent=tw.parent();(parent instanceof AST_Assign&&"="==parent.operator&&node===parent.right||parent instanceof AST_Call&&node!==parent.expression||parent instanceof AST_Return&&node===parent.value&&node.scope!==d.scope||parent instanceof AST_VarDef&&node===parent.value)&&(d.escaped=!0)}if(node instanceof AST_SymbolCatch&&(node.definition().fixed=!1),node instanceof AST_VarDef){if(null==(d=node.name.definition()).fixed)return node.value?(d.fixed=function(){return node.value},mark(d,!1),descend()):d.fixed=null,mark(d,!0),!0;node.value&&(d.fixed=!1)}if(node instanceof AST_Defun){var d=node.name.definition();!toplevel&&d.global||is_safe(d)?d.fixed=!1:(d.fixed=node,mark(d,!0));var save_ids=safe_ids;return safe_ids=Object.create(null),descend(),safe_ids=save_ids,!0}if(node instanceof AST_Function)return push(),!node.name&&(iife=tw.parent())instanceof AST_Call&&iife.expression===node&&node.argnames.forEach(function(arg,i){var d=arg.definition();node.uses_arguments||void 0!==d.fixed?d.fixed=!1:(d.fixed=function(){return iife.args[i]||make_node(AST_Undefined,iife)},mark(d,!0))}),descend(),pop(),!0;if(node instanceof AST_Accessor){save_ids=safe_ids;return safe_ids=Object.create(null),descend(),safe_ids=save_ids,!0}if(node instanceof AST_Binary&&("&&"==node.operator||"||"==node.operator))return node.left.walk(tw),push(),node.right.walk(tw),pop(),!0;if(node instanceof AST_Conditional)return node.condition.walk(tw),push(),node.consequent.walk(tw),pop(),push(),node.alternative.walk(tw),pop(),!0;if(node instanceof AST_If||node instanceof AST_DWLoop)return node.condition.walk(tw),push(),node.body.walk(tw),pop(),node.alternative&&(push(),node.alternative.walk(tw),pop()),!0;if(node instanceof AST_LabeledStatement)return push(),node.body.walk(tw),pop(),!0;if(node instanceof AST_For)return node.init&&node.init.walk(tw),push(),node.condition&&node.condition.walk(tw),node.body.walk(tw),node.step&&node.step.walk(tw),pop(),!0;if(node instanceof AST_ForIn)return node.init.walk(suppressor),node.object.walk(tw),push(),node.body.walk(tw),pop(),!0;if(node instanceof AST_Try)return push(),walk_body(node,tw),pop(),node.bcatch&&(push(),node.bcatch.walk(tw),pop()),node.bfinally&&node.bfinally.walk(tw),!0;if(node instanceof AST_SwitchBranch)return push(),descend(),pop(),!0}});function mark(def,safe){safe_ids[def.id]=safe}function is_safe(def){if(safe_ids[def.id]){if(null==def.fixed){var orig=def.orig[0];if(orig instanceof AST_SymbolFunarg||"arguments"==orig.name)return;def.fixed=make_node(AST_Undefined,orig)}return 1}}function push(){safe_ids=Object.create(safe_ids)}function pop(){safe_ids=Object.getPrototypeOf(safe_ids)}function reset_def(def){def.escaped=!1,!def.scope.uses_eval&&(toplevel||!def.global||def.orig[0]instanceof AST_SymbolConst)?def.fixed=void 0:def.fixed=!1,def.references=[],def.should_replace=void 0}this.walk(tw)}),AST_SymbolRef.DEFMETHOD("fixed_value",function(){var fixed=this.definition().fixed;return!fixed||fixed instanceof AST_Node?fixed:fixed()}),def=function(node,func){node.DEFMETHOD("_throw_on_access",func)},AST_Node.DEFMETHOD("may_throw_on_access",function(compressor){var pure_getters=compressor.option("pure_getters");return!pure_getters||this._throw_on_access(pure_getters)}),def(AST_Node,is_strict),def(AST_Null,return_true),def(AST_Undefined,return_true),def(AST_Constant,return_false),def(AST_Array,return_false),def(AST_Object,function(pure_getters){if(!is_strict(pure_getters))return!1;for(var i=this.properties.length;0<=--i;)if(this.properties[i].value instanceof AST_Accessor)return!0;return!1}),def(AST_Function,return_false),def(AST_UnaryPostfix,return_false),def(AST_UnaryPrefix,function(){return"void"==this.operator}),def(AST_Binary,function(pure_getters){switch(this.operator){case"&&":return this.left._throw_on_access(pure_getters);case"||":return this.left._throw_on_access(pure_getters)&&this.right._throw_on_access(pure_getters);default:return!1}}),def(AST_Assign,function(pure_getters){return"="==this.operator&&this.right._throw_on_access(pure_getters)}),def(AST_Conditional,function(pure_getters){return this.consequent._throw_on_access(pure_getters)||this.alternative._throw_on_access(pure_getters)}),def(AST_Seq,function(pure_getters){return this.cdr._throw_on_access(pure_getters)}),def(AST_SymbolRef,function(pure_getters){if(this.is_undefined)return!0;if(!is_strict(pure_getters))return!1;var fixed=this.fixed_value();return!fixed||fixed._throw_on_access(pure_getters)}),function(def){var unary_bool=["!","delete"],binary_bool=["in","instanceof","==","!=","===","!==","<","<=",">=",">"];def(AST_Node,return_false),def(AST_UnaryPrefix,function(){return member(this.operator,unary_bool)}),def(AST_Binary,function(){return member(this.operator,binary_bool)||("&&"==this.operator||"||"==this.operator)&&this.left.is_boolean()&&this.right.is_boolean()}),def(AST_Conditional,function(){return this.consequent.is_boolean()&&this.alternative.is_boolean()}),def(AST_Assign,function(){return"="==this.operator&&this.right.is_boolean()}),def(AST_Seq,function(){return this.cdr.is_boolean()}),def(AST_True,return_true),def(AST_False,return_true)}(function(node,func){node.DEFMETHOD("is_boolean",func)}),function(def){def(AST_Node,return_false),def(AST_Number,return_true);var unary=makePredicate("+ - ~ ++ --");def(AST_Unary,function(){return unary(this.operator)});var binary=makePredicate("- * / % & | ^ << >> >>>");def(AST_Binary,function(compressor){return binary(this.operator)||"+"==this.operator&&this.left.is_number(compressor)&&this.right.is_number(compressor)}),def(AST_Assign,function(compressor){return binary(this.operator.slice(0,-1))||"="==this.operator&&this.right.is_number(compressor)}),def(AST_Seq,function(compressor){return this.cdr.is_number(compressor)}),def(AST_Conditional,function(compressor){return this.consequent.is_number(compressor)&&this.alternative.is_number(compressor)})}(function(node,func){node.DEFMETHOD("is_number",func)}),function(def){def(AST_Node,return_false),def(AST_String,return_true),def(AST_UnaryPrefix,function(){return"typeof"==this.operator}),def(AST_Binary,function(compressor){return"+"==this.operator&&(this.left.is_string(compressor)||this.right.is_string(compressor))}),def(AST_Assign,function(compressor){return("="==this.operator||"+="==this.operator)&&this.right.is_string(compressor)}),def(AST_Seq,function(compressor){return this.cdr.is_string(compressor)}),def(AST_Conditional,function(compressor){return this.consequent.is_string(compressor)&&this.alternative.is_string(compressor)})}(function(node,func){node.DEFMETHOD("is_string",func)});var unary_side_effects=makePredicate("delete ++ --");function is_lhs(node,parent){return parent instanceof AST_Unary&&unary_side_effects(parent.operator)?parent.expression:parent instanceof AST_Assign&&parent.left===node?node:void 0}function best_of_expression(ast1,ast2){return ast1.print_to_string().length>ast2.print_to_string().length?ast2:ast1}function best_of(compressor,ast1,ast2){return(first_in_statement(compressor)?function(ast1,ast2){return best_of_expression(make_node(AST_SimpleStatement,ast1,{body:ast1}),make_node(AST_SimpleStatement,ast2,{body:ast2})).body}:best_of_expression)(ast1,ast2)}function aborts(thing){return thing&&thing.aborts()}!function(def){AST_Node.DEFMETHOD("resolve_defines",function(compressor){if(compressor.option("global_defs")){var def=this._find_defs(compressor,"");if(def){for(var node,parent=this,level=0;node=parent,(parent=compressor.parent(level++))instanceof AST_PropAccess&&parent.expression===node;);if(!is_lhs(node,parent))return def;compressor.warn("global_defs "+this.print_to_string()+" redefined [{file}:{line},{col}]",this.start)}}}),def(AST_Node,noop),def(AST_Dot,function(compressor,suffix){return this.expression._find_defs(compressor,"."+this.property+suffix)}),def(AST_SymbolRef,function(compressor,suffix){if(this.global()){var name,defines=compressor.option("global_defs");if(defines&&HOP(defines,name=this.name+suffix)){var node=function to_node(value,orig){if(value instanceof AST_Node)return make_node(value.CTOR,orig,value);if(Array.isArray(value))return make_node(AST_Array,orig,{elements:value.map(function(value){return to_node(value,orig)})});if(value&&"object"==typeof value){var props=[];for(var key in value)props.push(make_node(AST_ObjectKeyVal,orig,{key:key,value:to_node(value[key],orig)}));return make_node(AST_Object,orig,{properties:props})}return make_node_from_constant(value,orig)}(defines[name],this),top=compressor.find_parent(AST_Toplevel);return node.walk(new TreeWalker(function(node){node instanceof AST_SymbolRef&&(node.scope=top,node.thedef=top.def_global(node))})),node}}})}(function(node,func){node.DEFMETHOD("_find_defs",func)}),function(def){AST_Node.DEFMETHOD("evaluate",function(compressor){if(!compressor.option("evaluate"))return this;try{var val=this._eval(compressor);return!val||val instanceof RegExp||"object"!=typeof val?val:this}catch(ex){if(ex!==def)throw ex;return this}});var unaryPrefix=makePredicate("! ~ - + void");function ev(node,compressor){if(!compressor)throw new Error("Compressor must be passed");return node._eval(compressor)}AST_Node.DEFMETHOD("is_constant",function(){return this instanceof AST_Constant?!(this instanceof AST_RegExp):this instanceof AST_UnaryPrefix&&this.expression instanceof AST_Constant&&unaryPrefix(this.operator)}),AST_Node.DEFMETHOD("constant_value",function(compressor){if(this instanceof AST_Constant&&!(this instanceof AST_RegExp))return this.value;if(this instanceof AST_UnaryPrefix&&this.expression instanceof AST_Constant)switch(this.operator){case"!":return!this.expression.value;case"~":return~this.expression.value;case"-":return-this.expression.value;case"+":return+this.expression.value;default:throw new Error(string_template("Cannot evaluate unary expression {value}",{value:this.print_to_string()}))}var result=this.evaluate(compressor);if(result!==this)return result;throw new Error(string_template("Cannot evaluate constant [{file}:{line},{col}]",this.start))}),def(AST_Statement,function(){throw new Error(string_template("Cannot evaluate a statement [{file}:{line},{col}]",this.start))}),def(AST_Lambda,function(){throw def}),def(AST_Node,function(){throw def}),def(AST_Constant,function(){return this.getValue()}),def(AST_Array,function(compressor){if(compressor.option("unsafe"))return this.elements.map(function(element){return ev(element,compressor)});throw def}),def(AST_Object,function(compressor){if(compressor.option("unsafe")){for(var val={},i=0,len=this.properties.length;i<len;i++){var prop=this.properties[i],key=prop.key;if(key instanceof AST_Symbol?key=key.name:key instanceof AST_Node&&(key=ev(key,compressor)),"function"==typeof Object.prototype[key])throw def;val[key]=ev(prop.value,compressor)}return val}throw def}),def(AST_UnaryPrefix,function(compressor){var e=this.expression;switch(this.operator){case"!":return!ev(e,compressor);case"typeof":if(e instanceof AST_Function)return"function";if((e=ev(e,compressor))instanceof RegExp)throw def;return typeof e;case"void":return void ev(e,compressor);case"~":return~ev(e,compressor);case"-":return-ev(e,compressor);case"+":return+ev(e,compressor)}throw def}),def(AST_Binary,function(c){var result,left=this.left,right=this.right;switch(this.operator){case"&&":result=ev(left,c)&&ev(right,c);break;case"||":result=ev(left,c)||ev(right,c);break;case"|":result=ev(left,c)|ev(right,c);break;case"&":result=ev(left,c)&ev(right,c);break;case"^":result=ev(left,c)^ev(right,c);break;case"+":result=ev(left,c)+ev(right,c);break;case"*":result=ev(left,c)*ev(right,c);break;case"/":result=ev(left,c)/ev(right,c);break;case"%":result=ev(left,c)%ev(right,c);break;case"-":result=ev(left,c)-ev(right,c);break;case"<<":result=ev(left,c)<<ev(right,c);break;case">>":result=ev(left,c)>>ev(right,c);break;case">>>":result=ev(left,c)>>>ev(right,c);break;case"==":result=ev(left,c)==ev(right,c);break;case"===":result=ev(left,c)===ev(right,c);break;case"!=":result=ev(left,c)!=ev(right,c);break;case"!==":result=ev(left,c)!==ev(right,c);break;case"<":result=ev(left,c)<ev(right,c);break;case"<=":result=ev(left,c)<=ev(right,c);break;case">":result=ev(left,c)>ev(right,c);break;case">=":result=ev(left,c)>=ev(right,c);break;default:throw def}if(isNaN(result)&&c.find_parent(AST_With))throw def;return result}),def(AST_Conditional,function(compressor){return ev(this.condition,compressor)?ev(this.consequent,compressor):ev(this.alternative,compressor)}),def(AST_SymbolRef,function(compressor){if(!compressor.option("reduce_vars")||this._evaluating)throw def;this._evaluating=!0;try{var fixed=this.fixed_value();if(!fixed)throw def;var value=ev(fixed,compressor);if(HOP(fixed,"_eval")||(fixed._eval=function(){return value}),value&&"object"==typeof value&&this.definition().escaped)throw def;return value}finally{this._evaluating=!1}}),def(AST_PropAccess,function(compressor){if(compressor.option("unsafe")){var key=this.property;key instanceof AST_Node&&(key=ev(key,compressor));var val=ev(this.expression,compressor);if(val&&HOP(val,key))return val[key]}throw def})}(function(node,func){node.DEFMETHOD("_eval",func)}),function(def){function basic_negation(exp){return make_node(AST_UnaryPrefix,exp,{operator:"!",expression:exp})}function best(orig,alt,first_in_statement){var negated=basic_negation(orig);if(first_in_statement){var stat=make_node(AST_SimpleStatement,alt,{body:alt});return best_of_expression(negated,stat)===stat?alt:negated}return best_of_expression(negated,alt)}def(AST_Node,function(){return basic_negation(this)}),def(AST_Statement,function(){throw new Error("Cannot negate a statement")}),def(AST_Function,function(){return basic_negation(this)}),def(AST_UnaryPrefix,function(){return"!"==this.operator?this.expression:basic_negation(this)}),def(AST_Seq,function(compressor){var self=this.clone();return self.cdr=self.cdr.negate(compressor),self}),def(AST_Conditional,function(compressor,first_in_statement){var self=this.clone();return self.consequent=self.consequent.negate(compressor),self.alternative=self.alternative.negate(compressor),best(this,self,first_in_statement)}),def(AST_Binary,function(compressor,first_in_statement){var self=this.clone(),op=this.operator;if(compressor.option("unsafe_comps"))switch(op){case"<=":return self.operator=">",self;case"<":return self.operator=">=",self;case">=":return self.operator="<",self;case">":return self.operator="<=",self}switch(op){case"==":return self.operator="!=",self;case"!=":return self.operator="==",self;case"===":return self.operator="!==",self;case"!==":return self.operator="===",self;case"&&":return self.operator="||",self.left=self.left.negate(compressor,first_in_statement),self.right=self.right.negate(compressor),best(this,self,first_in_statement);case"||":return self.operator="&&",self.left=self.left.negate(compressor,first_in_statement),self.right=self.right.negate(compressor),best(this,self,first_in_statement)}return basic_negation(this)})}(function(node,func){node.DEFMETHOD("negate",function(compressor,first_in_statement){return func.call(this,compressor,first_in_statement)})}),AST_Call.DEFMETHOD("has_pure_annotation",function(compressor){if(!compressor.option("side_effects"))return!1;if(void 0!==this.pure)return this.pure;var comments,last_comment,pure=!1;return this.start&&(comments=this.start.comments_before)&&comments.length&&/[@#]__PURE__/.test((last_comment=comments[comments.length-1]).value)&&(pure=last_comment),this.pure=pure}),function(def){function any(list,compressor){for(var i=list.length;0<=--i;)if(list[i].has_side_effects(compressor))return!0;return!1}def(AST_Node,return_true),def(AST_EmptyStatement,return_false),def(AST_Constant,return_false),def(AST_This,return_false),def(AST_Call,function(compressor){if(!this.has_pure_annotation(compressor)&&compressor.pure_funcs(this))return!0;for(var i=this.args.length;0<=--i;)if(this.args[i].has_side_effects(compressor))return!0;return!1}),def(AST_Block,function(compressor){return any(this.body,compressor)}),def(AST_Switch,function(compressor){return this.expression.has_side_effects(compressor)||any(this.body,compressor)}),def(AST_Case,function(compressor){return this.expression.has_side_effects(compressor)||any(this.body,compressor)}),def(AST_Try,function(compressor){return any(this.body,compressor)||this.bcatch&&this.bcatch.has_side_effects(compressor)||this.bfinally&&this.bfinally.has_side_effects(compressor)}),def(AST_If,function(compressor){return this.condition.has_side_effects(compressor)||this.body&&this.body.has_side_effects(compressor)||this.alternative&&this.alternative.has_side_effects(compressor)}),def(AST_LabeledStatement,function(compressor){return this.body.has_side_effects(compressor)}),def(AST_SimpleStatement,function(compressor){return this.body.has_side_effects(compressor)}),def(AST_Defun,return_true),def(AST_Function,return_false),def(AST_Binary,function(compressor){return this.left.has_side_effects(compressor)||this.right.has_side_effects(compressor)}),def(AST_Assign,return_true),def(AST_Conditional,function(compressor){return this.condition.has_side_effects(compressor)||this.consequent.has_side_effects(compressor)||this.alternative.has_side_effects(compressor)}),def(AST_Unary,function(compressor){return unary_side_effects(this.operator)||this.expression.has_side_effects(compressor)}),def(AST_SymbolRef,function(compressor){return this.undeclared()}),def(AST_Object,function(compressor){return any(this.properties,compressor)}),def(AST_ObjectProperty,function(compressor){return this.value.has_side_effects(compressor)}),def(AST_Array,function(compressor){return any(this.elements,compressor)}),def(AST_Dot,function(compressor){return this.expression.may_throw_on_access(compressor)||this.expression.has_side_effects(compressor)}),def(AST_Sub,function(compressor){return this.expression.may_throw_on_access(compressor)||this.expression.has_side_effects(compressor)||this.property.has_side_effects(compressor)}),def(AST_Seq,function(compressor){return this.car.has_side_effects(compressor)||this.cdr.has_side_effects(compressor)})}(function(node,func){node.DEFMETHOD("has_side_effects",func)}),function(def){function block_aborts(){var n=this.body.length;return 0<n&&aborts(this.body[n-1])}def(AST_Statement,return_null),def(AST_Jump,return_this),def(AST_BlockStatement,block_aborts),def(AST_SwitchBranch,block_aborts),def(AST_If,function(){return this.alternative&&aborts(this.body)&&aborts(this.alternative)&&this})}(function(node,func){node.DEFMETHOD("aborts",func)}),OPT(AST_Directive,function(self,compressor){return compressor.has_directive(self.value)!==self?make_node(AST_EmptyStatement,self):self}),OPT(AST_Debugger,function(self,compressor){return compressor.option("drop_debugger")?make_node(AST_EmptyStatement,self):self}),OPT(AST_LabeledStatement,function(self,compressor){return self.body instanceof AST_Break&&compressor.loopcontrol_target(self.body)===self.body?make_node(AST_EmptyStatement,self):0==self.label.references.length?self.body:self}),OPT(AST_Block,function(self,compressor){return self.body=tighten_body(self.body,compressor),self}),OPT(AST_BlockStatement,function(self,compressor){switch(self.body=tighten_body(self.body,compressor),self.body.length){case 1:return self.body[0];case 0:return make_node(AST_EmptyStatement,self)}return self}),AST_Scope.DEFMETHOD("drop_unused",function(compressor){var self=this;if(compressor.has_directive("use asm"))return self;var toplevel=compressor.option("toplevel");if(compressor.option("unused")&&(!(self instanceof AST_Toplevel)||toplevel)&&!self.uses_eval&&!self.uses_with){var assign_as_unused=!/keep_assign/.test(compressor.option("unused")),drop_funcs=/funcs/.test(toplevel),drop_vars=/vars/.test(toplevel);self instanceof AST_Toplevel&&1!=toplevel||(drop_funcs=drop_vars=!0);var in_use=[],in_use_ids=Object.create(null);self instanceof AST_Toplevel&&compressor.top_retain&&self.variables.each(function(def){!compressor.top_retain(def)||def.id in in_use_ids||(in_use_ids[def.id]=!0,in_use.push(def))});var initializations=new Dictionary,scope=this,tw=new TreeWalker(function(node,descend){if(node!==self){if(node instanceof AST_Defun){if(!drop_funcs&&scope===self)(node_def=node.name.definition()).id in in_use_ids||(in_use_ids[node_def.id]=!0,in_use.push(node_def));return initializations.add(node.name.name,node),!0}if(node instanceof AST_Definitions&&scope===self)return node.definitions.forEach(function(def){if(!drop_vars){var node_def=def.name.definition();node_def.id in in_use_ids||(in_use_ids[node_def.id]=!0,in_use.push(node_def))}def.value&&(initializations.add(def.name.name,def.value),def.value.has_side_effects(compressor)&&def.value.walk(tw))}),!0;if(assign_as_unused&&node instanceof AST_Assign&&"="==node.operator&&node.left instanceof AST_SymbolRef&&!is_reference_const(node.left)&&scope===self)return node.right.walk(tw),!0;var node_def;if(node instanceof AST_SymbolRef)return(node_def=node.definition()).id in in_use_ids||(in_use_ids[node_def.id]=!0,in_use.push(node_def)),!0;if(node instanceof AST_Scope){var save_scope=scope;return scope=node,descend(),scope=save_scope,!0}}});self.walk(tw);for(var i=0;i<in_use.length;++i)in_use[i].orig.forEach(function(decl){var init=initializations.get(decl.name);init&&init.forEach(function(init){var tw=new TreeWalker(function(node){if(node instanceof AST_SymbolRef){var node_def=node.definition();node_def.id in in_use_ids||(in_use_ids[node_def.id]=!0,in_use.push(node_def))}});init.walk(tw)})});var tt=new TreeTransformer(function(node,descend,in_list){node instanceof AST_Function&&node.name&&!compressor.option("keep_fnames")&&((def=node.name.definition()).id in in_use_ids&&!(1<def.orig.length)||(node.name=null));if(node instanceof AST_Lambda&&!(node instanceof AST_Accessor))for(var trim=!compressor.option("keep_fargs"),a=node.argnames,i=a.length;0<=--i;){var sym=a[i];sym.definition().id in in_use_ids?trim=!1:(sym.__unused=!0,trim&&(a.pop(),compressor[sym.unreferenced()?"warn":"info"]("Dropping unused function argument {name} [{file}:{line},{col}]",{name:sym.name,file:sym.start.file,line:sym.start.line,col:sym.start.col})))}if(drop_funcs&&node instanceof AST_Defun&&node!==self)return node.name.definition().id in in_use_ids?node:(compressor[node.name.unreferenced()?"warn":"info"]("Dropping unused function {name} [{file}:{line},{col}]",{name:node.name.name,file:node.name.start.file,line:node.name.start.line,col:node.name.start.col}),make_node(AST_EmptyStatement,node));if(drop_vars&&node instanceof AST_Definitions&&!(tt.parent()instanceof AST_ForIn&&tt.parent().init===node)){var def;def=mergeSort(def=node.definitions.filter(function(def){def.value&&(def.value=def.value.transform(tt));var sym=def.name.definition();if(sym.id in in_use_ids)return!0;if(sym.orig[0]instanceof AST_SymbolCatch)return def.value=def.value&&def.value.drop_side_effect_free(compressor),!0;var w={name:def.name.name,file:def.name.start.file,line:def.name.start.line,col:def.name.start.col};return def.value&&(def._unused_side_effects=def.value.drop_side_effect_free(compressor))?(compressor.warn("Side effects in initialization of unused variable {name} [{file}:{line},{col}]",w),!0):(compressor[def.name.unreferenced()?"warn":"info"]("Dropping unused variable {name} [{file}:{line},{col}]",w),!1)}),function(a,b){return!a.value&&b.value?-1:!b.value&&a.value?1:0});var side_effects=[];for(i=0;i<def.length;){var x=def[i];x._unused_side_effects?(side_effects.push(x._unused_side_effects),def.splice(i,1)):(0<side_effects.length&&(side_effects.push(x.value),x.value=AST_Seq.from_array(side_effects),side_effects=[]),++i)}return(side_effects=0<side_effects.length?make_node(AST_BlockStatement,node,{body:[make_node(AST_SimpleStatement,node,{body:AST_Seq.from_array(side_effects)})]}):null,0!=def.length||side_effects)?0==def.length?in_list?MAP.splice(side_effects.body):side_effects:(node.definitions=def,side_effects?(side_effects.body.unshift(node),in_list?MAP.splice(side_effects.body):side_effects):node):make_node(AST_EmptyStatement,node)}if(drop_vars&&assign_as_unused&&node instanceof AST_Assign&&"="==node.operator&&node.left instanceof AST_SymbolRef&&(!((def=node.left.definition()).id in in_use_ids)&&self.variables.get(def.name)===def))return maintain_this_binding(tt.parent(),node,node.right.transform(tt));if(node instanceof AST_For){if(descend(node,this),node.init instanceof AST_BlockStatement){var block=node.init;return node.init=block.body.pop(),block.body.push(node),in_list?MAP.splice(block.body):block}return is_empty(node.init)&&(node.init=null),node}if(node instanceof AST_LabeledStatement&&node.body instanceof AST_For){if(descend(node,this),node.body instanceof AST_BlockStatement){block=node.body;return node.body=block.body.pop(),block.body.push(node),in_list?MAP.splice(block.body):block}return node}return node instanceof AST_Scope&&node!==self?node:void 0});self.transform(tt)}}),AST_Scope.DEFMETHOD("hoist_declarations",function(compressor){var self=this;if(compressor.has_directive("use asm"))return self;var hoist_funs=compressor.option("hoist_funs"),hoist_vars=compressor.option("hoist_vars");if(hoist_funs||hoist_vars){var dirs=[],hoisted=[],vars=new Dictionary,vars_found=0,var_decl=0;self.walk(new TreeWalker(function(node){return node instanceof AST_Scope&&node!==self||(node instanceof AST_Var?(++var_decl,!0):void 0)})),hoist_vars=hoist_vars&&1<var_decl;var tt=new TreeTransformer(function(node){if(node!==self){if(node instanceof AST_Directive)return dirs.push(node),make_node(AST_EmptyStatement,node);if(node instanceof AST_Defun&&hoist_funs)return hoisted.push(node),make_node(AST_EmptyStatement,node);if(node instanceof AST_Var&&hoist_vars){node.definitions.forEach(function(def){vars.set(def.name.name,def),++vars_found});var seq=node.to_assignments(compressor),p=tt.parent();if(p instanceof AST_ForIn&&p.init===node){if(null!=seq)return seq;var def=node.definitions[0].name;return make_node(AST_SymbolRef,def,def)}return p instanceof AST_For&&p.init===node?seq:seq?make_node(AST_SimpleStatement,node,{body:seq}):make_node(AST_EmptyStatement,node)}if(node instanceof AST_Scope)return node}});if(self=self.transform(tt),0<vars_found){var defs=[];if(vars.each(function(def,name){self instanceof AST_Lambda&&find_if(function(x){return x.name==def.name.name},self.argnames)?vars.del(name):((def=def.clone()).value=null,defs.push(def),vars.set(name,def))}),0<defs.length){for(var i=0;i<self.body.length;){if(self.body[i]instanceof AST_SimpleStatement){var sym,assign,expr=self.body[i].body;if(expr instanceof AST_Assign&&"="==expr.operator&&(sym=expr.left)instanceof AST_Symbol&&vars.has(sym.name)){if((def=vars.get(sym.name)).value)break;def.value=expr.right,remove(defs,def),defs.push(def),self.body.splice(i,1);continue}if(expr instanceof AST_Seq&&(assign=expr.car)instanceof AST_Assign&&"="==assign.operator&&(sym=assign.left)instanceof AST_Symbol&&vars.has(sym.name)){var def;if((def=vars.get(sym.name)).value)break;def.value=assign.right,remove(defs,def),defs.push(def),self.body[i].body=expr.cdr;continue}}if(self.body[i]instanceof AST_EmptyStatement)self.body.splice(i,1);else{if(!(self.body[i]instanceof AST_BlockStatement))break;var tmp=[i,1].concat(self.body[i].body);self.body.splice.apply(self.body,tmp)}}defs=make_node(AST_Var,self,{definitions:defs}),hoisted.push(defs)}}self.body=dirs.concat(hoisted,self.body)}return self}),function(def){function trim(nodes,compressor,first_in_statement){for(var ret=[],changed=!1,i=0,len=nodes.length;i<len;i++){var node=nodes[i].drop_side_effect_free(compressor,first_in_statement);changed|=node!==nodes[i],node&&(ret.push(node),first_in_statement=!1)}return changed?ret.length?ret:null:nodes}def(AST_Node,return_this),def(AST_Constant,return_null),def(AST_This,return_null),def(AST_Call,function(compressor,first_in_statement){if(!this.has_pure_annotation(compressor)&&compressor.pure_funcs(this)){if(!(this.expression instanceof AST_Function)||this.expression.name&&this.expression.name.definition().references.length)return this;var node=this.clone();return node.expression=node.expression.process_expression(!1,compressor),node}this.pure&&(compressor.warn("Dropping __PURE__ call [{file}:{line},{col}]",this.start),this.pure.value=this.pure.value.replace(/[@#]__PURE__/g," "));var args=trim(this.args,compressor,first_in_statement);return args&&AST_Seq.from_array(args)}),def(AST_Accessor,return_null),def(AST_Function,return_null),def(AST_Binary,function(compressor,first_in_statement){var right=this.right.drop_side_effect_free(compressor);if(!right)return this.left.drop_side_effect_free(compressor,first_in_statement);switch(this.operator){case"&&":case"||":if(right===this.right)return this;var node=this.clone();return node.right=right,node;default:var left=this.left.drop_side_effect_free(compressor,first_in_statement);return left?make_node(AST_Seq,this,{car:left,cdr:right}):this.right.drop_side_effect_free(compressor,first_in_statement)}}),def(AST_Assign,return_this),def(AST_Conditional,function(compressor){var consequent=this.consequent.drop_side_effect_free(compressor),alternative=this.alternative.drop_side_effect_free(compressor);if(consequent===this.consequent&&alternative===this.alternative)return this;if(!consequent)return alternative?make_node(AST_Binary,this,{operator:"||",left:this.condition,right:alternative}):this.condition.drop_side_effect_free(compressor);if(!alternative)return make_node(AST_Binary,this,{operator:"&&",left:this.condition,right:consequent});var node=this.clone();return node.consequent=consequent,node.alternative=alternative,node}),def(AST_Unary,function(compressor,first_in_statement){if(unary_side_effects(this.operator))return this;if("typeof"==this.operator&&this.expression instanceof AST_SymbolRef)return null;var expression=this.expression.drop_side_effect_free(compressor,first_in_statement);return first_in_statement&&this instanceof AST_UnaryPrefix&&is_iife_call(expression)?expression===this.expression&&1===this.operator.length?this:make_node(AST_UnaryPrefix,this,{operator:1===this.operator.length?this.operator:"!",expression:expression}):expression}),def(AST_SymbolRef,function(){return this.undeclared()?this:null}),def(AST_Object,function(compressor,first_in_statement){var values=trim(this.properties,compressor,first_in_statement);return values&&AST_Seq.from_array(values)}),def(AST_ObjectProperty,function(compressor,first_in_statement){return this.value.drop_side_effect_free(compressor,first_in_statement)}),def(AST_Array,function(compressor,first_in_statement){var values=trim(this.elements,compressor,first_in_statement);return values&&AST_Seq.from_array(values)}),def(AST_Dot,function(compressor,first_in_statement){return this.expression.may_throw_on_access(compressor)?this:this.expression.drop_side_effect_free(compressor,first_in_statement)}),def(AST_Sub,function(compressor,first_in_statement){if(this.expression.may_throw_on_access(compressor))return this;var expression=this.expression.drop_side_effect_free(compressor,first_in_statement);if(!expression)return this.property.drop_side_effect_free(compressor,first_in_statement);var property=this.property.drop_side_effect_free(compressor);return property?make_node(AST_Seq,this,{car:expression,cdr:property}):expression}),def(AST_Seq,function(compressor){var cdr=this.cdr.drop_side_effect_free(compressor);return cdr===this.cdr?this:cdr?make_node(AST_Seq,this,{car:this.car,cdr:cdr}):this.car})}(function(node,func){node.DEFMETHOD("drop_side_effect_free",func)}),OPT(AST_SimpleStatement,function(self,compressor){if(compressor.option("side_effects")){var body=self.body,node=body.drop_side_effect_free(compressor,!0);if(!node)return compressor.warn("Dropping side-effect-free statement [{file}:{line},{col}]",self.start),make_node(AST_EmptyStatement,self);if(node!==body)return make_node(AST_SimpleStatement,self,{body:node})}return self}),OPT(AST_DWLoop,function(self,compressor){if(!compressor.option("loops"))return self;var cond=self.condition.evaluate(compressor);if(cond!==self.condition){if(cond)return make_node(AST_For,self,{body:self.body});if(compressor.option("dead_code")&&self instanceof AST_While){var a=[];return extract_declarations_from_unreachable_code(compressor,self.body,a),make_node(AST_BlockStatement,self,{body:a}).optimize(compressor)}if(self instanceof AST_Do){var has_loop_control=!1,tw=new TreeWalker(function(node){return!!(node instanceof AST_Scope||has_loop_control)||(node instanceof AST_LoopControl&&tw.loopcontrol_target(node)===self?has_loop_control=!0:void 0)}),parent=compressor.parent();if((parent instanceof AST_LabeledStatement?parent:self).walk(tw),!has_loop_control)return self.body}}return self instanceof AST_While?make_node(AST_For,self,self).optimize(compressor):self}),OPT(AST_For,function(self,compressor){if(!compressor.option("loops"))return self;if(self.condition){var cond=self.condition.evaluate(compressor);if(compressor.option("dead_code")&&!cond){var a=[];return self.init instanceof AST_Statement?a.push(self.init):self.init&&a.push(make_node(AST_SimpleStatement,self.init,{body:self.init})),extract_declarations_from_unreachable_code(compressor,self.body,a),make_node(AST_BlockStatement,self,{body:a}).optimize(compressor)}cond!==self.condition&&(cond=make_node_from_constant(cond,self.condition).transform(compressor),self.condition=best_of_expression(cond,self.condition))}return function if_break_in_loop(self,compressor){function drop_it(rest){rest=as_statement_array(rest),self.body instanceof AST_BlockStatement?(self.body=self.body.clone(),self.body.body=rest.concat(self.body.body.slice(1)),self.body=self.body.transform(compressor)):self.body=make_node(AST_BlockStatement,self.body,{body:rest}).transform(compressor),if_break_in_loop(self,compressor)}var first=self.body instanceof AST_BlockStatement?self.body.body[0]:self.body;first instanceof AST_If&&(first.body instanceof AST_Break&&compressor.loopcontrol_target(first.body)===compressor.self()?(self.condition?self.condition=make_node(AST_Binary,self.condition,{left:self.condition,operator:"&&",right:first.condition.negate(compressor)}):self.condition=first.condition.negate(compressor),drop_it(first.alternative)):first.alternative instanceof AST_Break&&compressor.loopcontrol_target(first.alternative)===compressor.self()&&(self.condition?self.condition=make_node(AST_Binary,self.condition,{left:self.condition,operator:"&&",right:first.condition}):self.condition=first.condition,drop_it(first.body)))}(self,compressor),self}),OPT(AST_If,function(self,compressor){if(is_empty(self.alternative)&&(self.alternative=null),!compressor.option("conditionals"))return self;var cond=self.condition.evaluate(compressor);if(cond!==self.condition){if(cond){if(compressor.warn("Condition always true [{file}:{line},{col}]",self.condition.start),compressor.option("dead_code")){var a=[];return self.alternative&&extract_declarations_from_unreachable_code(compressor,self.alternative,a),a.push(self.body),make_node(AST_BlockStatement,self,{body:a}).optimize(compressor)}}else if(compressor.warn("Condition always false [{file}:{line},{col}]",self.condition.start),compressor.option("dead_code")){a=[];return extract_declarations_from_unreachable_code(compressor,self.body,a),self.alternative&&a.push(self.alternative),make_node(AST_BlockStatement,self,{body:a}).optimize(compressor)}cond=make_node_from_constant(cond,self.condition).transform(compressor),self.condition=best_of_expression(cond,self.condition)}var negated=self.condition.negate(compressor),self_condition_length=self.condition.print_to_string().length,negated_length=negated.print_to_string().length,negated_is_best=negated_length<self_condition_length;if(self.alternative&&negated_is_best){negated_is_best=!1,self.condition=negated;var tmp=self.body;self.body=self.alternative||make_node(AST_EmptyStatement,self),self.alternative=tmp}if(is_empty(self.body)&&is_empty(self.alternative))return make_node(AST_SimpleStatement,self.condition,{body:self.condition.clone()}).optimize(compressor);if(self.body instanceof AST_SimpleStatement&&self.alternative instanceof AST_SimpleStatement)return make_node(AST_SimpleStatement,self,{body:make_node(AST_Conditional,self,{condition:self.condition,consequent:self.body.body,alternative:self.alternative.body})}).optimize(compressor);if(is_empty(self.alternative)&&self.body instanceof AST_SimpleStatement)return self_condition_length===negated_length&&!negated_is_best&&self.condition instanceof AST_Binary&&"||"==self.condition.operator&&(negated_is_best=!0),negated_is_best?make_node(AST_SimpleStatement,self,{body:make_node(AST_Binary,self,{operator:"||",left:negated,right:self.body.body})}).optimize(compressor):make_node(AST_SimpleStatement,self,{body:make_node(AST_Binary,self,{operator:"&&",left:self.condition,right:self.body.body})}).optimize(compressor);if(self.body instanceof AST_EmptyStatement&&self.alternative instanceof AST_SimpleStatement)return make_node(AST_SimpleStatement,self,{body:make_node(AST_Binary,self,{operator:"||",left:self.condition,right:self.alternative.body})}).optimize(compressor);if(self.body instanceof AST_Exit&&self.alternative instanceof AST_Exit&&self.body.TYPE==self.alternative.TYPE)return make_node(self.body.CTOR,self,{value:make_node(AST_Conditional,self,{condition:self.condition,consequent:self.body.value||make_node(AST_Undefined,self.body),alternative:self.alternative.value||make_node(AST_Undefined,self.alternative)}).transform(compressor)}).optimize(compressor);if(self.body instanceof AST_If&&!self.body.alternative&&!self.alternative&&(self=make_node(AST_If,self,{condition:make_node(AST_Binary,self.condition,{operator:"&&",left:self.condition,right:self.body.condition}),body:self.body.body,alternative:null})),aborts(self.body)&&self.alternative){var alt=self.alternative;return self.alternative=null,make_node(AST_BlockStatement,self,{body:[self,alt]}).optimize(compressor)}if(aborts(self.alternative)){var body=self.body;return self.body=self.alternative,self.condition=negated_is_best?negated:self.condition.negate(compressor),self.alternative=null,make_node(AST_BlockStatement,self,{body:[self,body]}).optimize(compressor)}return self}),OPT(AST_Switch,function(self,compressor){if(!compressor.option("switches"))return self;var branch,value=self.expression.evaluate(compressor);if(value!==self.expression){var expression=make_node_from_constant(value,self.expression).transform(compressor);self.expression=best_of_expression(expression,self.expression)}if(!compressor.option("dead_code"))return self;for(var default_branch,exact_match,decl=[],body=[],i=0,len=self.body.length;i<len&&!exact_match;i++){if((branch=self.body[i])instanceof AST_Default)default_branch?eliminate_branch(branch,body[body.length-1]):default_branch=branch;else if(value!==self.expression){var exp=branch.expression.evaluate(compressor);if(exp===value){if(exact_match=branch,default_branch){var default_index=body.indexOf(default_branch);body.splice(default_index,1),eliminate_branch(default_branch,body[default_index-1]),default_branch=null}}else if(exp!==branch.expression){eliminate_branch(branch,body[body.length-1]);continue}}if(aborts(branch)){var prev=body[body.length-1];aborts(prev)&&prev.body.length==branch.body.length&&make_node(AST_BlockStatement,prev,prev).equivalent_to(make_node(AST_BlockStatement,branch,branch))&&(prev.body=[])}body.push(branch)}for(;i<len;)eliminate_branch(self.body[i++],body[body.length-1]);for(0<body.length&&(body[0].body=decl.concat(body[0].body)),self.body=body;branch=body[body.length-1];){var stat=branch.body[branch.body.length-1];if(stat instanceof AST_Break&&compressor.loopcontrol_target(stat)===self&&branch.body.pop(),branch.body.length||branch instanceof AST_Case&&(default_branch||branch.expression.has_side_effects(compressor)))break;body.pop()===default_branch&&(default_branch=null)}if(0==body.length)return make_node(AST_BlockStatement,self,{body:decl.concat(make_node(AST_SimpleStatement,self.expression,{body:self.expression}))}).optimize(compressor);if(1==body.length&&(body[0]===exact_match||body[0]===default_branch)){var has_break=!1,tw=new TreeWalker(function(node){if(has_break||node instanceof AST_Lambda||node instanceof AST_SimpleStatement)return!0;node instanceof AST_Break&&tw.loopcontrol_target(node)===self&&(has_break=!0)});if(self.walk(tw),!has_break)return(body=body[0].body.slice()).unshift(make_node(AST_SimpleStatement,self.expression,{body:self.expression})),make_node(AST_BlockStatement,self,{body:body}).optimize(compressor)}return self;function eliminate_branch(branch,prev){prev&&!aborts(prev)?prev.body=prev.body.concat(branch.body):extract_declarations_from_unreachable_code(compressor,branch,decl)}}),OPT(AST_Try,function(self,compressor){if(self.body=tighten_body(self.body,compressor),self.bcatch&&self.bfinally&&all(self.bfinally.body,is_empty)&&(self.bfinally=null),all(self.body,is_empty)){var body=[];return self.bcatch&&extract_declarations_from_unreachable_code(compressor,self.bcatch,body),self.bfinally&&(body=body.concat(self.bfinally.body)),make_node(AST_BlockStatement,self,{body:body}).optimize(compressor)}return self}),AST_Definitions.DEFMETHOD("remove_initializers",function(){this.definitions.forEach(function(def){def.value=null})}),AST_Definitions.DEFMETHOD("to_assignments",function(compressor){var reduce_vars=compressor.option("reduce_vars"),assignments=this.definitions.reduce(function(a,def){if(def.value){var name=make_node(AST_SymbolRef,def.name,def.name);a.push(make_node(AST_Assign,def,{operator:"=",left:name,right:def.value})),reduce_vars&&(name.definition().fixed=!1)}return a},[]);return 0==assignments.length?null:AST_Seq.from_array(assignments)}),OPT(AST_Definitions,function(self,compressor){return 0==self.definitions.length?make_node(AST_EmptyStatement,self):self}),OPT(AST_Call,function(self,compressor){var exp=self.expression;if(compressor.option("reduce_vars")&&exp instanceof AST_SymbolRef){var def=exp.definition(),fixed=exp.fixed_value();fixed instanceof AST_Defun&&(def.fixed=fixed=make_node(AST_Function,fixed,fixed).clone(!0)),fixed instanceof AST_Function&&(exp=fixed,!compressor.option("unused")||1!=def.references.length||def.scope.uses_arguments&&def.orig[0]instanceof AST_SymbolFunarg||def.scope.uses_eval||compressor.find_parent(AST_Scope)!==def.scope||(self.expression=exp))}if(compressor.option("unused")&&exp instanceof AST_Function&&!exp.uses_arguments&&!exp.uses_eval){for(var pos=0,last=0,i=0,len=self.args.length;i<len;i++){var trim=i>=exp.argnames.length;if(trim||exp.argnames[i].__unused){if(node=self.args[i].drop_side_effect_free(compressor))self.args[pos++]=node;else if(!trim){self.args[pos++]=make_node(AST_Number,self.args[i],{value:0});continue}}else self.args[pos++]=self.args[i];last=pos}self.args.length=last}if(compressor.option("unsafe"))if(exp instanceof AST_SymbolRef&&exp.undeclared())switch(exp.name){case"Array":if(1!=self.args.length)return make_node(AST_Array,self,{elements:self.args}).optimize(compressor);break;case"Object":if(0==self.args.length)return make_node(AST_Object,self,{properties:[]});break;case"String":if(0==self.args.length)return make_node(AST_String,self,{value:""});if(self.args.length<=1)return make_node(AST_Binary,self,{left:self.args[0],operator:"+",right:make_node(AST_String,self,{value:""})}).optimize(compressor);break;case"Number":if(0==self.args.length)return make_node(AST_Number,self,{value:0});if(1==self.args.length)return make_node(AST_UnaryPrefix,self,{expression:self.args[0],operator:"+"}).optimize(compressor);case"Boolean":if(0==self.args.length)return make_node(AST_False,self);if(1==self.args.length)return make_node(AST_UnaryPrefix,self,{expression:make_node(AST_UnaryPrefix,self,{expression:self.args[0],operator:"!"}),operator:"!"}).optimize(compressor);break;case"Function":if(0==self.args.length)return make_node(AST_Function,self,{argnames:[],body:[]});if(all(self.args,function(x){return x instanceof AST_String}))try{var ast=parse(code="(function("+self.args.slice(0,-1).map(function(arg){return arg.value}).join(",")+"){"+self.args[self.args.length-1].value+"})()");ast.figure_out_scope({screw_ie8:compressor.option("screw_ie8")});var fun,comp=new Compressor(compressor.options);(ast=ast.transform(comp)).figure_out_scope({screw_ie8:compressor.option("screw_ie8")}),ast.mangle_names();try{ast.walk(new TreeWalker(function(node){if(node instanceof AST_Lambda)throw fun=node,ast}))}catch(ex){if(ex!==ast)throw ex}if(!fun)return self;var args=fun.argnames.map(function(arg,i){return make_node(AST_String,self.args[i],{value:arg.print_to_string()})}),code=OutputStream();return AST_BlockStatement.prototype._codegen.call(fun,fun,code),code=code.toString().replace(/^\{|\}$/g,""),args.push(make_node(AST_String,self.args[self.args.length-1],{value:code})),self.args=args,self}catch(ex){if(!(ex instanceof JS_Parse_Error))throw console.log(ex),ex;compressor.warn("Error parsing code passed to new Function [{file}:{line},{col}]",self.args[self.args.length-1].start),compressor.warn(ex.toString())}}else{if(exp instanceof AST_Dot&&"toString"==exp.property&&0==self.args.length)return make_node(AST_Binary,self,{left:make_node(AST_String,self,{value:""}),operator:"+",right:exp.expression}).optimize(compressor);var separator;if(exp instanceof AST_Dot&&exp.expression instanceof AST_Array&&"join"==exp.property){if(!(0<self.args.length&&(separator=self.args[0].evaluate(compressor))===self.args[0])){var first,node,elements=[],consts=[];return(exp.expression.elements.forEach(function(el){var value=el.evaluate(compressor);value!==el?consts.push(value):(0<consts.length&&(elements.push(make_node(AST_String,self,{value:consts.join(separator)})),consts.length=0),elements.push(el))}),0<consts.length&&elements.push(make_node(AST_String,self,{value:consts.join(separator)})),0==elements.length)?make_node(AST_String,self,{value:""}):1==elements.length?elements[0].is_string(compressor)?elements[0]:make_node(AST_Binary,elements[0],{operator:"+",left:make_node(AST_String,self,{value:""}),right:elements[0]}):""==separator?(first=elements[0].is_string(compressor)||elements[1].is_string(compressor)?elements.shift():make_node(AST_String,self,{value:""}),elements.reduce(function(prev,el){return make_node(AST_Binary,el,{operator:"+",left:prev,right:el})},first).optimize(compressor)):((node=self.clone()).expression=node.expression.clone(),node.expression.expression=node.expression.expression.clone(),node.expression.expression.elements=elements,best_of(compressor,self,node))}}else if(exp instanceof AST_Dot&&exp.expression.is_string(compressor)&&"charAt"==exp.property){var arg=self.args[0],index=arg?arg.evaluate(compressor):0;if(index!==arg)return make_node(AST_Sub,exp,{expression:exp.expression,property:make_node_from_constant(0|index,arg||exp)}).optimize(compressor)}}if(exp instanceof AST_Function){if(exp.body[0]instanceof AST_Return){var value=exp.body[0].value;if(!value||value.is_constant()){args=self.args.concat(value||make_node(AST_Undefined,self));return AST_Seq.from_array(args).transform(compressor)}}if(compressor.option("side_effects")&&all(exp.body,is_empty)){args=self.args.concat(make_node(AST_Undefined,self));return AST_Seq.from_array(args).transform(compressor)}}if(compressor.option("drop_console")&&exp instanceof AST_PropAccess){for(var name=exp.expression;name.expression;)name=name.expression;if(name instanceof AST_SymbolRef&&"console"==name.name&&name.undeclared())return make_node(AST_Undefined,self).optimize(compressor)}return compressor.option("negate_iife")&&compressor.parent()instanceof AST_SimpleStatement&&is_iife_call(self)?self.negate(compressor,!0):self}),OPT(AST_New,function(self,compressor){if(compressor.option("unsafe")){var exp=self.expression;if(exp instanceof AST_SymbolRef&&exp.undeclared())switch(exp.name){case"Object":case"RegExp":case"Function":case"Error":case"Array":return make_node(AST_Call,self,self).transform(compressor)}}return self}),OPT(AST_Seq,function(self,compressor){if(!compressor.option("side_effects"))return self;if(self.car=self.car.drop_side_effect_free(compressor,first_in_statement(compressor)),!self.car)return maintain_this_binding(compressor.parent(),self,self.cdr);var left;if(compressor.option("cascade")&&(self.car instanceof AST_Assign&&!self.car.left.has_side_effects(compressor)?left=self.car.left:self.car instanceof AST_Unary&&("++"==self.car.operator||"--"==self.car.operator)&&(left=self.car.expression),left&&!(left instanceof AST_SymbolRef&&(left.definition().orig[0]instanceof AST_SymbolLambda||is_reference_const(left)))))for(var parent,field,cdr=self.cdr;;){if(cdr.equivalent_to(left)){var car=self.car instanceof AST_UnaryPostfix?make_node(AST_UnaryPrefix,self.car,{operator:self.car.operator,expression:left}):self.car;return parent?(parent[field]=car,self.cdr):car}if(cdr instanceof AST_Binary&&!(cdr instanceof AST_Assign))if(cdr.left.is_constant()){if("||"==cdr.operator||"&&"==cdr.operator)break;field="right"}else field="left";else{if(!(cdr instanceof AST_Call||cdr instanceof AST_Unary&&!unary_side_effects(cdr.operator)))break;field="expression"}cdr=(parent=cdr)[field]}return is_undefined(self.cdr,compressor)?make_node(AST_UnaryPrefix,self,{operator:"void",expression:self.car}):self}),AST_Unary.DEFMETHOD("lift_sequences",function(compressor){if(compressor.option("sequences")&&this.expression instanceof AST_Seq){var seq=this.expression,x=seq.to_array(),e=this.clone();return e.expression=x.pop(),x.push(e),seq=AST_Seq.from_array(x).transform(compressor)}return this}),OPT(AST_UnaryPostfix,function(self,compressor){return self.lift_sequences(compressor)}),OPT(AST_UnaryPrefix,function(self,compressor){var e=self.expression;if("delete"==self.operator&&!(e instanceof AST_SymbolRef||e instanceof AST_PropAccess||e instanceof AST_NaN||e instanceof AST_Infinity||e instanceof AST_Undefined))return e instanceof AST_Seq?((e=e.to_array()).push(make_node(AST_True,self)),AST_Seq.from_array(e).optimize(compressor)):make_node(AST_Seq,self,{car:e,cdr:make_node(AST_True,self)}).optimize(compressor);var seq=self.lift_sequences(compressor);if(seq!==self)return seq;if(compressor.option("side_effects")&&"void"==self.operator)return(e=e.drop_side_effect_free(compressor))?(self.expression=e,self):make_node(AST_Undefined,self).optimize(compressor);if(compressor.option("booleans")&&compressor.in_boolean_context())switch(self.operator){case"!":if(e instanceof AST_UnaryPrefix&&"!"==e.operator)return e.expression;e instanceof AST_Binary&&(self=best_of(compressor,self,e.negate(compressor,first_in_statement(compressor))));break;case"typeof":return compressor.warn("Boolean expression always true [{file}:{line},{col}]",self.start),(e instanceof AST_SymbolRef?make_node(AST_True,self):make_node(AST_Seq,self,{car:e,cdr:make_node(AST_True,self)})).optimize(compressor)}if("-"==self.operator&&e instanceof AST_Infinity&&(e=e.transform(compressor)),e instanceof AST_Binary&&("+"==self.operator||"-"==self.operator)&&("*"==e.operator||"/"==e.operator||"%"==e.operator))return make_node(AST_Binary,self,{operator:e.operator,left:make_node(AST_UnaryPrefix,e.left,{operator:self.operator,expression:e.left}),right:e.right});if("-"!=self.operator||!(e instanceof AST_Number||e instanceof AST_Infinity)){var ev=self.evaluate(compressor);if(ev!==self)return best_of(compressor,ev=make_node_from_constant(ev,self).optimize(compressor),self)}return self}),AST_Binary.DEFMETHOD("lift_sequences",function(compressor){if(compressor.option("sequences")){if(this.left instanceof AST_Seq){var x=(seq=this.left).to_array();return(e=this.clone()).left=x.pop(),x.push(e),AST_Seq.from_array(x).optimize(compressor)}if(this.right instanceof AST_Seq&&!this.left.has_side_effects(compressor)){for(var cursor,e,assign="="==this.operator&&this.left instanceof AST_SymbolRef,root=this.right.clone(),seq=root;(assign||!seq.car.has_side_effects(compressor))&&(cursor=seq).cdr instanceof AST_Seq;)seq=seq.cdr=seq.cdr.clone();if(cursor)return(e=this.clone()).right=cursor.cdr,cursor.cdr=e,root.optimize(compressor)}}return this});var commutativeOperators=makePredicate("== === != !== * & | ^");function is_atomic(lhs,self){return lhs instanceof AST_SymbolRef||lhs.TYPE===self.TYPE}OPT(AST_Binary,function(self,compressor){function reversible(){return self.left.is_constant()||self.right.is_constant()||!self.left.has_side_effects(compressor)&&!self.right.has_side_effects(compressor)}function reverse(op){if(reversible()){op&&(self.operator=op);var tmp=self.left;self.left=self.right,self.right=tmp}}if(commutativeOperators(self.operator)&&self.right.is_constant()&&!self.left.is_constant()&&(self.left instanceof AST_Binary&&PRECEDENCE[self.left.operator]>=PRECEDENCE[self.operator]||reverse()),self=self.lift_sequences(compressor),compressor.option("comparisons"))switch(self.operator){case"===":case"!==":(self.left.is_string(compressor)&&self.right.is_string(compressor)||self.left.is_number(compressor)&&self.right.is_number(compressor)||self.left.is_boolean()&&self.right.is_boolean())&&(self.operator=self.operator.substr(0,2));case"==":case"!=":if(self.left instanceof AST_String&&"undefined"==self.left.value&&self.right instanceof AST_UnaryPrefix&&"typeof"==self.right.operator){var expr=self.right.expression;(expr instanceof AST_SymbolRef?expr.undeclared():expr instanceof AST_PropAccess&&!compressor.option("screw_ie8"))||(self.right=expr,self.left=make_node(AST_Undefined,self.left).optimize(compressor),2==self.operator.length&&(self.operator+="="))}}if(compressor.option("booleans")&&"+"==self.operator&&compressor.in_boolean_context()){var ll=self.left.evaluate(compressor),rr=self.right.evaluate(compressor);if(ll&&"string"==typeof ll)return compressor.warn("+ in boolean context always true [{file}:{line},{col}]",self.start),make_node(AST_Seq,self,{car:self.right,cdr:make_node(AST_True,self)}).optimize(compressor);if(rr&&"string"==typeof rr)return compressor.warn("+ in boolean context always true [{file}:{line},{col}]",self.start),make_node(AST_Seq,self,{car:self.left,cdr:make_node(AST_True,self)}).optimize(compressor)}if(compressor.option("comparisons")&&self.is_boolean()){if(!(compressor.parent()instanceof AST_Binary)||compressor.parent()instanceof AST_Assign){var negated=make_node(AST_UnaryPrefix,self,{operator:"!",expression:self.negate(compressor,first_in_statement(compressor))});self=best_of(compressor,self,negated)}if(compressor.option("unsafe_comps"))switch(self.operator){case"<":reverse(">");break;case"<=":reverse(">=")}}if("+"==self.operator){if(self.right instanceof AST_String&&""==self.right.getValue()&&self.left.is_string(compressor))return self.left;if(self.left instanceof AST_String&&""==self.left.getValue()&&self.right.is_string(compressor))return self.right;if(self.left instanceof AST_Binary&&"+"==self.left.operator&&self.left.left instanceof AST_String&&""==self.left.left.getValue()&&self.right.is_string(compressor))return self.left=self.left.right,self.transform(compressor)}if(compressor.option("evaluate")){switch(self.operator){case"&&":if(!(ll=self.left.evaluate(compressor)))return compressor.warn("Condition left of && always false [{file}:{line},{col}]",self.start),maintain_this_binding(compressor.parent(),self,self.left).optimize(compressor);if(ll!==self.left)return compressor.warn("Condition left of && always true [{file}:{line},{col}]",self.start),maintain_this_binding(compressor.parent(),self,self.right).optimize(compressor);if(compressor.option("booleans")&&compressor.in_boolean_context()){if(!(rr=self.right.evaluate(compressor)))return compressor.warn("Boolean && always false [{file}:{line},{col}]",self.start),make_node(AST_Seq,self,{car:self.left,cdr:make_node(AST_False,self)}).optimize(compressor);if(rr!==self.right)return compressor.warn("Dropping side-effect-free && in boolean context [{file}:{line},{col}]",self.start),self.left.optimize(compressor)}break;case"||":if(!(ll=self.left.evaluate(compressor)))return compressor.warn("Condition left of || always false [{file}:{line},{col}]",self.start),maintain_this_binding(compressor.parent(),self,self.right).optimize(compressor);if(ll!==self.left)return compressor.warn("Condition left of || always true [{file}:{line},{col}]",self.start),maintain_this_binding(compressor.parent(),self,self.left).optimize(compressor);if(compressor.option("booleans")&&compressor.in_boolean_context()){if(!(rr=self.right.evaluate(compressor)))return compressor.warn("Dropping side-effect-free || in boolean context [{file}:{line},{col}]",self.start),self.left.optimize(compressor);if(rr!==self.right)return compressor.warn("Boolean || always true [{file}:{line},{col}]",self.start),make_node(AST_Seq,self,{car:self.left,cdr:make_node(AST_True,self)}).optimize(compressor)}}var associative=!0;switch(self.operator){case"+":if(self.left instanceof AST_Constant&&self.right instanceof AST_Binary&&"+"==self.right.operator&&self.right.left instanceof AST_Constant&&self.right.is_string(compressor)&&(self=make_node(AST_Binary,self,{operator:"+",left:make_node(AST_String,self.left,{value:""+self.left.getValue()+self.right.left.getValue(),start:self.left.start,end:self.right.left.end}),right:self.right.right})),self.right instanceof AST_Constant&&self.left instanceof AST_Binary&&"+"==self.left.operator&&self.left.right instanceof AST_Constant&&self.left.is_string(compressor)&&(self=make_node(AST_Binary,self,{operator:"+",left:self.left.left,right:make_node(AST_String,self.right,{value:""+self.left.right.getValue()+self.right.getValue(),start:self.left.right.start,end:self.right.end})})),self.left instanceof AST_Binary&&"+"==self.left.operator&&self.left.is_string(compressor)&&self.left.right instanceof AST_Constant&&self.right instanceof AST_Binary&&"+"==self.right.operator&&self.right.left instanceof AST_Constant&&self.right.is_string(compressor)&&(self=make_node(AST_Binary,self,{operator:"+",left:make_node(AST_Binary,self.left,{operator:"+",left:self.left.left,right:make_node(AST_String,self.left.right,{value:""+self.left.right.getValue()+self.right.left.getValue(),start:self.left.right.start,end:self.right.left.end})}),right:self.right.right})),self.right instanceof AST_UnaryPrefix&&"-"==self.right.operator&&self.left.is_number(compressor)){self=make_node(AST_Binary,self,{operator:"-",left:self.left,right:self.right.expression});break}if(self.left instanceof AST_UnaryPrefix&&"-"==self.left.operator&&reversible()&&self.right.is_number(compressor)){self=make_node(AST_Binary,self,{operator:"-",left:self.right,right:self.left.expression});break}case"*":associative=compressor.option("unsafe_math");case"&":case"|":case"^":if(self.left.is_number(compressor)&&self.right.is_number(compressor)&&reversible()&&!(self.left instanceof AST_Binary&&self.left.operator!=self.operator&&PRECEDENCE[self.left.operator]>=PRECEDENCE[self.operator])){var reversed=make_node(AST_Binary,self,{operator:self.operator,left:self.right,right:self.left});self=self.right instanceof AST_Constant&&!(self.left instanceof AST_Constant)?best_of(compressor,reversed,self):best_of(compressor,self,reversed)}associative&&self.is_number(compressor)&&(self.right instanceof AST_Binary&&self.right.operator==self.operator&&(self=make_node(AST_Binary,self,{operator:self.operator,left:make_node(AST_Binary,self.left,{operator:self.operator,left:self.left,right:self.right.left,start:self.left.start,end:self.right.left.end}),right:self.right.right})),self.right instanceof AST_Constant&&self.left instanceof AST_Binary&&self.left.operator==self.operator&&(self.left.left instanceof AST_Constant?self=make_node(AST_Binary,self,{operator:self.operator,left:make_node(AST_Binary,self.left,{operator:self.operator,left:self.left.left,right:self.right,start:self.left.left.start,end:self.right.end}),right:self.left.right}):self.left.right instanceof AST_Constant&&(self=make_node(AST_Binary,self,{operator:self.operator,left:make_node(AST_Binary,self.left,{operator:self.operator,left:self.left.right,right:self.right,start:self.left.right.start,end:self.right.end}),right:self.left.left}))),self.left instanceof AST_Binary&&self.left.operator==self.operator&&self.left.right instanceof AST_Constant&&self.right instanceof AST_Binary&&self.right.operator==self.operator&&self.right.left instanceof AST_Constant&&(self=make_node(AST_Binary,self,{operator:self.operator,left:make_node(AST_Binary,self.left,{operator:self.operator,left:make_node(AST_Binary,self.left.left,{operator:self.operator,left:self.left.right,right:self.right.left,start:self.left.right.start,end:self.right.left.end}),right:self.left.left}),right:self.right.right})))}}if(self.right instanceof AST_Binary&&self.right.operator==self.operator&&("&&"==self.operator||"||"==self.operator||"+"==self.operator&&(self.right.left.is_string(compressor)||self.left.is_string(compressor)&&self.right.right.is_string(compressor))))return self.left=make_node(AST_Binary,self.left,{operator:self.operator,left:self.left,right:self.right.left}),self.right=self.right.right,self.transform(compressor);var ev=self.evaluate(compressor);return ev!==self?(ev=make_node_from_constant(ev,self).optimize(compressor),best_of(compressor,ev,self)):self}),OPT(AST_SymbolRef,function(self,compressor){var def=self.resolve_defines(compressor);if(def)return def.optimize(compressor);if(compressor.option("screw_ie8")&&self.undeclared()&&(!self.scope.uses_with||!compressor.find_parent(AST_With)))switch(self.name){case"undefined":return make_node(AST_Undefined,self).optimize(compressor);case"NaN":return make_node(AST_NaN,self).optimize(compressor);case"Infinity":return make_node(AST_Infinity,self).optimize(compressor)}if(compressor.option("evaluate")&&compressor.option("reduce_vars")&&is_lhs(self,compressor.parent())!==self){var d=self.definition(),fixed=self.fixed_value();if(fixed){if(void 0===d.should_replace){var init=fixed.evaluate(compressor);if(init===fixed||!compressor.option("unsafe_regexp")&&init instanceof RegExp)d.should_replace=!1;else{var fn,value=(init=make_node_from_constant(init,fixed)).optimize(compressor).print_to_string().length;fn=function(value){var found;return value.walk(new TreeWalker(function(node){if(node instanceof AST_SymbolRef&&(found=!0),found)return!0})),found}(fixed)?function(){var result=init.optimize(compressor);return result===init?result.clone(!0):result}:(value=Math.min(value,fixed.print_to_string().length),function(){var result=best_of_expression(init.optimize(compressor),fixed);return result===init||result===fixed?result.clone(!0):result});var name=d.name.length,overhead=0;!compressor.option("unused")||d.global&&!compressor.option("toplevel")||(overhead=(name+2+value)/d.references.length),d.should_replace=value<=name+overhead&&fn}}if(d.should_replace)return d.should_replace()}}return self}),OPT(AST_Undefined,function(self,compressor){if(compressor.option("unsafe")){var undef=find_variable(compressor,"undefined");if(undef){var ref=make_node(AST_SymbolRef,self,{name:"undefined",scope:undef.scope,thedef:undef});return ref.is_undefined=!0,ref}}var lhs=is_lhs(compressor.self(),compressor.parent());return lhs&&is_atomic(lhs,self)?self:make_node(AST_UnaryPrefix,self,{operator:"void",expression:make_node(AST_Number,self,{value:0})})}),OPT(AST_Infinity,function(self,compressor){var lhs=is_lhs(compressor.self(),compressor.parent());return(!lhs||!is_atomic(lhs,self))&&(!compressor.option("keep_infinity")||lhs&&!is_atomic(lhs,self)||find_variable(compressor,"Infinity"))?make_node(AST_Binary,self,{operator:"/",left:make_node(AST_Number,self,{value:1}),right:make_node(AST_Number,self,{value:0})}):self}),OPT(AST_NaN,function(self,compressor){var lhs=is_lhs(compressor.self(),compressor.parent());return lhs&&!is_atomic(lhs,self)||find_variable(compressor,"NaN")?make_node(AST_Binary,self,{operator:"/",left:make_node(AST_Number,self,{value:0}),right:make_node(AST_Number,self,{value:0})}):self});var ASSIGN_OPS=["+","-","/","*","%",">>","<<",">>>","|","^","&"],ASSIGN_OPS_COMMUTATIVE=["*","|","^","&"];function literals_in_boolean_context(self,compressor){return compressor.option("booleans")&&compressor.in_boolean_context()?best_of(compressor,self,make_node(AST_Seq,self,{car:self,cdr:make_node(AST_True,self)}).optimize(compressor)):self}OPT(AST_Assign,function(self,compressor){return"="==(self=self.lift_sequences(compressor)).operator&&self.left instanceof AST_SymbolRef&&self.right instanceof AST_Binary&&(self.right.left instanceof AST_SymbolRef&&self.right.left.name==self.left.name&&member(self.right.operator,ASSIGN_OPS)?(self.operator=self.right.operator+"=",self.right=self.right.right):self.right.right instanceof AST_SymbolRef&&self.right.right.name==self.left.name&&member(self.right.operator,ASSIGN_OPS_COMMUTATIVE)&&!self.right.left.has_side_effects(compressor)&&(self.operator=self.right.operator+"=",self.right=self.right.left)),self}),OPT(AST_Conditional,function(self,compressor){if(!compressor.option("conditionals"))return self;if(self.condition instanceof AST_Seq){var car=self.condition.car;return self.condition=self.condition.cdr,AST_Seq.cons(car,self)}var cond=self.condition.evaluate(compressor);if(cond!==self.condition)return cond?(compressor.warn("Condition always true [{file}:{line},{col}]",self.start),maintain_this_binding(compressor.parent(),self,self.consequent)):(compressor.warn("Condition always false [{file}:{line},{col}]",self.start),maintain_this_binding(compressor.parent(),self,self.alternative));var negated=cond.negate(compressor,first_in_statement(compressor));best_of(compressor,cond,negated)===negated&&(self=make_node(AST_Conditional,self,{condition:negated,consequent:self.alternative,alternative:self.consequent}));var condition=self.condition,consequent=self.consequent,alternative=self.alternative;return condition instanceof AST_SymbolRef&&consequent instanceof AST_SymbolRef&&condition.definition()===consequent.definition()?make_node(AST_Binary,self,{operator:"||",left:condition,right:alternative}):consequent instanceof AST_Assign&&alternative instanceof AST_Assign&&consequent.operator==alternative.operator&&consequent.left.equivalent_to(alternative.left)&&(!self.condition.has_side_effects(compressor)||"="==consequent.operator&&!consequent.left.has_side_effects(compressor))?make_node(AST_Assign,self,{operator:consequent.operator,left:consequent.left,right:make_node(AST_Conditional,self,{condition:self.condition,consequent:consequent.right,alternative:alternative.right})}):consequent instanceof AST_Call&&alternative.TYPE===consequent.TYPE&&1==consequent.args.length&&1==alternative.args.length&&consequent.expression.equivalent_to(alternative.expression)&&!consequent.expression.has_side_effects(compressor)?(consequent.args[0]=make_node(AST_Conditional,self,{condition:self.condition,consequent:consequent.args[0],alternative:alternative.args[0]}),consequent):consequent instanceof AST_Conditional&&consequent.alternative.equivalent_to(alternative)?make_node(AST_Conditional,self,{condition:make_node(AST_Binary,self,{left:self.condition,operator:"&&",right:consequent.condition}),consequent:consequent.consequent,alternative:alternative}):consequent.equivalent_to(alternative)?make_node(AST_Seq,self,{car:self.condition,cdr:consequent}).optimize(compressor):is_true(self.consequent)?is_false(self.alternative)?booleanize(self.condition):make_node(AST_Binary,self,{operator:"||",left:booleanize(self.condition),right:self.alternative}):is_false(self.consequent)?is_true(self.alternative)?booleanize(self.condition.negate(compressor)):make_node(AST_Binary,self,{operator:"&&",left:booleanize(self.condition.negate(compressor)),right:self.alternative}):is_true(self.alternative)?make_node(AST_Binary,self,{operator:"||",left:booleanize(self.condition.negate(compressor)),right:self.consequent}):is_false(self.alternative)?make_node(AST_Binary,self,{operator:"&&",left:booleanize(self.condition),right:self.consequent}):self;function booleanize(node){return node.is_boolean()?node:make_node(AST_UnaryPrefix,node,{operator:"!",expression:node.negate(compressor)})}function is_true(node){return node instanceof AST_True||node instanceof AST_UnaryPrefix&&"!"==node.operator&&node.expression instanceof AST_Constant&&!node.expression.value}function is_false(node){return node instanceof AST_False||node instanceof AST_UnaryPrefix&&"!"==node.operator&&node.expression instanceof AST_Constant&&node.expression.value}}),OPT(AST_Boolean,function(self,compressor){if(compressor.option("booleans")){var p=compressor.parent();return p instanceof AST_Binary&&("=="==p.operator||"!="==p.operator)?(compressor.warn("Non-strict equality against boolean: {operator} {value} [{file}:{line},{col}]",{operator:p.operator,value:self.value,file:p.start.file,line:p.start.line,col:p.start.col}),make_node(AST_Number,self,{value:+self.value})):make_node(AST_UnaryPrefix,self,{operator:"!",expression:make_node(AST_Number,self,{value:1-self.value})})}return self}),OPT(AST_Sub,function(self,compressor){var prop=self.property;if(prop instanceof AST_String&&compressor.option("properties")){if(prop=prop.getValue(),RESERVED_WORDS(prop)?compressor.option("screw_ie8"):is_identifier_string(prop))return make_node(AST_Dot,self,{expression:self.expression,property:prop}).optimize(compressor);var v=parseFloat(prop);isNaN(v)||v.toString()!=prop||(self.property=make_node(AST_Number,self.property,{value:v}))}var ev=self.evaluate(compressor);return ev!==self?best_of(compressor,ev=make_node_from_constant(ev,self).optimize(compressor),self):self}),OPT(AST_Dot,function(self,compressor){var def=self.resolve_defines(compressor);if(def)return def.optimize(compressor);var prop=self.property;if(RESERVED_WORDS(prop)&&!compressor.option("screw_ie8"))return make_node(AST_Sub,self,{expression:self.expression,property:make_node(AST_String,self,{value:prop})}).optimize(compressor);if(compressor.option("unsafe_proto")&&self.expression instanceof AST_Dot&&"prototype"==self.expression.property){var exp=self.expression.expression;if(exp instanceof AST_SymbolRef&&exp.undeclared())switch(exp.name){case"Array":self.expression=make_node(AST_Array,self.expression,{elements:[]});break;case"Object":self.expression=make_node(AST_Object,self.expression,{properties:[]});break;case"String":self.expression=make_node(AST_String,self.expression,{value:""})}}var ev=self.evaluate(compressor);return ev!==self?best_of(compressor,ev=make_node_from_constant(ev,self).optimize(compressor),self):self}),OPT(AST_Array,literals_in_boolean_context),OPT(AST_Object,literals_in_boolean_context),OPT(AST_RegExp,literals_in_boolean_context),OPT(AST_Return,function(self,compressor){return self.value&&is_undefined(self.value,compressor)&&(self.value=null),self}),OPT(AST_VarDef,function(self,compressor){var defines=compressor.option("global_defs");return defines&&HOP(defines,self.name.name)&&compressor.warn("global_defs "+self.name.name+" redefined [{file}:{line},{col}]",self.start),self})}(),function(){function normalize_directives(body){for(var in_directive=!0,i=0;i<body.length;i++)in_directive&&body[i]instanceof AST_Statement&&body[i].body instanceof AST_String?body[i]=new AST_Directive({start:body[i].start,end:body[i].end,value:body[i].body.value}):!in_directive||body[i]instanceof AST_Statement&&body[i].body instanceof AST_String||(in_directive=!1);return body}var MOZ_TO_ME={Program:function(M){return new AST_Toplevel({start:my_start_token(M),end:my_end_token(M),body:normalize_directives(M.body.map(from_moz))})},FunctionDeclaration:function(M){return new AST_Defun({start:my_start_token(M),end:my_end_token(M),name:from_moz(M.id),argnames:M.params.map(from_moz),body:normalize_directives(from_moz(M.body).body)})},FunctionExpression:function(M){return new AST_Function({start:my_start_token(M),end:my_end_token(M),name:from_moz(M.id),argnames:M.params.map(from_moz),body:normalize_directives(from_moz(M.body).body)})},ExpressionStatement:function(M){return new AST_SimpleStatement({start:my_start_token(M),end:my_end_token(M),body:from_moz(M.expression)})},TryStatement:function(M){var handlers=M.handlers||[M.handler];if(1<handlers.length||M.guardedHandlers&&M.guardedHandlers.length)throw new Error("Multiple catch clauses are not supported.");return new AST_Try({start:my_start_token(M),end:my_end_token(M),body:from_moz(M.block).body,bcatch:from_moz(handlers[0]),bfinally:M.finalizer?new AST_Finally(from_moz(M.finalizer)):null})},Property:function(M){var key=M.key,args={start:my_start_token(key),end:my_end_token(M.value),key:"Identifier"==key.type?key.name:key.value,value:from_moz(M.value)};return"init"==M.kind?new AST_ObjectKeyVal(args):(args.key=new AST_SymbolAccessor({name:args.key}),args.value=new AST_Accessor(args.value),"get"==M.kind?new AST_ObjectGetter(args):"set"==M.kind?new AST_ObjectSetter(args):void 0)},ArrayExpression:function(M){return new AST_Array({start:my_start_token(M),end:my_end_token(M),elements:M.elements.map(function(elem){return null===elem?new AST_Hole:from_moz(elem)})})},ObjectExpression:function(M){return new AST_Object({start:my_start_token(M),end:my_end_token(M),properties:M.properties.map(function(prop){return prop.type="Property",from_moz(prop)})})},SequenceExpression:function(M){return AST_Seq.from_array(M.expressions.map(from_moz))},MemberExpression:function(M){return new(M.computed?AST_Sub:AST_Dot)({start:my_start_token(M),end:my_end_token(M),property:M.computed?from_moz(M.property):M.property.name,expression:from_moz(M.object)})},SwitchCase:function(M){return new(M.test?AST_Case:AST_Default)({start:my_start_token(M),end:my_end_token(M),expression:from_moz(M.test),body:M.consequent.map(from_moz)})},VariableDeclaration:function(M){return new("const"===M.kind?AST_Const:AST_Var)({start:my_start_token(M),end:my_end_token(M),definitions:M.declarations.map(from_moz)})},Literal:function(M){var val=M.value,args={start:my_start_token(M),end:my_end_token(M)};if(null===val)return new AST_Null(args);switch(typeof val){case"string":return args.value=val,new AST_String(args);case"number":return args.value=val,new AST_Number(args);case"boolean":return new(val?AST_True:AST_False)(args);default:var rx=M.regex;return rx&&rx.pattern?args.value=new RegExp(rx.pattern,rx.flags).toString():args.value=M.regex&&M.raw?M.raw:val,new AST_RegExp(args)}},Identifier:function(M){var p=FROM_MOZ_STACK[FROM_MOZ_STACK.length-2];return new("LabeledStatement"==p.type?AST_Label:"VariableDeclarator"==p.type&&p.id===M?"const"==p.kind?AST_SymbolConst:AST_SymbolVar:"FunctionExpression"==p.type?p.id===M?AST_SymbolLambda:AST_SymbolFunarg:"FunctionDeclaration"==p.type?p.id===M?AST_SymbolDefun:AST_SymbolFunarg:"CatchClause"==p.type?AST_SymbolCatch:"BreakStatement"==p.type||"ContinueStatement"==p.type?AST_LabelRef:AST_SymbolRef)({start:my_start_token(M),end:my_end_token(M),name:M.name})}};function raw_token(moznode){if("Literal"==moznode.type)return null!=moznode.raw?moznode.raw:moznode.value+""}function my_start_token(moznode){var loc=moznode.loc,start=loc&&loc.start,range=moznode.range;return new AST_Token({file:loc&&loc.source,line:start&&start.line,col:start&&start.column,pos:range?range[0]:moznode.start,endline:start&&start.line,endcol:start&&start.column,endpos:range?range[0]:moznode.start,raw:raw_token(moznode)})}function my_end_token(moznode){var loc=moznode.loc,end=loc&&loc.end,range=moznode.range;return new AST_Token({file:loc&&loc.source,line:end&&end.line,col:end&&end.column,pos:range?range[1]:moznode.end,endline:end&&end.line,endcol:end&&end.column,endpos:range?range[1]:moznode.end,raw:raw_token(moznode)})}function map(moztype,mytype,propmap){var moz_to_me="function From_Moz_"+moztype+"(M){\n";moz_to_me+="return new U2."+mytype.name+"({\nstart: my_start_token(M),\nend: my_end_token(M)";var me_to_moz="function To_Moz_"+moztype+"(M){\n";me_to_moz+="return {\ntype: "+JSON.stringify(moztype),propmap&&propmap.split(/\s*,\s*/).forEach(function(prop){var m=/([a-z0-9$_]+)(=|@|>|%)([a-z0-9$_]+)/i.exec(prop);if(!m)throw new Error("Can't understand property map: "+prop);var moz=m[1],how=m[2],my=m[3];switch(moz_to_me+=",\n"+my+": ",me_to_moz+=",\n"+moz+": ",how){case"@":moz_to_me+="M."+moz+".map(from_moz)",me_to_moz+="M."+my+".map(to_moz)";break;case">":moz_to_me+="from_moz(M."+moz+")",me_to_moz+="to_moz(M."+my+")";break;case"=":moz_to_me+="M."+moz,me_to_moz+="M."+my;break;case"%":moz_to_me+="from_moz(M."+moz+").body",me_to_moz+="to_moz_block(M)";break;default:throw new Error("Can't understand operator in propmap: "+prop)}}),moz_to_me+="\n})\n}",me_to_moz+="\n}\n}",moz_to_me=new Function("U2","my_start_token","my_end_token","from_moz","return("+moz_to_me+")")(exports,my_start_token,my_end_token,from_moz),me_to_moz=new Function("to_moz","to_moz_block","to_moz_scope","return("+me_to_moz+")")(to_moz,to_moz_block,to_moz_scope),MOZ_TO_ME[moztype]=moz_to_me,def_to_moz(mytype,me_to_moz)}MOZ_TO_ME.UpdateExpression=MOZ_TO_ME.UnaryExpression=function(M){return new(("prefix"in M?M.prefix:"UnaryExpression"==M.type)?AST_UnaryPrefix:AST_UnaryPostfix)({start:my_start_token(M),end:my_end_token(M),operator:M.operator,expression:from_moz(M.argument)})},map("EmptyStatement",AST_EmptyStatement),map("BlockStatement",AST_BlockStatement,"body@body"),map("IfStatement",AST_If,"test>condition, consequent>body, alternate>alternative"),map("LabeledStatement",AST_LabeledStatement,"label>label, body>body"),map("BreakStatement",AST_Break,"label>label"),map("ContinueStatement",AST_Continue,"label>label"),map("WithStatement",AST_With,"object>expression, body>body"),map("SwitchStatement",AST_Switch,"discriminant>expression, cases@body"),map("ReturnStatement",AST_Return,"argument>value"),map("ThrowStatement",AST_Throw,"argument>value"),map("WhileStatement",AST_While,"test>condition, body>body"),map("DoWhileStatement",AST_Do,"test>condition, body>body"),map("ForStatement",AST_For,"init>init, test>condition, update>step, body>body"),map("ForInStatement",AST_ForIn,"left>init, right>object, body>body"),map("DebuggerStatement",AST_Debugger),map("VariableDeclarator",AST_VarDef,"id>name, init>value"),map("CatchClause",AST_Catch,"param>argname, body%body"),map("ThisExpression",AST_This),map("BinaryExpression",AST_Binary,"operator=operator, left>left, right>right"),map("LogicalExpression",AST_Binary,"operator=operator, left>left, right>right"),map("AssignmentExpression",AST_Assign,"operator=operator, left>left, right>right"),map("ConditionalExpression",AST_Conditional,"test>condition, consequent>consequent, alternate>alternative"),map("NewExpression",AST_New,"callee>expression, arguments@args"),map("CallExpression",AST_Call,"callee>expression, arguments@args"),def_to_moz(AST_Toplevel,function(M){return to_moz_scope("Program",M)}),def_to_moz(AST_Defun,function(M){return{type:"FunctionDeclaration",id:to_moz(M.name),params:M.argnames.map(to_moz),body:to_moz_scope("BlockStatement",M)}}),def_to_moz(AST_Function,function(M){return{type:"FunctionExpression",id:to_moz(M.name),params:M.argnames.map(to_moz),body:to_moz_scope("BlockStatement",M)}}),def_to_moz(AST_Directive,function(M){return{type:"ExpressionStatement",expression:{type:"Literal",value:M.value}}}),def_to_moz(AST_SimpleStatement,function(M){return{type:"ExpressionStatement",expression:to_moz(M.body)}}),def_to_moz(AST_SwitchBranch,function(M){return{type:"SwitchCase",test:to_moz(M.expression),consequent:M.body.map(to_moz)}}),def_to_moz(AST_Try,function(M){return{type:"TryStatement",block:to_moz_block(M),handler:to_moz(M.bcatch),guardedHandlers:[],finalizer:to_moz(M.bfinally)}}),def_to_moz(AST_Catch,function(M){return{type:"CatchClause",param:to_moz(M.argname),guard:null,body:to_moz_block(M)}}),def_to_moz(AST_Definitions,function(M){return{type:"VariableDeclaration",kind:M instanceof AST_Const?"const":"var",declarations:M.definitions.map(to_moz)}}),def_to_moz(AST_Seq,function(M){return{type:"SequenceExpression",expressions:M.to_array().map(to_moz)}}),def_to_moz(AST_PropAccess,function(M){var isComputed=M instanceof AST_Sub;return{type:"MemberExpression",object:to_moz(M.expression),computed:isComputed,property:isComputed?to_moz(M.property):{type:"Identifier",name:M.property}}}),def_to_moz(AST_Unary,function(M){return{type:"++"==M.operator||"--"==M.operator?"UpdateExpression":"UnaryExpression",operator:M.operator,prefix:M instanceof AST_UnaryPrefix,argument:to_moz(M.expression)}}),def_to_moz(AST_Binary,function(M){return{type:"&&"==M.operator||"||"==M.operator?"LogicalExpression":"BinaryExpression",left:to_moz(M.left),operator:M.operator,right:to_moz(M.right)}}),def_to_moz(AST_Array,function(M){return{type:"ArrayExpression",elements:M.elements.map(to_moz)}}),def_to_moz(AST_Object,function(M){return{type:"ObjectExpression",properties:M.properties.map(to_moz)}}),def_to_moz(AST_ObjectProperty,function(M){var kind,key={type:"Literal",value:M.key instanceof AST_SymbolAccessor?M.key.name:M.key};return M instanceof AST_ObjectKeyVal?kind="init":M instanceof AST_ObjectGetter?kind="get":M instanceof AST_ObjectSetter&&(kind="set"),{type:"Property",kind:kind,key:key,value:to_moz(M.value)}}),def_to_moz(AST_Symbol,function(M){var def=M.definition();return{type:"Identifier",name:def?def.mangled_name||def.name:M.name}}),def_to_moz(AST_RegExp,function(M){var value=M.value;return{type:"Literal",value:value,raw:value.toString(),regex:{pattern:value.source,flags:value.toString().match(/[gimuy]*$/)[0]}}}),def_to_moz(AST_Constant,function(M){var value=M.value;return"number"==typeof value&&(value<0||0===value&&1/value<0)?{type:"UnaryExpression",operator:"-",prefix:!0,argument:{type:"Literal",value:-value,raw:M.start.raw}}:{type:"Literal",value:value,raw:M.start.raw}}),def_to_moz(AST_Atom,function(M){return{type:"Identifier",name:String(M.value)}}),AST_Boolean.DEFMETHOD("to_mozilla_ast",AST_Constant.prototype.to_mozilla_ast),AST_Null.DEFMETHOD("to_mozilla_ast",AST_Constant.prototype.to_mozilla_ast),AST_Hole.DEFMETHOD("to_mozilla_ast",function(){return null}),AST_Block.DEFMETHOD("to_mozilla_ast",AST_BlockStatement.prototype.to_mozilla_ast),AST_Lambda.DEFMETHOD("to_mozilla_ast",AST_Function.prototype.to_mozilla_ast);var FROM_MOZ_STACK=null;function from_moz(node){FROM_MOZ_STACK.push(node);var ret=null!=node?MOZ_TO_ME[node.type](node):null;return FROM_MOZ_STACK.pop(),ret}function def_to_moz(mytype,handler){mytype.DEFMETHOD("to_mozilla_ast",function(){return moznode=handler(mynode=this),start=mynode.start,end=mynode.end,null!=start.pos&&null!=end.endpos&&(moznode.range=[start.pos,end.endpos]),start.line&&(moznode.loc={start:{line:start.line,column:start.col},end:end.endline?{line:end.endline,column:end.endcol}:null},start.file&&(moznode.loc.source=start.file)),moznode;var mynode,moznode,start,end})}function to_moz(node){return null!=node?node.to_mozilla_ast():null}function to_moz_block(node){return{type:"BlockStatement",body:node.body.map(to_moz)}}function to_moz_scope(type,node){var body=node.body.map(to_moz);return node.body[0]instanceof AST_SimpleStatement&&node.body[0].body instanceof AST_String&&body.unshift(to_moz(new AST_EmptyStatement(node.body[0]))),{type:type,body:body}}AST_Node.from_mozilla_ast=function(node){var save_stack=FROM_MOZ_STACK;FROM_MOZ_STACK=[];var ast=from_moz(node);return FROM_MOZ_STACK=save_stack,ast}}(),exports.Compressor=Compressor,exports.DefaultsError=DefaultsError,exports.Dictionary=Dictionary,exports.JS_Parse_Error=JS_Parse_Error,exports.MAP=MAP,exports.OutputStream=OutputStream,exports.SourceMap=function(options){options=defaults(options,{file:null,root:null,orig:null,orig_line_diff:0,dest_line_diff:0});var generator=new MOZ_SourceMap.SourceMapGenerator({file:options.file,sourceRoot:options.root}),orig_map=options.orig&&new MOZ_SourceMap.SourceMapConsumer(options.orig);return orig_map&&Array.isArray(options.orig.sources)&&orig_map._sources.toArray().forEach(function(source){var sourceContent=orig_map.sourceContentFor(source,!0);sourceContent&&generator.setSourceContent(source,sourceContent)}),{add:function(source,gen_line,gen_col,orig_line,orig_col,name){if(orig_map){var info=orig_map.originalPositionFor({line:orig_line,column:orig_col});if(null===info.source)return;source=info.source,orig_line=info.line,orig_col=info.column,name=info.name||name}generator.addMapping({generated:{line:gen_line+options.dest_line_diff,column:gen_col},original:{line:orig_line+options.orig_line_diff,column:orig_col},source:source,name:name})},get:function(){return generator},toString:function(){return JSON.stringify(generator.toJSON())}}},exports.TreeTransformer=TreeTransformer,exports.TreeWalker=TreeWalker,exports.base54=base54,exports.defaults=defaults,exports.mangle_properties=function(ast,options){var reserved=(options=defaults(options,{cache:null,debug:!1,ignore_quoted:!1,only_cache:!1,regex:null,reserved:null})).reserved;null==reserved&&(reserved=function(){var a=["null","true","false","Infinity","-Infinity","undefined"];function add(name){push_uniq(a,name)}return[Object,Array,Function,Number,String,Boolean,Error,Math,Date,RegExp].forEach(function(ctor){Object.getOwnPropertyNames(ctor).map(add),ctor.prototype&&Object.getOwnPropertyNames(ctor.prototype).map(add)}),a}());var cache=options.cache;null==cache&&(cache={cname:-1,props:new Dictionary});var debug_name_suffix,regex=options.regex,ignore_quoted=options.ignore_quoted,debug=!1!==options.debug;debug&&(debug_name_suffix=!0===options.debug?"":options.debug);var names_to_mangle=[],unmangleable=[],ignored={};return ast.walk(new TreeWalker(function(node){node instanceof AST_ObjectKeyVal?add(node.key,ignore_quoted&&node.quote):node instanceof AST_ObjectProperty?add(node.key.name):node instanceof AST_Dot?add(node.property):node instanceof AST_Sub&&function(node,ignore){var out={};try{!function walk(node){node.walk(new TreeWalker(function(node){if(node instanceof AST_Seq)return walk(node.cdr),!0;if(node instanceof AST_String)return add(node.value,ignore),!0;if(node instanceof AST_Conditional)return walk(node.consequent),walk(node.alternative),!0;throw out}))}(node)}catch(ex){if(ex!==out)throw ex}}(node.property,ignore_quoted)})),ast.transform(new TreeTransformer(function(node){node instanceof AST_ObjectKeyVal?ignore_quoted&&node.quote||(node.key=mangle(node.key)):node instanceof AST_ObjectProperty?node.key.name=mangle(node.key.name):node instanceof AST_Dot?node.property=mangle(node.property):node instanceof AST_Sub&&(ignore_quoted||(node.property=function mangleStrings(node){return node.transform(new TreeTransformer(function(node){return node instanceof AST_Seq?node.cdr=mangleStrings(node.cdr):node instanceof AST_String?node.value=mangle(node.value):node instanceof AST_Conditional&&(node.consequent=mangleStrings(node.consequent),node.alternative=mangleStrings(node.alternative)),node}))}(node.property)))}));function can_mangle(name){if(!(0<=unmangleable.indexOf(name)||0<=reserved.indexOf(name))){if(options.only_cache)return cache.props.has(name);if(!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(name))return 1}}function should_mangle(name){return!(ignore_quoted&&name in ignored||regex&&!regex.test(name)||0<=reserved.indexOf(name))&&(cache.props.has(name)||0<=names_to_mangle.indexOf(name))}function add(name,ignore){ignore?ignored[name]=!0:(can_mangle(name)&&push_uniq(names_to_mangle,name),should_mangle(name)||push_uniq(unmangleable,name))}function mangle(name){if(!should_mangle(name))return name;var mangled=cache.props.get(name);if(!mangled){if(debug){var debug_mangled="_$"+name+"$"+debug_name_suffix+"_";!can_mangle(debug_mangled)||ignore_quoted&&debug_mangled in ignored||(mangled=debug_mangled)}if(!mangled)for(;!can_mangle(mangled=base54(++cache.cname))||ignore_quoted&&mangled in ignored;);cache.props.set(name,mangled)}return mangled}},exports.merge=merge,exports.parse=parse,exports.push_uniq=push_uniq,exports.string_template=string_template,exports.tokenizer=tokenizer,exports.is_identifier=is_identifier,exports.SymbolDef=SymbolDef,AST_Node.warn_function=function(txt){logger.error("uglifyjs WARN: "+txt)},exports.AST_Node.warn_function=function(txt){console.error("WARN: %s",txt)},exports.minify=function(files,options,name){options=exports.defaults(options,{compress:{},fromString:!1,inSourceMap:null,mangle:{},mangleProperties:!1,nameCache:null,outFileName:null,output:null,outSourceMap:null,parse:{},sourceMapInline:!1,sourceMapUrl:null,sourceRoot:null,spidermonkey:!1,warnings:!1}),exports.base54.reset();var inMap=options.inSourceMap;"string"==typeof inMap&&"inline"!=inMap&&(inMap=JSON.parse(rjsFile.readFile(inMap,"utf8")));var toplevel=null,sourcesContent={};if(options.spidermonkey){if("inline"==inMap)throw new Error("inline source map only works with built-in parser");toplevel=exports.AST_Node.from_mozilla_ast(files)}else{var addFile=function(file,fileUrl){var code=options.fromString?file:rjsFile.readFile(file,"utf8");"inline"==inMap&&(inMap=function(code){var match=/\n\/\/# sourceMappingURL=data:application\/json(;.*?)?;base64,(.*)/.exec(code);return match?JSON.parse(new Buffer(match[2],"base64")):(exports.AST_Node.warn("inline source map not found"),null)}(code)),sourcesContent[fileUrl]=code,toplevel=exports.parse(code,{filename:fileUrl,toplevel:toplevel,bare_returns:options.parse?options.parse.bare_returns:void 0})};if(!options.fromString&&(files=exports.simple_glob(files),"inline"==inMap&&1<files.length))throw new Error("inline source map only works with singular input");[].concat(files).forEach(function(files,i){if("string"==typeof files)addFile(files,options.fromString?i:files);else for(var fileUrl in files)addFile(files[fileUrl],fileUrl)})}if(options.wrap&&(toplevel=toplevel.wrap_commonjs(options.wrap,options.exportAll)),options.compress){var compress={warnings:options.warnings};exports.merge(compress,options.compress),toplevel.figure_out_scope(options.mangle);var sq=exports.Compressor(compress);toplevel=sq.compress(toplevel)}(options.mangleProperties||options.nameCache)&&(options.mangleProperties.cache=exports.readNameCache(options.nameCache,"props"),toplevel=exports.mangle_properties(toplevel,options.mangleProperties),exports.writeNameCache(options.nameCache,"props",options.mangleProperties.cache)),options.mangle&&(toplevel.figure_out_scope(options.mangle),toplevel.compute_char_frequency(options.mangle),toplevel.mangle_names(options.mangle));var output={max_line_len:32e3};if((options.outSourceMap||options.sourceMapInline)&&(output.source_map=exports.SourceMap({file:options.outFileName||("string"==typeof options.outSourceMap?options.outSourceMap.replace(/\.map$/i,""):null),orig:inMap,root:options.sourceRoot}),options.sourceMapIncludeSources))for(var file in sourcesContent)sourcesContent.hasOwnProperty(file)&&output.source_map.get().setSourceContent(file,sourcesContent[file]);options.output&&exports.merge(output,options.output);var stream=exports.OutputStream(output);toplevel.print(stream);var source_map=output.source_map;source_map&&(source_map+="");return options.sourceMapInline?stream+="\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+new Buffer(source_map).toString("base64"):options.outSourceMap&&"string"==typeof options.outSourceMap&&!1!==options.sourceMapUrl&&(stream+="\n//# sourceMappingURL="+("string"==typeof options.sourceMapUrl?options.sourceMapUrl:options.outSourceMap)),{code:stream+"",map:source_map}},exports.describe_ast=function(){var out=exports.OutputStream({beautify:!0});return function doitem(ctor){out.print("AST_"+ctor.TYPE);var props=ctor.SELF_PROPS.filter(function(prop){return!/^\$/.test(prop)});0<props.length&&(out.space(),out.with_parens(function(){props.forEach(function(prop,i){i&&out.space(),out.print(prop)})})),ctor.documentation&&(out.space(),out.print_string(ctor.documentation)),0<ctor.SUBCLASSES.length&&(out.space(),out.with_block(function(){ctor.SUBCLASSES.forEach(function(ctor,i){out.indent(),doitem(ctor),out.newline()})}))}(exports.AST_Node),out+""},exports.readReservedFile=readReservedFile,exports.readDefaultReservedFile=function(reserved){return readReservedFile(require.resolve("./domprops.json"),reserved)},exports.readNameCache=function(filename,key){var cache=null;if(filename)try{cache=rjsFile.readFile(filename,"utf8");if(!(cache=JSON.parse(cache)[key]))throw"init";cache.props=exports.Dictionary.fromObject(cache.props)}catch(ex){cache={cname:-1,props:new exports.Dictionary}}return cache},exports.writeNameCache=function(filename,key,cache){if(filename){var data;try{data=rjsFile.readFile(filename,"utf8"),data=JSON.parse(data)}catch(ex){data={}}data[key]={cname:cache.cname,props:cache.props.toObject()},rjsFile.writeFile(filename,JSON.stringify(data,null,2),"utf8")}},exports.simple_glob=function simple_glob(glob){if(Array.isArray(glob))return[].concat.apply([],glob.map(simple_glob));if(glob.match(/\*|\?/)){var dir=path.dirname(glob);try{var entries=fs.readdirSync(dir)}catch(ex){}if(entries){var pattern="^"+path.basename(glob).replace(/[.+^$[\]\\(){}]/g,"\\$&").replace(/\*/g,"[^/\\\\]*").replace(/\?/g,"[^/\\\\]")+"$",mod="win32"===process.platform?"i":"",rx=new RegExp(pattern,mod),results=entries.filter(function(name){return rx.test(name)}).map(function(name){return path.join(dir,name)});if(results.length)return results}}return[glob]}}),define("parse",["./esprimaAdapter","lang"],function(esprima,lang){"use strict";function arrayToString(ary){var output="[";return ary&&ary.forEach(function(item,i){output+=(0<i?",":"")+'"'+lang.jsEscape(item)+'"'}),output+="]"}var argPropName="arguments",emptyScope={},mixin=lang.mixin,hasProp=lang.hasProp;function traverse(object,visitor){var child;if(object){if(!1===visitor.call(null,object))return!1;for(var i=0,keys=Object.keys(object);i<keys.length;i++)if("object"==typeof(child=object[keys[i]])&&null!==child&&!1===traverse(child,visitor))return!1}}function traverseBroad(object,visitor){var child;if(object){if(!1===visitor.call(null,object))return!1;for(var i=0,keys=Object.keys(object);i<keys.length;i++)"object"==typeof(child=object[key])&&null!==child&&traverseBroad(child,visitor)}}function getValidDeps(node){if(node&&"ArrayExpression"===node.type&&node.elements){var deps=[];return node.elements.some(function(elem){"Literal"===elem.type&&deps.push(elem.value)}),deps.length?deps:void 0}}function isFnExpression(node){return node&&("FunctionExpression"===node.type||"ArrowFunctionExpression"===node.type)}function parse(moduleName,fileName,fileContents,options){options=options||{};var i,moduleCall,depString,moduleDeps=[],result="",moduleList=[],needsDefine=!0,astRoot=esprima.parse(fileContents);if(parse.recurse(astRoot,function(callName,config,name,deps,node,factoryIdentifier,fnExpScope){return deps=deps||[],"define"!==callName||name&&name!==moduleName||(needsDefine=!1),name?moduleList.push({name:name,deps:deps}):moduleDeps=moduleDeps.concat(deps),"define"===callName&&factoryIdentifier&&hasProp(fnExpScope,factoryIdentifier)?factoryIdentifier:!!options.findNestedDependencies},options),options.insertNeedsDefine&&needsDefine&&(result+='require.needsDefine("'+moduleName+'");'),moduleDeps.length||moduleList.length){for(i=0;i<moduleList.length;i++)result&&(result+="\n"),(moduleCall=moduleList[i]).name===moduleName&&(moduleCall.deps=moduleCall.deps.concat(moduleDeps),moduleDeps=[]),depString=arrayToString(moduleCall.deps),result+='define("'+moduleCall.name+'",'+depString+");";moduleDeps.length&&(result&&(result+="\n"),depString=arrayToString(moduleDeps),result+='define("'+moduleName+'",'+depString+");")}return result||null}return parse.traverse=traverse,parse.traverseBroad=traverseBroad,parse.isFnExpression=isFnExpression,parse.recurse=function(object,onMatch,options,fnExpScope){var keys,child,result,i,params,param,tempObject,hasHas=options&&options.has;if(fnExpScope=fnExpScope||emptyScope,object)if(hasHas&&"IfStatement"===object.type&&object.test.type&&"Literal"===object.test.type)object.test.value?this.recurse(object.consequent,onMatch,options,fnExpScope):this.recurse(object.alternate,onMatch,options,fnExpScope);else{if(!1===(result=this.parseNode(object,onMatch,fnExpScope)))return;if("string"==typeof result)return result;if("ExpressionStatement"===object.type&&object.expression&&"CallExpression"===object.expression.type&&object.expression.callee&&isFnExpression(object.expression.callee)&&(tempObject=object.expression.callee),"UnaryExpression"===object.type&&object.argument&&"CallExpression"===object.argument.type&&object.argument.callee&&isFnExpression(object.argument.callee)&&(tempObject=object.argument.callee),tempObject&&tempObject.params&&tempObject.params.length)for(params=tempObject.params,fnExpScope=mixin({},fnExpScope,!0),i=0;i<params.length;i++)"Identifier"===(param=params[i]).type&&(fnExpScope[param.name]=!0);for(i=0,keys=Object.keys(object);i<keys.length&&("object"!=typeof(child=object[keys[i]])||null===child||"string"!=typeof(result=this.recurse(child,onMatch,options,fnExpScope))||!hasProp(fnExpScope,result));i++);if("string"==typeof result)return hasProp(fnExpScope,result)?result:void 0}},parse.definesRequire=function(fileName,fileContents){var foundDefine=!1,foundDefineAmd=!1;return traverse(esprima.parse(fileContents),function(node){if("Program"===node.type&&node.body&&node.body.length&&(foundDefine=node.body.some(function(bodyNode){if("VariableDeclaration"===bodyNode.type){var decls=bodyNode.declarations;if(decls)if(decls.some(function(declNode){return"VariableDeclarator"===declNode.type&&declNode.id&&"Identifier"===declNode.id.type&&"define"===declNode.id.name}))return!0}if("FunctionDeclaration"===bodyNode.type&&bodyNode.id&&"Identifier"===bodyNode.id.type&&"define"===bodyNode.id.name)return!0})),foundDefine&&parse.hasDefineAmd(node))return!(foundDefineAmd=!0)}),foundDefine&&foundDefineAmd},parse.getAnonDeps=function(fileName,fileContents){var astRoot="string"==typeof fileContents?esprima.parse(fileContents):fileContents,defFunc=this.findAnonDefineFactory(astRoot);return parse.getAnonDepsFromNode(defFunc)},parse.getAnonDepsFromNode=function(node){var funcArgLength,deps=[];return node&&(this.findRequireDepNames(node,deps),(funcArgLength=node.params&&node.params.length)&&(deps=(1<funcArgLength?["require","exports","module"]:["require"]).concat(deps))),deps},parse.isDefineNodeWithArgs=function(node){return node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"define"===node.callee.name&&node[argPropName]},parse.findAnonDefineFactory=function(node){var match;return traverse(node,function(node){var arg0,arg1;if(parse.isDefineNodeWithArgs(node)){if(isFnExpression(arg0=node[argPropName][0]))return match=arg0,!1;if(arg1=node[argPropName][1],"Literal"===arg0.type&&isFnExpression(arg1))return match=arg1,!1}}),match},parse.findConfig=function(fileContents){var jsConfig,foundConfig,stringData,foundRange,quote,quoteMatch,quoteRegExp=/(:\s|\[\s*)(['"])/,astRoot=esprima.parse(fileContents,{loc:!0});return traverse(astRoot,function(node){var arg,requireType=parse.hasRequire(node);if(!requireType||"require"!==requireType&&"requirejs"!==requireType&&"requireConfig"!==requireType&&"requirejsConfig"!==requireType){if(arg=parse.getRequireObjectLiteral(node))return stringData=parse.nodeToString(fileContents,arg),jsConfig=stringData.value,foundRange=stringData.range,!1}else if((arg=node[argPropName]&&node[argPropName][0])&&"ObjectExpression"===arg.type)return stringData=parse.nodeToString(fileContents,arg),jsConfig=stringData.value,foundRange=stringData.range,!1}),jsConfig&&(quoteMatch=quoteRegExp.exec(jsConfig),quote=quoteMatch&&quoteMatch[2]||'"',foundConfig=eval("("+jsConfig+")")),{config:foundConfig,range:foundRange,quote:quote}},parse.getRequireObjectLiteral=function(node){if(node.id&&"Identifier"===node.id.type&&("require"===node.id.name||"requirejs"===node.id.name)&&node.init&&"ObjectExpression"===node.init.type)return node.init},parse.renameNamespace=function(fileContents,ns){var lines,locs=[],astRoot=esprima.parse(fileContents,{loc:!0});return parse.recurse(astRoot,function(callName,config,name,deps,node){return locs.push(node.loc),"define"!==callName},{}),locs.length&&(lines=fileContents.split("\n"),locs.reverse(),locs.forEach(function(loc){var startIndex=loc.start.column,lineIndex=loc.start.line-1,line=lines[lineIndex];lines[lineIndex]=line.substring(0,startIndex)+ns+"."+line.substring(startIndex,line.length)}),fileContents=lines.join("\n")),fileContents},parse.findDependencies=function(fileName,fileContents,options){var dependencies=[],astRoot=esprima.parse(fileContents);return parse.recurse(astRoot,function(callName,config,name,deps){deps&&(dependencies=dependencies.concat(deps))},options),dependencies},parse.findCjsDependencies=function(fileName,fileContents){var dependencies=[];return traverse(esprima.parse(fileContents),function(node){var arg;node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"require"===node.callee.name&&node[argPropName]&&1===node[argPropName].length&&"Literal"===(arg=node[argPropName][0]).type&&dependencies.push(arg.value)}),dependencies},parse.hasDefDefine=function(node){return"FunctionDeclaration"===node.type&&node.id&&"Identifier"===node.id.type&&"define"===node.id.name},parse.hasDefineAmd=function(node){return node&&"AssignmentExpression"===node.type&&node.left&&"MemberExpression"===node.left.type&&node.left.object&&"define"===node.left.object.name&&node.left.property&&"amd"===node.left.property.name},parse.refsDefineAmd=function(node){return node&&"MemberExpression"===node.type&&node.object&&"define"===node.object.name&&"Identifier"===node.object.type&&node.property&&"amd"===node.property.name&&"Identifier"===node.property.type},parse.hasRequire=function(node){var callName,c=node&&node.callee;return node&&"CallExpression"===node.type&&c&&("Identifier"!==c.type||"require"!==c.name&&"requirejs"!==c.name?"MemberExpression"===c.type&&c.object&&"Identifier"===c.object.type&&("require"===c.object.name||"requirejs"===c.object.name)&&c.property&&"config"===c.property.name&&(callName=c.object.name+"Config"):callName=c.name),callName},parse.hasDefine=function(node){return node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"define"===node.callee.name},parse.getNamedDefine=function(fileContents){var name;return traverse(esprima.parse(fileContents),function(node){if(node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"define"===node.callee.name&&node[argPropName]&&node[argPropName][0]&&"Literal"===node[argPropName][0].type)return name=node[argPropName][0].value,!1}),name},parse.getAllNamedDefines=function(fileContents,excludeMap){var names=[];return parse.recurse(esprima.parse(fileContents),function(callName,config,name,deps,node,factoryIdentifier,fnExpScope){return"define"===callName&&name&&(excludeMap.hasOwnProperty(name)||names.push(name)),"define"!==callName||!factoryIdentifier||!hasProp(fnExpScope,factoryIdentifier)||factoryIdentifier},{}),names},parse.usesAmdOrRequireJs=function(fileName,fileContents){var uses;return traverse(esprima.parse(fileContents),function(node){var type,callName,arg;parse.hasDefDefine(node)?type="declaresDefine":parse.hasDefineAmd(node)?type="defineAmd":(callName=parse.hasRequire(node))?!(arg=node[argPropName]&&node[argPropName][0])||"ObjectExpression"!==arg.type&&"ArrayExpression"!==arg.type||(type=callName):parse.hasDefine(node)&&(type="define"),type&&((uses=uses||{})[type]=!0)}),uses},parse.usesCommonJs=function(fileName,fileContents){var uses=null,assignsExports=!1;return traverse(esprima.parse(fileContents),function(node){var type,exp=node.expression||node.init;"Identifier"!==node.type||"__dirname"!==node.name&&"__filename"!==node.name?"VariableDeclarator"===node.type&&node.id&&"Identifier"===node.id.type&&"exports"===node.id.name?type="varExports":exp&&"AssignmentExpression"===exp.type&&exp.left&&"MemberExpression"===exp.left.type&&exp.left.object?"module"===exp.left.object.name&&exp.left.property&&"exports"===exp.left.property.name?type="moduleExports":"exports"===exp.left.object.name&&exp.left.property?type="exports":"MemberExpression"===exp.left.object.type&&"module"===exp.left.object.object.name&&"exports"===exp.left.object.property.name&&"Identifier"===exp.left.object.property.type&&(type="moduleExports"):node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"require"===node.callee.name&&node[argPropName]&&1===node[argPropName].length&&"Literal"===node[argPropName][0].type&&(type="require"):type=node.name.substring(2),type&&("varExports"===type?assignsExports=!0:"exports"===type&&assignsExports||((uses=uses||{})[type]=!0))}),uses},parse.findRequireDepNames=function(node,deps){traverse(node,function(node){var arg;node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"require"===node.callee.name&&node[argPropName]&&1===node[argPropName].length&&"Literal"===(arg=node[argPropName][0]).type&&deps.push(arg.value)})},parse.parseNode=function(node,onMatch,fnExpScope){var name,deps,cjsDeps,arg,factory,exp,refsDefine,bodyNode,args=node&&node[argPropName],callName=parse.hasRequire(node),isUmd=!1;if("require"===callName||"requirejs"===callName){if((arg=node[argPropName]&&node[argPropName][0])&&"ArrayExpression"!==arg.type&&"ObjectExpression"===arg.type&&(arg=node[argPropName][1]),!(deps=getValidDeps(arg)))return;return onMatch("require",null,null,deps,node)}if(parse.hasDefine(node)&&args&&args.length){if(name=args[0],deps=args[1],factory=args[2],"ArrayExpression"===name.type?(factory=deps,deps=name,name=null):isFnExpression(name)?(factory=name,name=deps=null):"Identifier"===name.type&&1===args.length&&hasProp(fnExpScope,name.name)?(isUmd=!0,factory=name,name=null):"Literal"!==name.type&&(name=deps=factory=null),name&&"Literal"===name.type&&deps&&(isFnExpression(deps)?(factory=deps,deps=null):"ObjectExpression"===deps.type?deps=factory=null:"Identifier"===deps.type&&(2===args.length?deps=factory=null:3===args.length&&isFnExpression(factory)&&(deps=null))),deps&&"ArrayExpression"===deps.type)deps=getValidDeps(deps);else if(isFnExpression(factory))(cjsDeps=parse.getAnonDepsFromNode(factory)).length&&(deps=cjsDeps);else if(deps||factory&&!isUmd)return;return name&&"Literal"===name.type&&(name=name.value),onMatch("define",null,name,deps,node,factory&&"Identifier"===factory.type?factory.name:void 0,fnExpScope)}if("CallExpression"===node.type&&node.callee&&isFnExpression(node.callee)&&node.callee.body&&node.callee.body.body&&1===node.callee.body.body.length&&"IfStatement"===node.callee.body.body[0].type&&(bodyNode=node.callee.body.body[0]).consequent&&bodyNode.consequent.body&&"ExpressionStatement"===(exp=bodyNode.consequent.body[0]).type&&exp.expression&&parse.hasDefine(exp.expression)&&exp.expression.arguments&&1===exp.expression.arguments.length&&"Identifier"===exp.expression.arguments[0].type&&(traverse(bodyNode.test,function(node){if(parse.refsDefineAmd(node))return!(refsDefine=!0)}),refsDefine))return onMatch("define",null,null,null,exp.expression,exp.expression.arguments[0].name,fnExpScope)},parse.nodeToString=function(contents,node){var extracted,loc=node.loc,lines=contents.split("\n"),preamble=(1<loc.start.line?lines.slice(0,loc.start.line-1).join("\n")+"\n":"")+lines[loc.start.line-1].substring(0,loc.start.column);return{value:extracted=loc.start.line===loc.end.line?lines[loc.start.line-1].substring(loc.start.column,loc.end.column):lines[loc.start.line-1].substring(loc.start.column)+"\n"+lines.slice(loc.start.line,loc.end.line-1).join("\n")+"\n"+lines[loc.end.line-1].substring(0,loc.end.column),range:[preamble.length,preamble.length+extracted.length]}},parse.getLicenseComments=function(fileName,contents){var commentNode,refNode,subNode,value,i,j,ast=esprima.parse(contents,{comment:!0,range:!0}),result="",existsMap={},lineEnd=-1===contents.indexOf("\r")?"\n":"\r\n";if(ast.comments)for(i=0;i<ast.comments.length;i++){if("Line"===(commentNode=ast.comments[i]).type)if(value="//"+commentNode.value+lineEnd,refNode=commentNode,i+1>=ast.comments.length)value+=lineEnd;else{for(j=i+1;j<ast.comments.length&&("Line"===(subNode=ast.comments[j]).type&&subNode.range[0]===refNode.range[1]+1);j++)value+="//"+subNode.value+lineEnd,refNode=subNode;value+=lineEnd,i=j-1}else value="/*"+commentNode.value+"*/"+lineEnd+lineEnd;existsMap[value]||-1===value.indexOf("license")&&("Block"!==commentNode.type||0!==value.indexOf("/*!"))&&-1===value.indexOf("opyright")&&-1===value.indexOf("(c)")||(result+=value,existsMap[value]=!0)}return result},parse}),define("transform",["./esprimaAdapter","./parse","logger","lang"],function(esprima,parse,logger,lang){"use strict";var transform,baseIndentRegExp=/^([ \t]+)/,indentRegExp=/\{[\r\n]+([ \t]+)/,keyRegExp=/^[_A-Za-z]([A-Za-z\d_]*)$/,bulkIndentRegExps={"\n":/\n/g,"\r\n":/\r\n/g};return transform={toTransport:function(namespace,moduleName,path,contents,onFound,options){options=options||{};function applySourceUrl(contents){return options.useSourceUrl&&(contents='eval("'+lang.jsEscape(contents)+"\\n//# sourceURL="+(0===path.indexOf("/")?"":"/")+path+'");\n'),contents}var astRoot,contentLines,modLine,foundAnon,scanCount=0,scanReset=!1,defineInfos=[];try{astRoot=esprima.parse(contents,{loc:!0})}catch(e){return logger.trace("toTransport skipping "+path+": "+e.toString()),contents}return parse.traverse(astRoot,function(node){var args,firstArg,firstArgLoc,factoryNode,needsId,depAction,init,range,namespaceExists;if("VariableDeclarator"===node.type&&node.id&&"define"===node.id.name&&"Identifier"===node.id.type&&!((init=node.init)&&init.callee&&"CallExpression"===init.callee.type&&init.callee.callee&&"Identifier"===init.callee.callee.type&&"require"===init.callee.callee.name&&init.callee.arguments&&1===init.callee.arguments.length&&"Literal"===init.callee.arguments[0].type&&init.callee.arguments[0].value&&-1!==init.callee.arguments[0].value.indexOf("amdefine")))return!1;if((namespaceExists=namespace&&"CallExpression"===node.type&&node.callee&&node.callee.object&&"Identifier"===node.callee.object.type&&node.callee.object.name===namespace&&"Identifier"===node.callee.property.type&&"define"===node.callee.property.name)||parse.isDefineNodeWithArgs(node)){if(!(args=node.arguments)||!args.length)return;if(firstArgLoc=(firstArg=args[0]).loc,1===args.length)"Identifier"===firstArg.type?(needsId=!0,depAction="empty"):parse.isFnExpression(firstArg)?(factoryNode=firstArg,needsId=!0,depAction="scan"):"ObjectExpression"===firstArg.type||"Literal"===firstArg.type&&"number"==typeof firstArg.value||"UnaryExpression"===firstArg.type&&"-"===firstArg.operator&&firstArg.argument&&"Literal"===firstArg.argument.type&&"number"==typeof firstArg.argument.value?(needsId=!0,depAction="skip"):"MemberExpression"===firstArg.type&&firstArg.object&&firstArg.property&&"Identifier"===firstArg.property.type&&(needsId=!0,depAction="empty");else if("ArrayExpression"===firstArg.type)needsId=!0,depAction="skip";else{if("Literal"!==firstArg.type||"string"!=typeof firstArg.value)return;needsId=!1,depAction=2===args.length&&parse.isFnExpression(args[1])?(factoryNode=args[1],"scan"):"skip"}if((range={foundId:void 0,needsId:needsId,depAction:depAction,namespaceExists:namespaceExists,node:node,defineLoc:node.loc,firstArgLoc:firstArgLoc,factoryNode:factoryNode,sourceUrlData:void 0}).needsId){if(foundAnon)return logger.trace(path+" has more than one anonymous define. May be a built file from another build system like, Ender. Skipping normalization."),!(defineInfos=[]);foundAnon=range,defineInfos.push(range)}else"scan"===depAction&&(1<(scanCount+=1)?scanReset||(defineInfos=foundAnon?[foundAnon]:[],scanReset=!0):defineInfos.push(range))}}),defineInfos.length?(defineInfos.reverse(),contentLines=contents.split("\n"),modLine=function(loc,contentInsertion){var startIndex=loc.start.column,lineIndex=loc.start.line-1,line=contentLines[lineIndex];contentLines[lineIndex]=line.substring(0,startIndex)+contentInsertion+line.substring(startIndex,line.length)},defineInfos.forEach(function(info){var deps,contentInsertion="",depString="";info.needsId&&moduleName&&(contentInsertion+="'"+moduleName+"',"),"scan"===info.depAction&&(depString=(deps=parse.getAnonDepsFromNode(info.factoryNode)).length?"["+deps.map(function(dep){return"'"+dep+"'"})+"]":"[]",depString+=",",info.factoryNode?modLine(info.factoryNode.loc,depString):contentInsertion+=depString),contentInsertion&&modLine(info.firstArgLoc,contentInsertion),namespace&&!info.namespaceExists&&modLine(info.defineLoc,namespace+"."),onFound&&onFound(info)}),applySourceUrl(contents=contentLines.join("\n"))):applySourceUrl(contents)},modifyConfig:function(fileContents,onConfig){var details=parse.findConfig(fileContents),config=details.config;return(config=config&&onConfig(config))?transform.serializeConfig(config,fileContents,details.range[0],details.range[1],{quote:details.quote}):fileContents},serializeConfig:function(config,fileContents,start,end,options){var indent,match,outDentRegExp,baseIndent="",startString=fileContents.substring(0,start),existingConfigString=fileContents.substring(start,end),lineReturn=-1===existingConfigString.indexOf("\r")?"\n":"\r\n",lastReturnIndex=startString.lastIndexOf("\n");return-1===lastReturnIndex&&(lastReturnIndex=0),(match=baseIndentRegExp.exec(startString.substring(lastReturnIndex+1,start)))&&match[1]&&(baseIndent=match[1]),(match=indentRegExp.exec(existingConfigString))&&match[1]&&(indent=match[1]),indent=!indent||indent.length<baseIndent?"  ":indent.substring(baseIndent.length),outDentRegExp=new RegExp("("+lineReturn+")"+indent,"g"),startString+function(str,indent,lineReturn){var regExp=bulkIndentRegExps[lineReturn];return str.replace(regExp,"$&"+indent)}(transform.objectToString(config,{indent:indent,lineReturn:lineReturn,outDentRegExp:outDentRegExp,quote:options&&options.quote}),baseIndent,lineReturn)+fileContents.substring(end)},objectToString:function(obj,options,totalIndent){var startBrace,endBrace,nextIndent,first=!0,value="",lineReturn=options.lineReturn,indent=options.indent,outDentRegExp=options.outDentRegExp,quote=options.quote||'"';return nextIndent=(totalIndent=totalIndent||"")+indent,null===obj?value="null":void 0===obj?value="undefined":"number"==typeof obj||"boolean"==typeof obj?value=obj:"string"==typeof obj?value=quote+lang.jsEscape(obj)+quote:lang.isArray(obj)?(lang.each(obj,function(item,i){value+=(0!==i?","+lineReturn:"")+nextIndent+transform.objectToString(item,options,nextIndent)}),startBrace="[",endBrace="]"):lang.isFunction(obj)||lang.isRegExp(obj)?value=obj.toString().replace(outDentRegExp,"$1"):(lang.eachProp(obj,function(v,prop){value+=(first?"":","+lineReturn)+nextIndent+(keyRegExp.test(prop)?prop:quote+lang.jsEscape(prop)+quote)+": "+transform.objectToString(v,options,nextIndent),first=!1}),startBrace="{",endBrace="}"),startBrace&&(value=startBrace+lineReturn+value+lineReturn+totalIndent+endBrace),value}}}),define("pragma",["parse","logger"],function(parse,logger){"use strict";function Temp(){}function create(obj,mixin){Temp.prototype=obj;var prop,temp=new Temp;if(Temp.prototype=null,mixin)for(prop in mixin)mixin.hasOwnProperty(prop)&&!temp.hasOwnProperty(prop)&&(temp[prop]=mixin[prop]);return temp}var pragma={conditionalRegExp:/(exclude|include)Start\s*\(\s*["'](\w+)["']\s*,(.*)\)/,useStrictRegExp:/(^|[^{]\r?\n)['"]use strict['"];/g,hasRegExp:/has\s*\(\s*['"]([^'"]+)['"]\s*\)/g,configRegExp:/(^|[^\.])(requirejs|require)(\.config)\s*\(/g,nsWrapRegExp:/\/\*requirejs namespace: true \*\//,apiDefRegExp:/var requirejs,\s*require,\s*define;/,defineCheckRegExp:/typeof(\s+|\s*\(\s*)define(\s*\))?\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd/g,defineStringCheckRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\[\s*["']amd["']\s*\]/g,defineTypeFirstCheckRegExp:/\s*["']function["']\s*==(=?)\s*typeof\s+define\s*&&\s*define\s*\.\s*amd/g,defineJQueryRegExp:/typeof\s+define\s*===?\s*["']function["']\s*&&\s*define\s*\.\s*amd\s*&&\s*define\s*\.\s*amd\s*\.\s*jQuery/g,defineHasRegExp:/typeof\s+define\s*==(=)?\s*['"]function['"]\s*&&\s*typeof\s+define\.amd\s*==(=)?\s*['"]object['"]\s*&&\s*define\.amd/g,defineTernaryRegExp:/typeof\s+define\s*===?\s*['"]function["']\s*&&\s*define\s*\.\s*amd\s*\?\s*define/,defineExistsRegExp:/\s+typeof\s+define\s*!==?\s*['"]undefined["']\s*/,defineExistsAndAmdRegExp:/typeof\s+define\s*!==?\s*['"]undefined["']\s*&&\s*define\s*\.\s*amd\s*/,amdefineRegExp:/if\s*\(\s*typeof define\s*\!==\s*['"]function['"]\s*\)\s*\{\s*[^\{\}]+amdefine[^\{\}]+\}/g,removeStrict:function(contents,config){return config.useStrict?contents:contents.replace(pragma.useStrictRegExp,"$1")},namespace:function(fileContents,ns,onLifecycleName){return ns&&(fileContents=fileContents.replace(pragma.configRegExp,"$1"+ns+".$2$3("),fileContents=(fileContents=(fileContents=(fileContents=(fileContents=(fileContents=(fileContents=(fileContents=(fileContents=parse.renameNamespace(fileContents,ns)).replace(pragma.defineTernaryRegExp,"typeof "+ns+".define === 'function' && "+ns+".define.amd ? "+ns+".define")).replace(pragma.defineJQueryRegExp,"typeof "+ns+".define === 'function' && "+ns+".define.amd && "+ns+".define.amd.jQuery")).replace(pragma.defineHasRegExp,"typeof "+ns+".define === 'function' && typeof "+ns+".define.amd === 'object' && "+ns+".define.amd")).replace(pragma.defineExistsAndAmdRegExp,"typeof "+ns+".define !== 'undefined' && "+ns+".define.amd")).replace(pragma.defineCheckRegExp,"typeof "+ns+".define === 'function' && "+ns+".define.amd")).replace(pragma.defineStringCheckRegExp,"typeof "+ns+".define === 'function' && "+ns+".define['amd']")).replace(pragma.defineTypeFirstCheckRegExp,"'function' === typeof "+ns+".define && "+ns+".define.amd")).replace(pragma.defineExistsRegExp,"typeof "+ns+".define !== 'undefined'"),pragma.apiDefRegExp.test(fileContents)&&-1===fileContents.indexOf("if (!"+ns+" || !"+ns+".requirejs)")&&(fileContents="var "+ns+";(function () { if (!"+ns+" || !"+ns+".requirejs) {\nif (!"+ns+") { "+ns+" = {}; } else { require = "+ns+"; }\n"+fileContents+"\n"+ns+".requirejs = requirejs;"+ns+".require = require;"+ns+".define = define;\n}\n}());"),pragma.nsWrapRegExp.test(fileContents)&&(fileContents="(function () {\nvar require = "+ns+".require,requirejs = "+ns+".requirejs,define = "+ns+".define;\n"+(fileContents=fileContents.replace(pragma.nsWrapRegExp,""))+"\n}());")),fileContents},process:function(fileName,fileContents,config,onLifecycleName,pluginCollector){var foundIndex=-1,startIndex=0,lineEndIndex,conditionLine,matches,type,marker,condition,isTrue,endRegExp,endMatches,endMarkerIndex,shouldInclude,startLength,lifecycleHas,deps,i,dep,moduleName,collectorMod,lifecyclePragmas,pragmas=config.pragmas,hasConfig=config.has,kwArgs=pragmas;if(onLifecycleName&&(lifecyclePragmas=config["pragmas"+onLifecycleName],lifecycleHas=config["has"+onLifecycleName],lifecyclePragmas&&(pragmas=create(pragmas||{},lifecyclePragmas)),lifecycleHas&&(hasConfig=create(hasConfig||{},lifecycleHas))),hasConfig&&(fileContents=fileContents.replace(pragma.hasRegExp,function(match,test){return hasConfig.hasOwnProperty(test)?!!hasConfig[test]:match})),!config.skipPragmas)for(;-1!==(foundIndex=fileContents.indexOf("//>>",startIndex));)if(lineEndIndex=fileContents.indexOf("\n",foundIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),startIndex=lineEndIndex+1,conditionLine=fileContents.substring(foundIndex,lineEndIndex+1),matches=conditionLine.match(pragma.conditionalRegExp),matches){type=matches[1],marker=matches[2],condition=matches[3],isTrue=!1;try{isTrue=!!eval("("+condition+")")}catch(e){throw"Error in file: "+fileName+". Conditional comment: "+conditionLine+" failed with this error: "+e}if(endRegExp=new RegExp("\\/\\/\\>\\>\\s*"+type+"End\\(\\s*['\"]"+marker+"['\"]\\s*\\)","g"),endMatches=endRegExp.exec(fileContents.substring(startIndex,fileContents.length)),!endMatches)throw"Error in file: "+fileName+". Cannot find end marker for conditional comment: "+conditionLine;endMarkerIndex=startIndex+endRegExp.lastIndex-endMatches[0].length,lineEndIndex=fileContents.indexOf("\n",endMarkerIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),shouldInclude="exclude"===type&&!isTrue||"include"===type&&isTrue,startLength=startIndex-foundIndex,fileContents=fileContents.substring(0,foundIndex)+(shouldInclude?fileContents.substring(startIndex,endMarkerIndex):"")+fileContents.substring(lineEndIndex+1,fileContents.length),startIndex=foundIndex}if(config.optimizeAllPluginResources&&pluginCollector)try{if(deps=parse.findDependencies(fileName,fileContents),deps.length)for(i=0;i<deps.length;i++)dep=deps[i],-1!==dep.indexOf("!")&&(moduleName=dep.split("!")[0],collectorMod=pluginCollector[moduleName],collectorMod=collectorMod||(pluginCollector[moduleName]=[]),collectorMod.push(dep))}catch(eDep){logger.error("Parse error looking for plugin resources in "+fileName+", skipping.")}return config.keepAmdefine||(fileContents=fileContents.replace(pragma.amdefineRegExp,"")),"OnSave"===onLifecycleName&&config.namespace&&(fileContents=pragma.namespace(fileContents,config.namespace,onLifecycleName)),pragma.removeStrict(fileContents,config)}};return pragma}),"browser"===env&&define("browser/optimize",{}),"node"===env&&define("node/optimize",{}),"rhino"===env&&define("rhino/optimize",["logger","env!env/file"],function(logger,file){Array.prototype.reduce||(Array.prototype.reduce=function(fn){var accumulator,i=0,length=this.length;if(2<=arguments.length)accumulator=arguments[1];else if(length){for(;!(i in this);)i++;accumulator=this[i++]}for(;i<length;i++)i in this&&(accumulator=fn.call(void 0,accumulator,this[i],i,this));return accumulator});var JSSourceFilefromCode,mapRegExp=/"file":"[^"]+"/;try{JSSourceFilefromCode=java.lang.Class.forName("com.google.javascript.jscomp.JSSourceFile").getMethod("fromCode",[java.lang.String,java.lang.String])}catch(e){try{JSSourceFilefromCode=java.lang.Class.forName("com.google.javascript.jscomp.SourceFile").getMethod("fromCode",[java.lang.String,java.lang.String])}catch(e){try{var stringClass=Java.type("java.lang.String").class;JSSourceFilefromCode=Java.type("com.google.javascript.jscomp.SourceFile").class.getMethod("fromCode",[stringClass,stringClass])}catch(e){}}}return{closure:function(fileName,fileContents,outFileName,keepLines,config){config=config||{};var result,mappings,optimized,baseName,writer,outBaseName,outFileNameMap,srcOutFileName,concatNameMap,options,option,compiler,externExportsPath,filename,content,jscomp=Packages.com.google.javascript.jscomp,jsSourceFile=(Packages.com.google.common.flags,filename=String(fileName),content=String(fileContents),JSSourceFilefromCode.invoke(null,[filename,content])),sourceListArray=new java.util.ArrayList,externList=new java.util.ArrayList,Compiler=Packages.com.google.javascript.jscomp.Compiler,CommandLineRunner=Packages.com.google.javascript.jscomp.CommandLineRunner;for(option in logger.trace("Minifying file: "+fileName),baseName=new java.io.File(fileName).getName(),options=new jscomp.CompilerOptions,config.CompilerOptions)config.CompilerOptions[option]&&(options[option]=config.CompilerOptions[option]);if(options.prettyPrint=keepLines||options.prettyPrint,jscomp.CompilationLevel[config.CompilationLevel||"SIMPLE_OPTIMIZATIONS"].setOptionsForCompilationLevel(options),config.generateSourceMaps&&((mappings=new java.util.ArrayList).add(new com.google.javascript.jscomp.SourceMap.LocationMapping(fileName,baseName+".src.js")),options.setSourceMapLocationMappings(mappings),options.setSourceMapOutputPath(fileName+".map")),externList.addAll(CommandLineRunner.getDefaultExterns()),config.externExportsPath&&(externExportsPath=config.externExportsPath,externList.add(jscomp.SourceFile.fromFile(externExportsPath))),Compiler.setLoggingLevel(Packages.java.util.logging.Level[config.loggingLevel||"WARNING"]),compiler=new Compiler,sourceListArray.add(jsSourceFile),(result=compiler.compile(externList,sourceListArray,options)).success)return optimized=String(compiler.toSource()),fileContents=config.generateSourceMaps&&result.sourceMap&&outFileName?(outBaseName=new java.io.File(outFileName).getName(),srcOutFileName=outFileName+".src.js",outFileNameMap=outFileName+".map",file.exists(outFileNameMap)?(concatNameMap=outFileNameMap.replace(/\.map$/,".src.js.map"),file.saveFile(concatNameMap,file.readFile(outFileNameMap)),file.saveFile(srcOutFileName,fileContents.replace(/\/\# sourceMappingURL=(.+).map/,"/# sourceMappingURL=$1.src.js.map"))):file.saveUtf8File(srcOutFileName,fileContents),writer=function(fileName,encoding){var outWriter,parentDir,outFile=new java.io.File(fileName);if(!(parentDir=outFile.getAbsoluteFile().getParentFile()).exists()&&!parentDir.mkdirs())throw"Could not create directory: "+parentDir.getAbsolutePath();return outWriter=encoding?new java.io.OutputStreamWriter(new java.io.FileOutputStream(outFile),encoding):new java.io.OutputStreamWriter(new java.io.FileOutputStream(outFile)),new java.io.BufferedWriter(outWriter)}(outFileNameMap,"utf-8"),result.sourceMap.appendTo(writer,outFileName),writer.close(),file.saveFile(outFileNameMap,file.readFile(outFileNameMap).replace(mapRegExp,'"file":"'+baseName+'"')),optimized+"\n//# sourceMappingURL="+outBaseName+".map"):optimized;throw new Error("Cannot closure compile file: "+fileName+". Skipping it.")}}}),"xpconnect"===env&&define("xpconnect/optimize",{}),define("optimize",["lang","logger","env!env/optimize","env!env/file","parse","pragma","uglifyjs","source-map"],function(lang,logger,envOptimize,file,parse,pragma,uglify,sourceMap){"use strict";var optimize,cssImportRegExp=/\@import\s+(url\()?\s*([^);]+)\s*(\))?([\w, ]*)(;)?/gi,cssCommentImportRegExp=/\/\*[^\*]*@import[^\*]*\*\//g,cssUrlRegExp=/\url\(\s*([^\)]+)\s*\)?/g,protocolRegExp=/^\w+:/;sourceMap.SourceMapGenerator,sourceMap.SourceMapConsumer;function cleanCssUrlQuotes(url){return"'"!==(url=url.replace(/\s+$/,"")).charAt(0)&&'"'!==url.charAt(0)||(url=url.substring(1,url.length-1)),url}function fixCssUrlPaths(fileName,path,contents,cssPrefix){return contents.replace(cssUrlRegExp,function(fullMatch,urlMatch){var firstChar,hasProtocol,parts,i,fixedUrlMatch=cleanCssUrlQuotes(urlMatch);for(firstChar=(fixedUrlMatch=fixedUrlMatch.replace(lang.backSlashRegExp,"/")).charAt(0),hasProtocol=protocolRegExp.test(fixedUrlMatch),"/"===firstChar||"#"===firstChar||hasProtocol?hasProtocol||logger.trace(fileName+"\n  URL not a relative URL, skipping: "+urlMatch):urlMatch=cssPrefix+path+fixedUrlMatch,i=(parts=urlMatch.split("/")).length-1;0<i;i--)"."===parts[i]?parts.splice(i,1):".."===parts[i]&&0!==i&&".."!==parts[i-1]&&(parts.splice(i-1,2),--i);return"url("+parts.join("/")+")"})}return optimize={jsFile:function(fileName,fileContents,outFileName,config,pluginCollector){fileContents=fileContents||file.readFile(fileName),fileContents=optimize.js(fileName,fileContents,outFileName,config,pluginCollector),file.saveUtf8File(outFileName,fileContents)},js:function(fileName,fileContents,outFileName,config,pluginCollector){var optFunc,optConfig,parts=String(config.optimize).split("."),optimizerName=parts[0],keepLines="keepLines"===parts[1],licenseContents="";if(config=config||{},fileContents=pragma.process(fileName,fileContents,config,"OnSave",pluginCollector),optimizerName&&"none"!==optimizerName){if(!(optFunc=envOptimize[optimizerName]||optimize.optimizers[optimizerName]))throw new Error('optimizer with name of "'+optimizerName+'" not found for this environment');optConfig=config[optimizerName]||{},config.generateSourceMaps&&(optConfig.generateSourceMaps=!!config.generateSourceMaps,optConfig._buildSourceMap=config._buildSourceMap);try{if(config.preserveLicenseComments)try{licenseContents=parse.getLicenseComments(fileName,fileContents)}catch(e){throw new Error("Cannot parse file: "+fileName+" for comments. Skipping it. Error is:\n"+e.toString())}config.generateSourceMaps&&licenseContents&&(optConfig.preamble=licenseContents,licenseContents=""),fileContents=licenseContents+optFunc(fileName,fileContents,outFileName,keepLines,optConfig),optConfig._buildSourceMap&&optConfig._buildSourceMap!==config._buildSourceMap&&(config._buildSourceMap=optConfig._buildSourceMap)}catch(e){if(config.throwWhen&&config.throwWhen.optimize)throw e;logger.error(e)}}else config._buildSourceMap&&(config._buildSourceMap=null);return fileContents},cssFile:function(fileName,outFileName,config){var startIndex,endIndex,buildText,comment,originalFileContents=file.readFile(fileName),flat=function flattenCss(fileName,fileContents,cssImportIgnore,cssPrefix,included,topLevel){var endIndex=(fileName=fileName.replace(lang.backSlashRegExp,"/")).lastIndexOf("/"),filePath=-1!==endIndex?fileName.substring(0,endIndex+1):"",importList=[],skippedList=[];return fileContents=fileContents.replace(cssCommentImportRegExp,""),cssImportIgnore&&","!==cssImportIgnore.charAt(cssImportIgnore.length-1)&&(cssImportIgnore+=","),fileContents=fileContents.replace(cssImportRegExp,function(fullMatch,urlStart,importFileName,urlEnd,mediaTypes){if(mediaTypes&&"all"!==mediaTypes.replace(/^\s\s*/,"").replace(/\s\s*$/,""))return skippedList.push(fileName),fullMatch;if(importFileName=cleanCssUrlQuotes(importFileName),cssImportIgnore&&-1!==cssImportIgnore.indexOf(importFileName+","))return fullMatch;importFileName=importFileName.replace(lang.backSlashRegExp,"/");try{var importEndIndex,importPath,flat,fullImportFileName="/"===importFileName.charAt(0)?importFileName:filePath+importFileName,importContents=file.readFile(fullImportFileName);return included[fullImportFileName]?"":(included[fullImportFileName]=!0,importContents=(flat=flattenCss(fullImportFileName,importContents,cssImportIgnore,cssPrefix,included)).fileContents,flat.importList.length&&importList.push.apply(importList,flat.importList),flat.skippedList.length&&skippedList.push.apply(skippedList,flat.skippedList),importPath=-1!==(importEndIndex=importFileName.lastIndexOf("/"))?importFileName.substring(0,importEndIndex+1):"",importContents=fixCssUrlPaths(importFileName,importPath=importPath.replace(/^\.\//,""),importContents,cssPrefix),importList.push(fullImportFileName),importContents)}catch(e){return logger.warn(fileName+"\n  Cannot inline css import, skipping: "+importFileName),fullMatch}}),cssPrefix&&topLevel&&(fileContents=fixCssUrlPaths(fileName,"",fileContents,cssPrefix)),{importList:importList,skippedList:skippedList,fileContents:fileContents}}(fileName,originalFileContents,config.cssImportIgnore,config.cssPrefix,{},!0),fileContents=flat.skippedList.length?originalFileContents:flat.fileContents;flat.skippedList.length&&logger.warn("Cannot inline @imports for "+fileName+",\nthe following files had media queries in them:\n"+flat.skippedList.join("\n"));try{if(-1===config.optimizeCss.indexOf(".keepComments"))for(startIndex=0;-1!==(startIndex=fileContents.indexOf("/*",startIndex));){if(-1===(endIndex=fileContents.indexOf("*/",startIndex+2)))throw"Improper comment in CSS file: "+fileName;comment=fileContents.substring(startIndex,endIndex),startIndex=!config.preserveLicenseComments||-1===comment.indexOf("license")&&-1===comment.indexOf("opyright")&&-1===comment.indexOf("(c)")?(fileContents=fileContents.substring(0,startIndex)+fileContents.substring(endIndex+2,fileContents.length),0):endIndex}fileContents=-1===config.optimizeCss.indexOf(".keepLines")?(fileContents=(fileContents=(fileContents=fileContents.replace(/[\r\n]/g," ")).replace(/\s+/g," ")).replace(/\{\s/g,"{")).replace(/\s\}/g,"}"):(fileContents=fileContents.replace(/(\r\n)+/g,"\r\n")).replace(/(\n)+/g,"\n"),-1===config.optimizeCss.indexOf(".keepWhitespace")&&(fileContents=(fileContents=(fileContents=(fileContents=(fileContents=(fileContents=fileContents.replace(/^[ \t]+/gm,"")).replace(/[ \t]+$/gm,"")).replace(/(;|:|\{|}|,)[ \t]+/g,"$1")).replace(/[ \t]+(\{)/g,"$1")).replace(/([ \t])+/g,"$1")).replace(/^[ \t]*[\r\n]/gm,""))}catch(e){fileContents=originalFileContents,logger.error("Could not optimized CSS file: "+fileName+", error: "+e)}return file.saveUtf8File(outFileName,fileContents),buildText="\n"+outFileName.replace(config.dir,"")+"\n----------------\n",flat.importList.push(fileName),buildText+=flat.importList.map(function(path){return path.replace(config.dir,"")}).join("\n"),{importList:flat.importList,buildText:buildText+"\n"}},css:function(startDir,config){var i,fileName,result,fileList,buildText="",importList=[],shouldRemove=config.dir&&config.removeCombined;if(-1!==config.optimizeCss.indexOf("standard")){if(fileList=file.getFilteredFileList(startDir,/\.css$/,!0))for(i=0;i<fileList.length;i++)fileName=fileList[i],logger.trace("Optimizing ("+config.optimizeCss+") CSS file: "+fileName),buildText+=(result=optimize.cssFile(fileName,fileName,config)).buildText,shouldRemove&&(result.importList.pop(),importList=importList.concat(result.importList));shouldRemove&&importList.forEach(function(path){file.exists(path)&&file.deleteFile(path)})}return buildText},optimizers:{uglify:function(fileName,fileContents,outFileName,keepLines,config){var result,existingMap,resultMap,uconfig={},existingMapPath=outFileName+".map",baseName=fileName&&fileName.split("/").pop();config=config||{},lang.mixin(uconfig,config,!0),uconfig.fromString=!0,config.preamble&&(uconfig.output={preamble:config.preamble}),config.generateSourceMaps&&(outFileName||config._buildSourceMap)&&(uconfig.outSourceMap=baseName+".map",config._buildSourceMap?(existingMap=JSON.parse(config._buildSourceMap),uconfig.inSourceMap=existingMap):file.exists(existingMapPath)&&(uconfig.inSourceMap=existingMapPath,existingMap=JSON.parse(file.readFile(existingMapPath)))),logger.trace("Uglify file: "+fileName);try{result=uglify.minify(fileContents,uconfig,baseName+".src.js"),uconfig.outSourceMap&&result.map?(resultMap=result.map,existingMap||config._buildSourceMap||file.saveFile(outFileName+".src.js",fileContents),fileContents=result.code,config._buildSourceMap?config._buildSourceMap=resultMap:file.saveFile(outFileName+".map",resultMap)):fileContents=result.code}catch(e){var errorString=e.toString(),isSyntaxError=/SyntaxError/.test(errorString);throw new Error("Cannot uglify file: "+fileName+". Skipping it. Error is:\n"+errorString+(isSyntaxError?"\n\nIf the source uses ES2015 or later syntax, please pass \"optimize: 'none'\" to r.js and use an ES2015+ compatible minifier after running r.js. The included UglifyJS only understands ES5 or earlier syntax.":""))}return fileContents}}}}),define("requirePatch",["env!env/file","pragma","parse","lang","logger","commonJs","prim"],function(file,pragma,parse,lang,logger,commonJs,prim){var allowRun=!0,hasProp=lang.hasProp,falseProp=lang.falseProp,getOwn=lang.getOwn,useStrictRegExp=/['"]use strict['"];/g,absoluteUrlRegExp=/^[\/\\]|^\w:/;return prim.hideResolutionConflict=!0,function(){if(allowRun){allowRun=!1;var layer,pluginBuilderRegExp=/(["']?)pluginBuilder(["']?)\s*[=\:]\s*["']([^'"\s]+)["']/,oldNewContext=require.s.newContext,oldDef,exports,module;require._cacheReset=function(){require._cachedRawText={},require._cachedFileContents={},require._cachedDefinesRequireUrls={}},require._cacheReset(),require._isSupportedBuildUrl=function(url){return-1===url.indexOf("://")&&-1===url.indexOf("?")&&0!==url.indexOf("empty:")&&0!==url.indexOf("//")||(layer.ignoredUrls[url]||(-1===url.indexOf("empty:")&&logger.info("Cannot optimize network URL, skipping: "+url),layer.ignoredUrls[url]=!0),!1)},require.s.newContext=function(name){var context=oldNewContext(name),oldEnable=context.enable,moduleProto=context.Module.prototype,oldInit=moduleProto.init,oldCallPlugin=moduleProto.callPlugin;return"_"===name&&(context.nextTick=function(fn){fn()},context.needFullExec={},context.fullExec={},context.plugins={},context.buildShimExports={},context.makeShimExports=function(value){return context.config.wrapShim?function(){var str="return ";return value.exports&&-1===value.exports.indexOf(".")&&(str+="root."+value.exports+" = "),value.init&&(str+="("+value.init.toString().replace(useStrictRegExp,"")+".apply(this, arguments))"),value.init&&value.exports&&(str+=" || "),value.exports&&(str+=value.exports),str+=";"}:function(){return"(function (global) {\n    return function () {\n        var ret, fn;\n"+(value.init?"       fn = "+value.init.toString().replace(useStrictRegExp,"")+";\n        ret = fn.apply(global, arguments);\n":"")+(value.exports?"        return ret || global."+value.exports+";\n":"        return ret;\n")+"    };\n}(this))"}},context.enable=function(depMap,parent){var id=depMap.id,parentId=parent&&parent.map.id,needFullExec=context.needFullExec,fullExec=context.fullExec,mod=getOwn(context.registry,id);return mod&&!mod.defined?parentId&&getOwn(needFullExec,parentId)&&(needFullExec[id]=depMap):(getOwn(needFullExec,id)&&falseProp(fullExec,id)||parentId&&getOwn(needFullExec,parentId)&&falseProp(fullExec,id))&&context.require.undef(id),oldEnable.apply(context,arguments)},context.load=function(moduleName,url){var contents,pluginBuilderMatch,builderName,shim,shimExports;0===url.indexOf("empty:")&&delete context.urlFetched[url],require._isSupportedBuildUrl(url)?(url=normalizeUrlWithBase(context,moduleName,url),layer.buildPathMap[moduleName]=url,layer.buildFileToModule[url]=moduleName,hasProp(context.plugins,moduleName)&&(context.needFullExec[moduleName]=!0),prim().start(function(){if(!hasProp(require._cachedFileContents,url)||!falseProp(context.needFullExec,moduleName)&&!getOwn(context.fullExec,moduleName))return require._cacheReadAsync(url).then(function(text){contents=text,!context.config.cjsTranslate||context.config.shim&&lang.hasProp(context.config.shim,moduleName)||(contents=commonJs.convert(url,contents)),context.config.onBuildRead&&(contents=context.config.onBuildRead(moduleName,url,contents)),contents=pragma.process(url,contents,context.config,"OnExecute");try{!layer.existingRequireUrl&&parse.definesRequire(url,contents)&&(layer.existingRequireUrl=url,require._cachedDefinesRequireUrls[url]=!0)}catch(e1){throw new Error("Parse error using esprima for file: "+url+"\n"+e1)}}).then(function(){return hasProp(context.plugins,moduleName)&&(pluginBuilderMatch=pluginBuilderRegExp.exec(contents))?(builderName=context.makeModuleMap(pluginBuilderMatch[3],context.makeModuleMap(moduleName),null,!0).id,require._cacheReadAsync(context.nameToUrl(builderName))):contents}).then(function(text){contents=text;try{falseProp(context.needFullExec,moduleName)&&(contents=parse(moduleName,url,contents,{insertNeedsDefine:!0,has:context.config.has,findNestedDependencies:context.config.findNestedDependencies}))}catch(e2){throw new Error("Parse error using esprima for file: "+url+"\n"+e2)}require._cachedFileContents[url]=contents});contents=require._cachedFileContents[url],!layer.existingRequireUrl&&require._cachedDefinesRequireUrls[url]&&(layer.existingRequireUrl=url)}).then(function(){contents&&eval(contents);try{getOwn(context.needFullExec,moduleName)&&(shim=getOwn(context.config.shim,moduleName),shim&&shim.exports&&(shimExports=eval(shim.exports),void 0!==shimExports&&(context.buildShimExports[moduleName]=shimExports))),context.completeLoad(moduleName)}catch(e){throw e.moduleTree||(e.moduleTree=[]),e.moduleTree.push(moduleName),e}}).then(null,function(eOuter){throw eOuter.fileName||(eOuter.fileName=url),eOuter}).end()):context.completeLoad(moduleName)},context.execCb=function(name,cb,args,exports){var buildShimExports=getOwn(layer.context.buildShimExports,name);return buildShimExports||(cb.__requireJsBuild||getOwn(layer.context.needFullExec,name)?cb.apply(exports,args):void 0)},moduleProto.init=function(depMaps){return context.needFullExec[this.map.id]&&lang.each(depMaps,lang.bind(this,function(depMap){"string"==typeof depMap&&(depMap=context.makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!0)),context.fullExec[depMap.id]||context.require.undef(depMap.id)})),oldInit.apply(this,arguments)},moduleProto.callPlugin=function(){var map=this.map,pluginMap=context.makeModuleMap(map.prefix),pluginId=pluginMap.id,pluginMod=getOwn(context.registry,pluginId);return context.plugins[pluginId]=!0,context.needFullExec[pluginId]=map,!falseProp(context.fullExec,pluginId)||pluginMod&&!pluginMod.defined||context.require.undef(pluginMap.id),oldCallPlugin.apply(this,arguments)}),context},delete require.s.contexts._,require._buildReset=function(){var oldContext=require.s.contexts._;return delete require.s.contexts._,require({}),layer=require._layer={buildPathMap:{},buildFileToModule:{},buildFilePaths:[],pathAdded:{},modulesWithNames:{},needsDefine:{},existingRequireUrl:"",ignoredUrls:{},context:require.s.contexts._},oldContext},require._buildReset(),oldDef=define,define=function(name){return"string"==typeof name&&falseProp(layer.needsDefine,name)&&(layer.modulesWithNames[name]=!0),oldDef.apply(require,arguments)},define.amd=oldDef.amd,require._readFile=file.readFile,require._fileExists=function(path){return file.exists(path)},require.onResourceLoad=function(context,map){var url,id=map.id;context.plugins&&lang.hasProp(context.plugins,id)&&lang.eachProp(context.needFullExec,function(value,prop){if(!0!==value&&value.prefix===id&&value.unnormalized){var map=context.makeModuleMap(value.originalName,value.parentMap);context.needFullExec[map.id]=map}}),context.needFullExec&&getOwn(context.needFullExec,id)&&(context.fullExec[id]=map),map.prefix?falseProp(layer.pathAdded,id)&&(layer.buildFilePaths.push(id),layer.buildPathMap[id]=id,layer.buildFileToModule[id]=id,layer.modulesWithNames[id]=!0,layer.pathAdded[id]=!0):map.url&&require._isSupportedBuildUrl(map.url)&&(url=normalizeUrlWithBase(context,id,map.url),!layer.pathAdded[url]&&getOwn(layer.buildPathMap,id)&&(layer.buildFilePaths.push(url),layer.pathAdded[url]=!0))},require.needsDefine=function(moduleName){layer.needsDefine[moduleName]=!0}}function normalizeUrlWithBase(context,moduleName,url){return require.jsExtRegExp.test(moduleName)&&!absoluteUrlRegExp.test(url)&&(url=(context.config.dir||context.config.dirBaseUrl)+url),url}}}),define("commonJs",["env!env/file","parse"],function(file,parse){"use strict";var commonJs={useLog:!0,convertDir:function(commonJsPath,savePath){var fileList,i,fileName,convertedFileName,fileContents,jsFileRegExp=/\.js$/;if(fileList=file.getFilteredFileList(commonJsPath,/\w/,!0),commonJsPath=commonJsPath.replace(/\\/g,"/"),savePath=savePath.replace(/\\/g,"/"),"/"===commonJsPath.charAt(commonJsPath.length-1)&&(commonJsPath=commonJsPath.substring(0,commonJsPath.length-1)),"/"===savePath.charAt(savePath.length-1)&&(savePath=savePath.substring(0,savePath.length-1)),fileList&&fileList.length)for(i=0;i<fileList.length;i++)convertedFileName=(fileName=fileList[i]).replace(commonJsPath,savePath),jsFileRegExp.test(fileName)?(fileContents=file.readFile(fileName),fileContents=commonJs.convert(fileName,fileContents),file.saveUtf8File(convertedFileName,fileContents)):file.copyFile(fileName,convertedFileName,!0);else commonJs.useLog&&("convert"===commonJsPath?console.log("\n\n"+commonJs.convert(savePath,file.readFile(savePath))):console.log("No files to convert in directory: "+commonJsPath))},convert:function(fileName,fileContents){try{var preamble="",commonJsProps=parse.usesCommonJs(fileName,fileContents);if(parse.usesAmdOrRequireJs(fileName,fileContents)||!commonJsProps)return fileContents;(commonJsProps.dirname||commonJsProps.filename)&&(preamble='var __filename = module.uri || "", __dirname = __filename.substring(0, __filename.lastIndexOf("/") + 1); '),fileContents="define(function (require, exports, module) {"+preamble+fileContents+"\n});\n"}catch(e){return console.log("commonJs.convert: COULD NOT CONVERT: "+fileName+", so skipping it. Error was: "+e),fileContents}return fileContents}};return commonJs}),define("build",function(require){"use strict";var build,lang=require("lang"),prim=require("prim"),logger=require("logger"),file=require("env!env/file"),parse=require("parse"),optimize=require("optimize"),pragma=require("pragma"),transform=require("transform"),requirePatch=require("requirePatch"),env=require("env"),commonJs=require("commonJs"),SourceMapGenerator=require("source-map").SourceMapGenerator,hasProp=lang.hasProp,getOwn=lang.getOwn,falseProp=lang.falseProp,endsWithSemiColonRegExp=/;\s*$/,endsWithSlashRegExp=/[\/\\]$/,resourceIsModuleIdRegExp=/^[\w\/\\\.]+$/,deepCopyProps={layer:!0};function copyConfig(obj){return lang.deeplikeCopy(obj,deepCopyProps)}function makeBuildBaseConfig(){return{appDir:"",pragmas:{},paths:{},optimize:"uglify",optimizeCss:"standard.keepLines.keepWhitespace",inlineText:!0,isBuild:!0,optimizeAllPluginResources:!1,findNestedDependencies:!1,preserveLicenseComments:!0,writeBuildTxt:!0,waitSeconds:30,dirExclusionRegExp:file.dirExclusionRegExp,_buildPathToModuleIndex:{}}}function addSemiColon(text,config){return config.skipSemiColonInsertion||endsWithSemiColonRegExp.test(text)?text:text+";"}function endsWithSlash(dirName){return"/"!==dirName.charAt(dirName.length-1)&&(dirName+="/"),dirName}function endsWithNewLine(text){return"\n"!==text.charAt(text.length-1)&&(text+="\n"),text}function makeWriteFile(namespace,layer){function writeFile(name,contents){logger.trace("Saving plugin-optimized file: "+name),file.saveUtf8File(name,contents)}return writeFile.asModule=function(moduleName,fileName,contents){writeFile(fileName,build.toTransport(namespace,moduleName,fileName,contents,layer))},writeFile}function appendToFileContents(fileContents,singleContents,path,config,module,sourceMapGenerator){var refPath,sourceMapPath,resourcePath,pluginId,sourceMapLineNumber,lineCount,parts,i;if(sourceMapGenerator){for(refPath=config.out?config.baseUrl:module&&module._buildPath?module._buildPath:"",sourceMapPath=1===(parts=path.split("!")).length?build.makeRelativeFilePath(refPath,path):(pluginId=parts.shift(),resourcePath=parts.join("!"),resourceIsModuleIdRegExp.test(resourcePath)?build.makeRelativeFilePath(refPath,require.toUrl(resourcePath))+"!"+pluginId:path),sourceMapLineNumber=fileContents.split("\n").length-1,lineCount=singleContents.split("\n").length,i=1;i<=lineCount;i+=1)sourceMapGenerator.addMapping({generated:{line:sourceMapLineNumber+i,column:0},original:{line:i,column:0},source:sourceMapPath});sourceMapGenerator.setSourceContent(sourceMapPath,singleContents)}return fileContents+=singleContents}function stringDotToObj(result,name,value){var parts=name.split(".");parts.forEach(function(prop,i){i===parts.length-1?result[prop]=value:(falseProp(result,prop)&&(result[prop]={}),result=result[prop])})}function mixConfig(target,source,skipArrays){var prop,value,isArray,targetValue;for(prop in source)hasProp(source,prop)&&(value=source[prop],isArray=lang.isArray(value),"object"!=typeof value||!value||isArray||lang.isFunction(value)||lang.isRegExp(value)?isArray?skipArrays||(targetValue=target[prop],lang.isArray(targetValue)?target[prop]=targetValue.concat(value):target[prop]=value):target[prop]=value:"map"===prop?(target.map||(target.map={}),lang.deepMix(target.map,source.map)):target[prop]=lang.mixin({},target[prop],value,!0));lang.hasProp(target,"logLevel")&&logger.logLevel(target.logLevel)}function flattenWrapFile(config,keyName,absFilePath){var wrap=config.wrap,keyFileName=keyName+"File",keyMapName="__"+keyName+"Map";if("string"!=typeof wrap[keyName]&&wrap[keyFileName])wrap[keyName]="","string"==typeof wrap[keyFileName]&&(wrap[keyFileName]=[wrap[keyFileName]]),wrap[keyMapName]=[],wrap[keyFileName].forEach(function(fileName){var absPath=build.makeAbsPath(fileName,absFilePath),fileText=endsWithNewLine(file.readFile(absPath));wrap[keyMapName].push(function(fileContents,cfg,sourceMapGenerator){return appendToFileContents(fileContents,fileText,absPath,cfg,null,sourceMapGenerator)}),wrap[keyName]+=fileText});else if(null===wrap[keyName]||void 0===wrap[keyName])wrap[keyName]="";else{if("string"!=typeof wrap[keyName])throw new Error("wrap."+keyName+" or wrap."+keyFileName+" malformed");wrap[keyName]=endsWithNewLine(wrap[keyName]),wrap[keyMapName]=[function(fileContents,cfg,sourceMapGenerator){var absPath=build.makeAbsPath("config-wrap-"+keyName+"-default.js",absFilePath);return appendToFileContents(fileContents,wrap[keyName],absPath,cfg,null,sourceMapGenerator)}]}}function normalizeWrapConfig(config,absFilePath){try{config.wrap&&(!0===config.wrap?config.wrap={start:"(function () {\n",end:"}());",__startMap:[function(fileContents,cfg,sourceMapGenerator){return appendToFileContents(fileContents,"(function () {\n",build.makeAbsPath("config-wrap-start-default.js",absFilePath),cfg,null,sourceMapGenerator)}],__endMap:[function(fileContents,cfg,sourceMapGenerator){return appendToFileContents(fileContents,"}());",build.makeAbsPath("config-wrap-end-default.js",absFilePath),cfg,null,sourceMapGenerator)}]}:(flattenWrapFile(config,"start",absFilePath),flattenWrapFile(config,"end",absFilePath)))}catch(wrapError){throw new Error("Malformed wrap config: "+wrapError.toString())}}return prim.nextTick=function(fn){fn()},require=requirejs,require._cacheReadAsync=function(path,encoding){var d;return lang.hasProp(require._cachedRawText,path)?((d=prim()).resolve(require._cachedRawText[path]),d.promise):file.readFileAsync(path,encoding).then(function(text){return require._cachedRawText[path]=text})},build=function(args){var buildFile,cmdConfig,errorMsg,errorStack,stackMatch,errorTree,i,j,errorMod,stackRegExp=/( {4}at[^\n]+)\n/;return prim().start(function(){if(!args||lang.isArray(args)){if(!args||args.length<1)return void logger.error("build.js buildProfile.js\nwhere buildProfile.js is the name of the build file (see example.build.js for hints on how to make a build file).");-1===args[0].indexOf("=")&&(buildFile=args[0],args.splice(0,1)),(cmdConfig=build.convertArrayToObject(args)).buildFile=buildFile}else cmdConfig=args;return build._run(cmdConfig)}).then(null,function(e){var err;if(errorMsg=e.toString(),errorTree=e.moduleTree,(stackMatch=stackRegExp.exec(errorMsg))&&(errorMsg+=errorMsg.substring(0,stackMatch.index+stackMatch[0].length+1)),errorTree&&0<errorTree.length){for(errorMsg+="\nIn module tree:\n",i=errorTree.length-1;-1<i;i--)if(errorMod=errorTree[i]){for(j=errorTree.length-i;-1<j;j--)errorMsg+="  ";errorMsg+=errorMod+"\n"}logger.error(errorMsg)}throw errorStack=e.stack,"string"==typeof args&&-1!==args.indexOf("stacktrace=true")?errorMsg+="\n"+errorStack:!stackMatch&&errorStack&&(stackMatch=stackRegExp.exec(errorStack))&&(errorMsg+="\n"+stackMatch[0]||""),(err=new Error(errorMsg)).originalError=e,err})},build._run=function(cmdConfig){var buildPaths,fileName,paths,i,baseConfig,config,modules,srcPath,buildContext,destPath,moduleMap,parentModuleMap,context,resources,resource,plugin,fileContents,pluginProcessed={},buildFileContents="",pluginCollector={};return prim().start(function(){var prop;if(requirePatch(),config=build.createConfig(cmdConfig),paths=config.paths,config.dir&&!config.keepBuildDir&&file.exists(config.dir)&&file.deleteFile(config.dir),!config.out&&!config.cssIn)if(file.copyDir(config.appDir||config.baseUrl,config.dir,/\w/,!0),buildPaths={},config.appDir)for(prop in paths)hasProp(paths,prop)&&(buildPaths[prop]=paths[prop].replace(config.appDir,config.dir));else for(prop in paths)hasProp(paths,prop)&&(0===paths[prop].indexOf(config.baseUrl)?buildPaths[prop]=paths[prop].replace(config.baseUrl,config.dirBaseUrl):(buildPaths[prop]="empty:"===paths[prop]?"empty:":prop,0!==(srcPath=paths[prop]).indexOf("/")&&-1===srcPath.indexOf(":")&&(srcPath=config.baseUrl+srcPath),destPath=config.dirBaseUrl+buildPaths[prop],"empty:"!==srcPath&&(file.exists(srcPath)&&file.isDirectory(srcPath)?file.copyDir(srcPath,destPath,/\w/,!0):(srcPath+=".js",destPath+=".js",file.copyFile(srcPath,destPath)))));require({baseUrl:config.baseUrl,paths:paths,packagePaths:config.packagePaths,packages:config.packages}),buildContext=require.s.contexts._,(modules=config.modules)&&modules.forEach(function(module){if(module.name&&(module._sourcePath=buildContext.nameToUrl(module.name),!(file.exists(module._sourcePath)||module.create||-1!==module.name.indexOf("!")||config.rawText&&lang.hasProp(config.rawText,module.name))))throw new Error("ERROR: module path does not exist: "+module._sourcePath+" for module named: "+module.name+". Path is relative to: "+file.absPath("."))}),config.out?(require(config),config.cssIn||(config.modules[0]._buildPath="function"==typeof config.out?"FUNCTION":config.out)):config.cssIn||(baseConfig={baseUrl:config.dirBaseUrl,paths:buildPaths},lang.mixin(baseConfig,config),require(baseConfig),modules&&modules.forEach(function(module){if(module.name){if(module._buildPath=buildContext.nameToUrl(module.name,null),module._buildPath===module._sourcePath&&!config.allowSourceOverwrites)throw new Error("Module ID '"+module.name+"' has a source path that is same as output path: "+module._sourcePath+". Stopping, config is malformed.");module.create||config.rawText&&lang.hasProp(config.rawText,module.name)||file.copyFile(module._sourcePath,module._buildPath)}})),config.optimizeCss&&"none"!==config.optimizeCss&&config.dir&&(buildFileContents+=optimize.css(config.dir,config))}).then(function(){baseConfig=copyConfig(require.s.contexts._.config)}).then(function(){var actions=[];if(modules)return actions=modules.map(function(module,i){return function(){return config._buildPathToModuleIndex[file.normalize(module._buildPath)]=i,build.traceDependencies(module,config,baseConfig).then(function(layer){module.layer=layer})}}),prim.serial(actions)}).then(function(){var actions;if(modules)return actions=modules.map(function(module){return function(){if(module.exclude)return module.excludeLayers=[],prim.serial(module.exclude.map(function(exclude,i){return function(){var found=build.findBuildModule(exclude,modules);if(!found)return build.traceDependencies({name:exclude},config,baseConfig).then(function(layer){module.excludeLayers[i]={layer:layer}});module.excludeLayers[i]=found}}))}}),prim.serial(actions)}).then(function(){if(modules)return prim.serial(modules.map(function(module){return function(){return module.exclude&&module.exclude.forEach(function(excludeModule,i){var excludeLayer=module.excludeLayers[i].layer,map=excludeLayer.buildFileToModule;excludeLayer.buildFilePaths.forEach(function(filePath){build.removeModulePath(map[filePath],filePath,module.layer)})}),module.excludeShallow&&module.excludeShallow.forEach(function(excludeShallowModule){var path=getOwn(module.layer.buildPathMap,excludeShallowModule);path&&build.removeModulePath(excludeShallowModule,path,module.layer)}),build.flattenModule(module,module.layer,config).then(function(builtModule){var finalText;"FUNCTION"===module._buildPath?(module._buildText=builtModule.text,module._buildSourceMap=builtModule.sourceMap):(finalText=builtModule.text,builtModule.sourceMap&&(finalText+="\n//# sourceMappingURL="+module._buildPath.split("/").pop()+".map",file.saveUtf8File(module._buildPath+".map",builtModule.sourceMap)),file.saveUtf8File(module._buildPath+"-temp",finalText)),buildFileContents+=builtModule.buildText})}}))}).then(function(){var moduleName,outOrigSourceMap,bundlesConfig={},bundlesConfigOutFile=config.bundlesConfigOutFile;if(modules&&(modules.forEach(function(module){var entryConfig,finalPath=module._buildPath;if("FUNCTION"!==finalPath){if(file.exists(finalPath)&&file.deleteFile(finalPath),file.renameFile(finalPath+"-temp",finalPath),bundlesConfigOutFile){entryConfig=bundlesConfig[module.name]=[];var bundleContents=file.readFile(finalPath),excludeMap={};excludeMap[module.name]=!0;var parsedIds=parse.getAllNamedDefines(bundleContents,excludeMap);entryConfig.push.apply(entryConfig,parsedIds)}config.removeCombined&&!config.out&&module.layer.buildFilePaths.forEach(function(path){var isLayer=modules.some(function(mod){return mod._buildPath===path}),relPath=build.makeRelativeFilePath(config.dir,path);file.exists(path)&&!isLayer&&0!==relPath.indexOf("..")&&file.deleteFile(path)})}config.onModuleBundleComplete&&config.onModuleBundleComplete(module.onCompleteData)}),bundlesConfigOutFile)){var text=file.readFile(bundlesConfigOutFile);text=transform.modifyConfig(text,function(config){return config.bundles||(config.bundles={}),lang.eachProp(bundlesConfig,function(value,prop){config.bundles[prop]=value}),config}),file.saveUtf8File(bundlesConfigOutFile,text)}if(config.removeCombined&&!config.out&&config.dir&&file.deleteEmptyDirs(config.dir),config.out&&!config.cssIn)"FUNCTION"===(fileName=config.modules[0]._buildPath)?(outOrigSourceMap=config.modules[0]._buildSourceMap,config._buildSourceMap=outOrigSourceMap,config.modules[0]._buildText=optimize.js((config.modules[0].name||config.modules[0].include[0]||fileName)+".build.js",config.modules[0]._buildText,null,config),config._buildSourceMap&&config._buildSourceMap!==outOrigSourceMap&&(config.modules[0]._buildSourceMap=config._buildSourceMap,config._buildSourceMap=null)):optimize.jsFile(fileName,null,fileName,config);else if(!config.cssIn){for(moduleName in file.getFilteredFileList(config.dir,/\.js$/,!0).forEach(function(fileName){var cfg,override,moduleIndex;moduleName=(moduleName=fileName.replace(config.dir,"")).substring(0,moduleName.length-3),(-1<(moduleIndex=0===(moduleIndex=getOwn(config._buildPathToModuleIndex,fileName))||0<moduleIndex?moduleIndex:-1)||!config.skipDirOptimize||"all"===config.normalizeDirDefines||config.cjsTranslate)&&(fileContents=file.readFile(fileName),!config.cjsTranslate||config.shim&&lang.hasProp(config.shim,moduleName)||(fileContents=commonJs.convert(fileName,fileContents)),-1===moduleIndex&&(config.onBuildRead&&(fileContents=config.onBuildRead(moduleName,fileName,fileContents)),"all"===config.normalizeDirDefines&&(fileContents=build.toTransport(config.namespace,null,fileName,fileContents)),config.onBuildWrite&&(fileContents=config.onBuildWrite(moduleName,fileName,fileContents))),cfg=(override=-1<moduleIndex?config.modules[moduleIndex].override:null)?build.createOverrideConfig(config,override):config,(-1<moduleIndex||!config.skipDirOptimize)&&optimize.jsFile(fileName,fileContents,fileName,cfg,pluginCollector))}),context=require.s.contexts._,pluginCollector)if(hasProp(pluginCollector,moduleName))for(parentModuleMap=context.makeModuleMap(moduleName),resources=pluginCollector[moduleName],i=0;i<resources.length;i++){if(resource=resources[i],moduleMap=context.makeModuleMap(resource,parentModuleMap),falseProp(context.plugins,moduleMap.prefix)){if(context.plugins[moduleMap.prefix]=!0,!file.exists(require.toUrl(moduleMap.prefix+".js")))continue;context.require([moduleMap.prefix]),moduleMap=context.makeModuleMap(resource,parentModuleMap)}falseProp(pluginProcessed,moduleMap.id)&&((plugin=getOwn(context.defined,moduleMap.prefix))&&plugin.writeFile&&plugin.writeFile(moduleMap.prefix,moduleMap.name,require,makeWriteFile(config.namespace),context.config),pluginProcessed[moduleMap.id]=!0)}config.writeBuildTxt&&file.saveUtf8File(config.dir+"build.txt",buildFileContents)}return config.cssIn&&(buildFileContents+=optimize.cssFile(config.cssIn,config.out,config).buildText),"function"==typeof config.out&&config.out(config.modules[0]._buildText,config.modules[0]._buildSourceMap),buildFileContents?(logger.info(buildFileContents),buildFileContents):""})},build.objProps={paths:!0,wrap:!0,pragmas:!0,pragmasOnSave:!0,has:!0,hasOnSave:!0,uglify:!0,uglify2:!0,closure:!0,map:!0,throwWhen:!0,rawText:!0},build.hasDotPropMatch=function(prop){var dotProp,index=prop.indexOf(".");return-1!==index&&(dotProp=prop.substring(0,index),hasProp(build.objProps,dotProp))},build.convertArrayToObject=function(ary){var i,separatorIndex,prop,value,result={},needArray={include:!0,exclude:!0,excludeShallow:!0,insertRequire:!0,stubModules:!0,deps:!0,mainConfigFile:!0,"wrap.startFile":!0,"wrap.endFile":!0};for(i=0;i<ary.length;i++){if(-1===(separatorIndex=ary[i].indexOf("=")))throw"Malformed name/value pair: ["+ary[i]+"]. Format should be name=value";"true"===(value=ary[i].substring(separatorIndex+1,ary[i].length))?value=!0:"false"===value&&(value=!1),prop=ary[i].substring(0,separatorIndex),getOwn(needArray,prop)&&(value=value.split(",")),build.hasDotPropMatch(prop)?stringDotToObj(result,prop,value):result[prop]=value}return result},build.makeAbsPath=function(path,absFilePath){return absFilePath?(0!==path.indexOf("/")&&-1===path.indexOf(":")&&(path=absFilePath+("/"===absFilePath.charAt(absFilePath.length-1)?"":"/")+path,path=file.normalize(path)),path.replace(lang.backSlashRegExp,"/")):path},build.makeAbsObject=function(props,obj,absFilePath){var i,prop;if(obj)for(i=0;i<props.length;i++)prop=props[i],hasProp(obj,prop)&&"string"==typeof obj[prop]&&(obj[prop]=build.makeAbsPath(obj[prop],absFilePath))},build.makeAbsConfig=function(config,absFilePath){var props,prop,i;for(props=["appDir","dir","baseUrl"],i=0;i<props.length;i++)getOwn(config,prop=props[i])&&("baseUrl"===prop?(config.originalBaseUrl=config.baseUrl,config.appDir?config.baseUrl=build.makeAbsPath(config.originalBaseUrl,config.appDir):config.baseUrl=build.makeAbsPath(config[prop],absFilePath)):config[prop]=build.makeAbsPath(config[prop],absFilePath),config[prop]=endsWithSlash(config[prop]));build.makeAbsObject("stdout"===config.out?["cssIn"]:["out","cssIn"],config,absFilePath),build.makeAbsObject(["startFile","endFile"],config.wrap,absFilePath),build.makeAbsObject(["externExportsPath"],config.closure,absFilePath)},build.makeRelativeFilePath=function(refPath,targetPath){var i,dotLength,finalParts,length,targetParts,targetName,refParts=refPath.split("/"),hasEndSlash=endsWithSlashRegExp.test(targetPath),dotParts=[];for(targetPath=file.normalize(targetPath),hasEndSlash&&!endsWithSlashRegExp.test(targetPath)&&(targetPath+="/"),targetName=(targetParts=targetPath.split("/")).pop(),refParts.pop(),length=refParts.length,i=0;i<length&&refParts[i]===targetParts[i];i+=1);for(finalParts=targetParts.slice(i),dotLength=length-i,i=0;-1<i&&i<dotLength;i+=1)dotParts.push("..");return dotParts.join("/")+(dotParts.length?"/":"")+finalParts.join("/")+(finalParts.length?"/":"")+targetName},build.nestedMix={paths:!0,has:!0,hasOnSave:!0,pragmas:!0,pragmasOnSave:!0},build.createConfig=function(cfg){var buildFileContents,buildFileConfig,mainConfig,mainConfigFile,mainConfigPath,buildFile,absFilePath,config={},buildBaseConfig=makeBuildBaseConfig();if(absFilePath=file.absPath("."),build.makeAbsConfig(cfg,absFilePath),build.makeAbsConfig(buildBaseConfig,absFilePath),lang.mixin(config,buildBaseConfig),lang.mixin(config,cfg,!0),lang.hasProp(config,"logLevel")&&logger.logLevel(config.logLevel),config.buildFile){if(buildFile=file.absPath(config.buildFile),!file.exists(buildFile))throw new Error("ERROR: build file does not exist: "+buildFile);absFilePath=config.baseUrl=file.absPath(file.parent(buildFile)),buildFileContents=file.readFile(buildFile);try{buildFileContents=buildFileContents.replace(/\/\/\#[^\n\r]+[\n\r]*$/,"").trim().replace(/;$/,""),buildFileConfig=eval("("+buildFileContents+")"),build.makeAbsConfig(buildFileConfig,absFilePath),mixConfig(config,buildFileConfig)}catch(e){throw new Error("Build file "+buildFile+" is malformed: "+e)}}if(mainConfigFile=config.mainConfigFile||buildFileConfig&&buildFileConfig.mainConfigFile,mainConfigFile&&("string"==typeof mainConfigFile&&(mainConfigFile=[mainConfigFile]),mainConfigFile.forEach(function(configFile){if(configFile=build.makeAbsPath(configFile,absFilePath),!file.exists(configFile))throw new Error(configFile+" does not exist.");try{mainConfig=parse.findConfig(file.readFile(configFile)).config}catch(configError){throw new Error("The config in mainConfigFile "+configFile+" cannot be used because it cannot be evaluated correctly while running in the optimizer. Try only using a config that is also valid JSON, or do not use mainConfigFile and instead copy the config values needed into a build file or command line arguments given to the optimizer.\nSource error from parsing: "+configFile+": "+configError)}mainConfig&&(mainConfigPath=configFile.substring(0,configFile.lastIndexOf("/")),config.appDir&&!mainConfig.appDir&&(mainConfig.appDir=config.appDir),mainConfig.baseUrl||(mainConfig.baseUrl=mainConfigPath),build.makeAbsConfig(mainConfig,mainConfigPath),mixConfig(config,mainConfig))})),buildFileConfig&&mixConfig(config,buildFileConfig,!0),mixConfig(config,cfg,!0),lang.eachProp(config.paths,function(value,prop){if(lang.isArray(value))throw new Error("paths fallback not supported in optimizer. Please provide a build config path override for "+prop);config.paths[prop]=build.makeAbsPath(value,config.baseUrl)}),hasProp(config,"baseUrl")){if(config.appDir){if(!config.originalBaseUrl)throw new Error("Please set a baseUrl in the build config");config.dirBaseUrl=build.makeAbsPath(config.originalBaseUrl,config.dir)}else config.dirBaseUrl=config.dir||config.baseUrl;config.dirBaseUrl=endsWithSlash(config.dirBaseUrl)}if(config.bundlesConfigOutFile){if(!config.dir)throw new Error('bundlesConfigOutFile can only be used with optimizations that use "dir".');config.bundlesConfigOutFile=build.makeAbsPath(config.bundlesConfigOutFile,config.dir)}if(config.out&&"stdout"===config.out&&(config.out=function(content){var e=env.get();"rhino"===e?new java.io.PrintStream(java.lang.System.out,!0,"UTF-8").println(content):"node"===e?process.stdout.write(content,"utf8"):console.log(content)}),config.main)throw new Error('"main" passed as an option, but the supported option is called "name".');if(config.out&&!config.name&&!config.modules&&!config.include&&!config.cssIn)throw new Error('Missing either a "name", "include" or "modules" option');if(config.cssIn){if(config.dir||config.appDir)throw new Error('cssIn is only for the output of single file CSS optimizations and is not compatible with "dir" or "appDir" configuration.');if(!config.out)throw new Error('"out" option missing.')}if(config.cssIn||config.baseUrl||(config.baseUrl="./"),!config.out&&!config.dir)throw new Error('Missing either an "out" or "dir" config value. If using "appDir" for a full project optimization, use "dir". If you want to optimize to one file, use "out".');if(config.appDir&&config.out)throw new Error('"appDir" is not compatible with "out". Use "dir" instead. appDir is used to copy whole projects, where "out" with "baseUrl" is used to just optimize to one file.');if(config.out&&config.dir)throw new Error('The "out" and "dir" options are incompatible. Use "out" if you are targeting a single file for optimization, and "dir" if you want the appDir or baseUrl directories optimized.');if(config.dir&&!config.allowSourceOverwrites&&(config.dir===config.baseUrl||config.dir===config.appDir||config.baseUrl&&0!==build.makeRelativeFilePath(config.dir,config.baseUrl).indexOf("..")||config.appDir&&0!==build.makeRelativeFilePath(config.dir,config.appDir).indexOf("..")))throw new Error('"dir" is set to a parent or same directory as "appDir" or "baseUrl". This can result in the deletion of source code. Stopping. If you want to allow possible overwriting of source code, set "allowSourceOverwrites" to true in the build config, but do so at your own risk. In that case, you may want to also set "keepBuildDir" to true.');if(config.insertRequire&&!lang.isArray(config.insertRequire))throw new Error("insertRequire should be a list of module IDs to insert in to a require([]) call.");if("uglify2"===config.optimize&&(config.optimize="uglify"),config.uglify2&&(config.uglify=config.uglify2,delete config.uglify2),config.generateSourceMaps){if(config.preserveLicenseComments&&"none"!==config.optimize&&"uglify"!==config.optimize)throw new Error("Cannot use preserveLicenseComments and generateSourceMaps together, unless optimize is set to 'uglify'. Either explicitly set preserveLicenseComments to false (default is true) or turn off generateSourceMaps. If you want source maps with license comments, see: http://requirejs.org/docs/errors.html#sourcemapcomments");if("none"!==config.optimize&&"closure"!==config.optimize&&"uglify"!==config.optimize)throw new Error('optimize: "'+config.optimize+'" does not support generateSourceMaps.')}if(!config.name&&!config.include||config.modules){if(config.modules&&config.out)throw new Error('If the "modules" option is used, then there should be a "dir" option set and "out" should not be used since "out" is only for single file optimization output.');if(config.modules&&config.name)throw new Error('"name" and "modules" options are incompatible. Either use "name" if doing a single file optimization, or "modules" if you want to target more than one file for optimization.')}else config.modules=[{name:config.name,out:config.out,create:config.create,include:config.include,exclude:config.exclude,excludeShallow:config.excludeShallow,insertRequire:config.insertRequire,stubModules:config.stubModules}],delete config.stubModules;if(config.out&&!config.cssIn&&(cfg.optimizeCss||(config.optimizeCss="none")),config.cssPrefix?config.cssPrefix=endsWithSlash(config.cssPrefix):config.cssPrefix="",config.modules&&config.modules.length&&config.modules.forEach(function(mod){if(lang.isArray(mod)||"string"==typeof mod||!mod)throw new Error("modules config item is malformed: it should be an object with a 'name' property.");config.stubModules&&(mod.stubModules=config.stubModules.concat(mod.stubModules||[])),mod.stubModules&&(mod.stubModules._byName={},mod.stubModules.forEach(function(id){mod.stubModules._byName[id]=!0})),"string"==typeof mod.include&&(mod.include=[mod.include]),mod.override&&normalizeWrapConfig(mod.override,absFilePath)}),normalizeWrapConfig(config,absFilePath),config.context)throw new Error('The build argument "context" is not supported in a build. It should only be used in web pages.');return hasProp(config,"normalizeDirDefines")||("none"===config.optimize||config.skipDirOptimize?config.normalizeDirDefines="skip":config.normalizeDirDefines="all"),hasProp(config,"fileExclusionRegExp")?"string"==typeof config.fileExclusionRegExp?file.exclusionRegExp=new RegExp(config.fileExclusionRegExp):file.exclusionRegExp=config.fileExclusionRegExp:hasProp(config,"dirExclusionRegExp")&&(file.exclusionRegExp=config.dirExclusionRegExp),config.deps&&(config._depsInclude=config.deps),delete config.deps,delete config.jQuery,delete config.enforceDefine,delete config.urlArgs,config},build.findBuildModule=function(moduleName,modules){var i,module;for(i=0;i<modules.length;i++)if((module=modules[i]).name===moduleName)return module;return null},build.removeModulePath=function(module,path,layer){var index=layer.buildFilePaths.indexOf(path);-1!==index&&layer.buildFilePaths.splice(index,1)},build.traceDependencies=function(module,config,baseLoaderConfig){var include,override,layer,context,rawTextByIds,syncChecks={rhino:!0,node:!0,xpconnect:!0},deferred=prim();function includeFinished(value){var hasError=!1;if(syncChecks[env.get()])try{build.checkForErrors(context,layer)}catch(e){hasError=!0,deferred.reject(e)}hasError||deferred.resolve(value)}return require._buildReset(),layer=require._layer,context=layer.context,baseLoaderConfig&&require(copyConfig(baseLoaderConfig)),logger.trace("\nTracing dependencies for: "+(module.name||("function"==typeof module.out?"FUNCTION":module.out))),include=(include=config._depsInclude||[]).concat(module.name&&!module.create?[module.name]:[]),module.include&&(include=include.concat(module.include)),module.override&&(override=baseLoaderConfig?build.createOverrideConfig(baseLoaderConfig,module.override):copyConfig(module.override),require(override)),(rawTextByIds=require.s.contexts._.config.rawText)&&lang.eachProp(rawTextByIds,function(contents,id){var url=require.toUrl(id)+".js";require._cachedRawText[url]=contents}),deferred.reject.__requireJsBuild=!0,includeFinished.__requireJsBuild=!0,require(include,includeFinished,deferred.reject),syncChecks[env.get()]&&build.checkForErrors(context,layer),deferred.promise.then(function(){return module.override&&baseLoaderConfig&&require(copyConfig(baseLoaderConfig)),build.checkForErrors(context,layer),layer})},build.checkForErrors=function(context,layer){var id,prop,mod,idParts,pluginId,errMessage="",failedPluginMap={},failedPluginIds=[],errIds=[],errUrlMap={},errUrlConflicts={},hasErrUrl=!1,hasUndefined=!1,defined=context.defined,registry=context.registry;function populateErrUrlMap(id,errUrl,skipNew){errUrl&&(skipNew||errIds.push(id),errUrlMap[errUrl]?(hasErrUrl=!0,errUrlConflicts[errUrl]||(errUrlConflicts[errUrl]=[],errUrlConflicts[errUrl].push(errUrlMap[errUrl])),errUrlConflicts[errUrl].push(id)):skipNew||(errUrlMap[errUrl]=id))}for(id in registry)hasProp(registry,id)&&0!==id.indexOf("_@r")&&(hasUndefined=!0,mod=getOwn(registry,id),pluginId=(idParts=id.split("!"))[0],-1===id.indexOf("_unnormalized")&&mod&&mod.enabled&&populateErrUrlMap(id,mod.map.url),!hasProp(layer.modulesWithNames,id)&&1<idParts.length&&(falseProp(failedPluginMap,pluginId)&&failedPluginIds.push(pluginId),(failedPluginMap[pluginId]||(failedPluginMap[pluginId]=[])).push(id+(mod.error?": "+mod.error:""))));if(hasUndefined)for(id in defined)hasProp(defined,id)&&-1===id.indexOf("!")&&populateErrUrlMap(id,require.toUrl(id)+".js",!0);if(errIds.length||failedPluginIds.length){if(failedPluginIds.length&&(errMessage+="Loader plugin"+(1===failedPluginIds.length?"":"s")+" did not call the load callback in the build:\n"+failedPluginIds.map(function(pluginId){return pluginId+":\n  "+failedPluginMap[pluginId].join("\n  ")}).join("\n")+"\n"),errMessage+="Module loading did not complete for: "+errIds.join(", "),hasErrUrl)for(prop in errMessage+="\nThe following modules share the same URL. This could be a misconfiguration if that URL only has one anonymous module in it:",errUrlConflicts)hasProp(errUrlConflicts,prop)&&(errMessage+="\n"+prop+": "+errUrlConflicts[prop].join(", "));throw new Error(errMessage)}},build.createOverrideConfig=function(config,override){var cfg=copyConfig(config),oride=copyConfig(override);return lang.eachProp(oride,function(value,prop){hasProp(build.objProps,prop)?(cfg[prop]={},lang.mixin(cfg[prop],config[prop],!0),lang.mixin(cfg[prop],override[prop],!0)):cfg[prop]=override[prop]}),cfg},build.flattenModule=function(module,layer,config){var fileContents,sourceMapGenerator,sourceMapBase,buildFileContents="";return prim().start(function(){var reqIndex,currContents,fileForSourceMap,moduleName,shim,packageName,parts,builder,writeApi,namespace,namespaceWithDot,stubModulesByName,context=layer.context,onLayerEnds=[],onLayerEndAdded={},pkgsMainMap={};return module.override&&(config=build.createOverrideConfig(config,module.override)),namespace=config.namespace||"",namespaceWithDot=namespace?namespace+".":"",stubModulesByName=module.stubModules&&module.stubModules._byName||{},module.onCompleteData={name:module.name,path:config.dir?module._buildPath.replace(config.dir,""):module._buildPath,included:[]},buildFileContents+="\n"+module.onCompleteData.path+"\n----------------\n",layer.existingRequireUrl&&-1!==(reqIndex=layer.buildFilePaths.indexOf(layer.existingRequireUrl))&&(layer.buildFilePaths.splice(reqIndex,1),layer.buildFilePaths.unshift(layer.existingRequireUrl)),config.generateSourceMaps&&(sourceMapBase=config.dir||config.baseUrl,fileForSourceMap="FUNCTION"===module._buildPath?(module.name||module.include[0]||"FUNCTION")+".build.js":config.out?module._buildPath.split("/").pop():module._buildPath.replace(sourceMapBase,""),sourceMapGenerator=new SourceMapGenerator({file:fileForSourceMap})),lang.eachProp(layer.context.config.pkgs,function(value,prop){pkgsMainMap[value]=prop}),fileContents="",config.wrap&&config.wrap.__startMap&&config.wrap.__startMap.forEach(function(wrapFunction){fileContents=wrapFunction(fileContents,config,sourceMapGenerator)}),prim.serial(layer.buildFilePaths.map(function(path){return function(){var singleContents="";return moduleName=layer.buildFileToModule[path],packageName=getOwn(pkgsMainMap,moduleName),prim().start(function(){return parts=context.makeModuleMap(moduleName),(builder=parts.prefix&&getOwn(context.defined,parts.prefix))?(builder.onLayerEnd&&falseProp(onLayerEndAdded,parts.prefix)&&(onLayerEnds.push(builder),onLayerEndAdded[parts.prefix]=!0),void(builder.write&&((writeApi=function(input){singleContents+="\n"+addSemiColon(input,config),config.onBuildWrite&&(singleContents=config.onBuildWrite(moduleName,path,singleContents))}).asModule=function(moduleName,input){singleContents+="\n"+addSemiColon(build.toTransport(namespace,moduleName,path,input,layer,{useSourceUrl:layer.context.config.useSourceUrl}),config),config.onBuildWrite&&(singleContents=config.onBuildWrite(moduleName,path,singleContents))},builder.write(parts.prefix,parts.name,writeApi,{name:module.onCompleteData.name,path:module.onCompleteData.path})))):prim().start(function(){return hasProp(stubModulesByName,moduleName)?hasProp(layer.context.plugins,moduleName)?'define({load: function(id){throw new Error("Dynamic load not allowed: " + id);}});':"define({});":require._cacheReadAsync(path)}).then(function(text){var hasPackageName;currContents=text,!config.cjsTranslate||config.shim&&lang.hasProp(config.shim,moduleName)||(currContents=commonJs.convert(path,currContents)),config.onBuildRead&&(currContents=config.onBuildRead(moduleName,path,currContents)),packageName&&(hasPackageName=packageName===parse.getNamedDefine(currContents)),namespace&&(currContents=pragma.namespace(currContents,namespace)),currContents=build.toTransport(namespace,moduleName,path,currContents,layer,{useSourceUrl:config.useSourceUrl}),packageName&&!hasPackageName&&(currContents=addSemiColon(currContents,config)+"\n",currContents+=namespaceWithDot+"define('"+packageName+"', ['"+moduleName+"'], function (main) { return main; });\n"),config.onBuildWrite&&(currContents=config.onBuildWrite(moduleName,path,currContents)),singleContents+=addSemiColon(currContents,config)})}).then(function(){var shimDeps,shortPath=path.replace(config.dir,"");module.onCompleteData.included.push(shortPath),buildFileContents+=shortPath+"\n",moduleName&&falseProp(layer.modulesWithNames,moduleName)&&!config.skipModuleInsertion&&((shim=config.shim&&(getOwn(config.shim,moduleName)||packageName&&getOwn(config.shim,packageName)))?(shimDeps=lang.isArray(shim)?shim:shim.deps,config.wrapShim?singleContents="(function(root) {\n"+namespaceWithDot+'define("'+moduleName+'", '+(shimDeps&&shimDeps.length?build.makeJsArrayString(shimDeps)+", ":"[], ")+"function() {\n  return (function() {\n"+singleContents+"\n"+(shim.exportsFn?shim.exportsFn():"")+"\n  }).apply(root, arguments);\n});\n}(this));\n":singleContents+="\n"+namespaceWithDot+'define("'+moduleName+'", '+(shimDeps&&shimDeps.length?build.makeJsArrayString(shimDeps)+", ":"")+(shim.exportsFn?shim.exportsFn():"function(){}")+");\n"):singleContents+="\n"+namespaceWithDot+'define("'+moduleName+'", function(){});\n'),fileContents=appendToFileContents(fileContents,singleContents+="\n",path,config,module,sourceMapGenerator)})}})).then(function(){onLayerEnds.length&&onLayerEnds.forEach(function(builder,index){var path;"string"==typeof module.out?path=module.out:"string"==typeof module._buildPath&&(path=module._buildPath),builder.onLayerEnd(function(input){fileContents=appendToFileContents(fileContents,"\n"+addSemiColon(input,config),"onLayerEnd"+index+".js",config,module,sourceMapGenerator)},{name:module.name,path:path})}),module.create&&(fileContents=appendToFileContents(fileContents,"\n"+namespaceWithDot+'define("'+module.name+'", function(){});\n',"module-create.js",config,module,sourceMapGenerator)),module.insertRequire&&(fileContents=appendToFileContents(fileContents,"\n"+namespaceWithDot+'require(["'+module.insertRequire.join('", "')+'"]);\n',"module-insertRequire.js",config,module,sourceMapGenerator))})}).then(function(){return config.wrap&&config.wrap.__endMap&&config.wrap.__endMap.forEach(function(wrapFunction){fileContents=wrapFunction(fileContents,config,sourceMapGenerator)}),{text:fileContents,buildText:buildFileContents,sourceMap:sourceMapGenerator?JSON.stringify(sourceMapGenerator.toJSON(),null,"  "):void 0}})},build.makeJsArrayString=function(ary){return'["'+ary.map(function(item){return lang.jsEscape(item)}).join('","')+'"]'},build.toTransport=function(namespace,moduleName,path,contents,layer,options){var baseUrl=layer&&layer.context.config.baseUrl;return baseUrl&&(path=path.replace(baseUrl,"")),transform.toTransport(namespace,moduleName,path,contents,function(info){layer&&(info.needsId||info.foundId===moduleName)&&(layer.modulesWithNames[moduleName]=!0)},options)},build})}function setBaseUrl(fileName){-1!==(dir=fileName.replace(/\\/g,"/")).indexOf("/")&&((dir=dir.split("/")).pop(),dir=dir.join("/"),exec("require({baseUrl: '"+dir.replace(/[\\"']/g,"\\$&")+"'});"))}function createRjsApi(){requirejs.optimize=function(config,callback,errback){loadedOptimizedLib||(loadLib(),loadedOptimizedLib=!0);requirejs({context:"build"},["build","logger","env!env/quit"],function(build,logger,quit){function done(result){if(requirejs._buildReset&&(requirejs._buildReset(),requirejs._cacheReset()),result instanceof Error)throw result;return result}config.logLevel=config.hasOwnProperty("logLevel")?config.logLevel:logger.SILENT,requirejs._buildReset&&(requirejs._buildReset(),requirejs._cacheReset()),errback=errback||function(err){console.log(err),quit(1)},build(config).then(done,done).then(callback,errback)})},requirejs.tools={useLib:function(contextName,callback){callback||(callback=contextName,contextName="uselib"),useLibLoaded[contextName]||(loadLib(),useLibLoaded[contextName]=!0);var req=requirejs({context:contextName});req(["build"],function(){callback(req)})}},requirejs.define=define}"undefined"!=typeof process&&process.versions&&process.versions.node?(env="node",fs=require("fs"),vm=require("vm"),path=require("path"),existsForNode=fs.existsSync||path.existsSync,nodeRequire=require,nodeDefine=define,reqMain=require.main,require=void 0,define=void 0,readFile=function(path){return fs.readFileSync(path,"utf8")},exec=function(string,name){return vm.runInThisContext(this.requirejsVars.require.makeNodeWrapper(string),name?fs.realpathSync(name):"")},exists=function(fileName){return existsForNode(fileName)},fileName=process.argv[2],fileName&&0===fileName.indexOf("-")&&(commandOption=fileName.substring(1),fileName=process.argv[3])):"undefined"!=typeof Packages?(env="rhino",fileName=args[0],fileName&&0===fileName.indexOf("-")&&(commandOption=fileName.substring(1),fileName=args[1]),"undefined"!=typeof importPackage?(rhinoContext=Packages.org.mozilla.javascript.ContextFactory.getGlobal().enterContext(),exec=function(string,name){return rhinoContext.evaluateString(this,string,name,0,null)}):(exec=function(string,name){load({script:string,name:name})},readFile=readFully),exists=function(fileName){return new java.io.File(fileName).exists()},void 0===console&&(console={log:function(){print.apply(void 0,arguments)}})):"undefined"!=typeof navigator&&"undefined"!=typeof document||"undefined"!=typeof importScripts&&"undefined"!=typeof self?(env="browser",readFile=function(path){return fs.readFileSync(path,"utf8")},exec=function(string){return eval(string)},exists=function(){return console.log("x.js exists not applicable in browser env"),!1}):"undefined"!=typeof Components&&Components.classes&&Components.interfaces&&(env="xpconnect",Components.utils.import("resource://gre/modules/FileUtils.jsm"),Cc=Components.classes,Ci=Components.interfaces,fileName=args[0],fileName&&0===fileName.indexOf("-")&&(commandOption=fileName.substring(1),fileName=args[1]),xpcUtil={isWindows:"@mozilla.org/windows-registry-key;1"in Cc,cwd:function(){return FileUtils.getFile("CurWorkD",[]).path},normalize:function(path){var i,part,ary,firstChar=path.charAt(0);for("/"!==firstChar&&"\\"!==firstChar&&-1===path.indexOf(":")&&(path=xpcUtil.cwd()+"/"+path),ary=path.replace(/\\/g,"/").split("/"),i=0;i<ary.length;i+=1)"."===(part=ary[i])?(ary.splice(i,1),--i):".."===part&&(ary.splice(i-1,2),i-=2);return ary.join("/")},xpfile:function(path){var fullPath;try{return fullPath=xpcUtil.normalize(path),xpcUtil.isWindows&&(fullPath=fullPath.replace(/\//g,"\\")),new FileUtils.File(fullPath)}catch(e){throw new Error((fullPath||path)+" failed: "+e)}},readFile:function(path,encoding){encoding=encoding||"utf-8";var inStream,convertStream,readData={},fileObj=xpcUtil.xpfile(path);try{return(inStream=Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream)).init(fileObj,1,0,!1),(convertStream=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream)).init(inStream,encoding,inStream.available(),Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),convertStream.readString(inStream.available(),readData),readData.value}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}finally{convertStream&&convertStream.close(),inStream&&inStream.close()}}},readFile=xpcUtil.readFile,exec=function(string){return eval(string)},exists=function(fileName){return xpcUtil.xpfile(fileName).exists()},void 0===console&&(console={log:function(){print.apply(void 0,arguments)}})),function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(match,singlePrefix){return singlePrefix||""}function isFunction(it){return"[object Function]"===ostring.call(it)}function isArray(it){return"[object Array]"===ostring.call(it)}function each(ary,func){var i;if(ary)for(i=0;i<ary.length&&(!ary[i]||!func(ary[i],i,ary));i+=1);}function eachReverse(ary,func){var i;if(ary)for(i=ary.length-1;-1<i&&(!ary[i]||!func(ary[i],i,ary));--i);}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function getOwn(obj,prop){return hasProp(obj,prop)&&obj[prop]}function eachProp(obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break}function mixin(target,source,force,deepStringMixin){return source&&eachProp(source,function(value,prop){!force&&hasProp(target,prop)||(!deepStringMixin||"object"!=typeof value||!value||isArray(value)||isFunction(value)||value instanceof RegExp?target[prop]=value:(target[prop]||(target[prop]={}),mixin(target[prop],value,force,deepStringMixin)))}),target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(err){throw err}function getGlobal(value){if(!value)return value;var g=global;return each(value.split("."),function(part){g=g[part]}),g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttps://requirejs.org/docs/errors.html#"+id);return e.requireType=id,e.requireModules=requireModules,err&&(e.originalError=err),e}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;return isArray(deps)||"string"==typeof deps||(config=deps,isArray(callback)?(deps=callback,callback=errback,errback=optional):deps=[]),config&&config.context&&(contextName=config.context),context=(context=getOwn(contexts,contextName))||(contexts[contextName]=req.s.newContext(contextName)),config&&context.configure(config),context.require(deps,callback,errback)},req.config=function(config){return req(config)},req.nextTick=void 0!==setTimeout?function(fn){setTimeout(fn,4)}:function(fn){fn()},require=require||req,req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(prop){req[prop]=function(){var ctx=contexts[defContextName];return ctx.require[prop].apply(ctx,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(config,moduleName,url){var node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return node.type=config.scriptType||"text/javascript",node.charset="utf-8",node.async=!0,node},req.load=function(context,moduleName,url){var node,config=context&&context.config||{};if(isBrowser)return(node=req.createNode(config,moduleName,url)).setAttribute("data-requirecontext",context.contextName),node.setAttribute("data-requiremodule",moduleName),!node.attachEvent||node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0||isOpera?(node.addEventListener("load",context.onScriptLoad,!1),node.addEventListener("error",context.onScriptError,!1)):(useInteractive=!0,node.attachEvent("onreadystatechange",context.onScriptLoad)),node.src=url,config.onNodeCreated&&config.onNodeCreated(node,config,moduleName,url),currentlyAddingScript=node,baseElement?head.insertBefore(node,baseElement):head.appendChild(node),currentlyAddingScript=null,node;if(isWebWorker)try{setTimeout(function(){},0),importScripts(url),context.completeLoad(moduleName)}catch(e){context.onError(makeError("importscripts","importScripts failed for "+moduleName+" at "+url,e,[moduleName]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(script){if(head=head||script.parentNode,dataMain=script.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(name,deps,callback){var node,context;"string"!=typeof name&&(callback=deps,deps=name,name=null),isArray(deps)||(callback=deps,deps=null),!deps&&isFunction(callback)&&(deps=[],callback.length&&(callback.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(match,dep){deps.push(dep)}),deps=(1===callback.length?["require"]:["require","exports","module"]).concat(deps))),useInteractive&&(node=currentlyAddingScript||getInteractiveScript())&&(name=name||node.getAttribute("data-requiremodule"),context=contexts[node.getAttribute("data-requirecontext")]),context?(context.defQueue.push([name,deps,callback]),context.defQueueMap[name]=!0):globalDefQueue.push([name,deps,callback])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(contextName){var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},registry={},enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},bundlesMap={},requireCounter=1,unnormalizedCounter=1;function normalize(name,baseName,applyMap){var mapValue,nameParts,i,j,nameSegment,lastIndex,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"];if(name&&(lastIndex=(name=name.split("/")).length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),"."===name[0].charAt(0)&&baseParts&&(name=baseParts.slice(0,baseParts.length-1).concat(name)),function(ary){var i,part;for(i=0;i<ary.length;i++)if("."===(part=ary[i]))ary.splice(i,1),--i;else if(".."===part){if(0===i||1===i&&".."===ary[2]||".."===ary[i-1])continue;0<i&&(ary.splice(i-1,2),i-=2)}}(name),name=name.join("/")),applyMap&&map&&(baseParts||starMap)){outerLoop:for(i=(nameParts=name.split("/")).length;0<i;--i){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;0<j;--j)if(mapValue=(mapValue=getOwn(map,baseParts.slice(0,j).join("/")))&&getOwn(mapValue,nameSegment)){foundMap=mapValue,foundI=i;break outerLoop}!foundStarMap&&starMap&&getOwn(starMap,nameSegment)&&(foundStarMap=getOwn(starMap,nameSegment),starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return getOwn(config.pkgs,name)||name}function removeScript(name){isBrowser&&each(scripts(),function(scriptNode){if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName)return scriptNode.parentNode.removeChild(scriptNode),!0})}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id);return pathConfig&&isArray(pathConfig)&&1<pathConfig.length&&(pathConfig.shift(),context.require.undef(id),context.makeRequire(null,{skipMap:!0})([id]),1)}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return-1<index&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=!0,normalizedName="";return name||(isDefine=!1,name="_@r"+(requireCounter+=1)),prefix=(nameParts=splitPrefix(name))[0],name=nameParts[1],prefix&&(prefix=normalize(prefix,parentName,applyMap),pluginModule=getOwn(defined,prefix)),name&&(prefix?normalizedName=isNormalized?name:pluginModule&&pluginModule.normalize?pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)}):-1===name.indexOf("!")?normalize(name,parentName,applyMap):name:(prefix=(nameParts=splitPrefix(normalizedName=normalize(name,parentName,applyMap)))[0],normalizedName=nameParts[1],isNormalized=!0,url=context.nameToUrl(normalizedName))),{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!(suffix=!prefix||pluginModule||isNormalized?"":"_unnormalized"+(unnormalizedCounter+=1)),url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=getOwn(registry,id);return mod=mod||(registry[id]=new context.Module(depMap))}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id);!hasProp(defined,id)||mod&&!mod.defineEmitComplete?(mod=getModule(depMap)).error&&"error"===name?fn(mod.error):mod.on(name,fn):"defined"===name&&fn(defined[id])}function onError(err,errback){var ids=err.requireModules,notified=!1;errback?errback(err):(each(ids,function(id){var mod=getOwn(registry,id);mod&&(mod.error=err,mod.events.error&&(notified=!0,mod.emit("error",err)))}),notified||req.onError(err))}function takeGlobalQueue(){globalDefQueue.length&&(each(globalDefQueue,function(queueItem){var id=queueItem[0];"string"==typeof id&&(context.defQueueMap[id]=!0),defQueue.push(queueItem)}),globalDefQueue=[])}function cleanRegistry(id){delete registry[id],delete enabledRegistry[id]}function checkLoaded(){var err,usingPathFallback,waitInterval=1e3*config.waitSeconds,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=!1,needCycleCheck=!0;if(!inCheckLoaded){if(inCheckLoaded=!0,eachProp(enabledRegistry,function(mod){var map=mod.map,modId=map.id;if(mod.enabled&&(map.isDefine||reqCalls.push(mod),!mod.error))if(!mod.inited&&expired)hasPathFallback(modId)?stillLoading=usingPathFallback=!0:(noLoads.push(modId),removeScript(modId));else if(!mod.inited&&mod.fetched&&map.isDefine&&(stillLoading=!0,!map.prefix))return needCycleCheck=!1}),expired&&noLoads.length)return(err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads)).contextName=context.contextName,onError(err);needCycleCheck&&each(reqCalls,function(mod){!function breakCycle(mod,traced,processed){var id=mod.map.id;mod.error?mod.emit("error",mod.error):(traced[id]=!0,each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId);!dep||mod.depMatched[i]||processed[depId]||(getOwn(traced,depId)?(mod.defineDep(i,defined[depId]),mod.check()):breakCycle(dep,traced,processed))}),processed[id]=!0)}(mod,{},{})}),expired&&!usingPathFallback||!stillLoading||!isBrowser&&!isWebWorker||checkLoadedTimeoutId||(checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0,checkLoaded()},50)),inCheckLoaded=!1}}function callGetModule(args){hasProp(defined,args[0])||getModule(makeModuleMap(args[0],null,!0)).init(args[1],args[2])}function removeListener(node,func,name,ieName){node.detachEvent&&!isOpera?ieName&&node.detachEvent(ieName,func):node.removeEventListener(name,func,!1)}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;return removeListener(node,context.onScriptLoad,"load","onreadystatechange"),removeListener(node,context.onScriptError,"error"),{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0])return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]));callGetModule(args)}context.defQueueMap={}}return handlers={require:function(mod){return mod.require?mod.require:mod.require=context.makeRequire(mod.map)},exports:function(mod){if(mod.usingExports=!0,mod.map.isDefine)return mod.exports?defined[mod.map.id]=mod.exports:mod.exports=defined[mod.map.id]={}},module:function(mod){return mod.module?mod.module:mod.module={id:mod.map.id,uri:mod.map.url,config:function(){return getOwn(config.config,mod.map.id)||{}},exports:mod.exports||(mod.exports={})}}},(Module=function(map){this.events=getOwn(undefEvents,map.id)||{},this.map=map,this.shim=getOwn(config.shim,map.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(depMaps,factory,errback,options){options=options||{},this.inited||(this.factory=factory,errback?this.on("error",errback):this.events.error&&(errback=bind(this,function(err){this.emit("error",err)})),this.depMaps=depMaps&&depMaps.slice(0),this.errback=errback,this.inited=!0,this.ignore=options.ignore,options.enabled||this.enabled?this.enable():this.check())},defineDep:function(i,depExports){this.depMatched[i]||(this.depMatched[i]=!0,--this.depCount,this.depExports[i]=depExports)},fetch:function(){if(!this.fetched){this.fetched=!0,context.startTime=(new Date).getTime();var map=this.map;if(!this.shim)return map.prefix?this.callPlugin():this.load();context.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()}))}},load:function(){var url=this.map.url;urlFetched[url]||(urlFetched[url]=!0,context.load(this.map.id,url))},check:function(){if(this.enabled&&!this.enabling){var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}else exports=context.execCb(id,factory,depExports,exports);if(this.map.isDefine&&void 0===exports&&((cjsModule=this.module)?exports=cjsModule.exports:this.usingExports&&(exports=this.exports)),err)return err.requireMap=this.map,err.requireModules=this.map.isDefine?[this.map.id]:null,err.requireType=this.map.isDefine?"define":"require",onError(this.error=err)}else exports=factory;if(this.exports=exports,this.map.isDefine&&!this.ignore&&(defined[id]=exports,req.onResourceLoad)){var resLoadMaps=[];each(this.depMaps,function(depMap){resLoadMaps.push(depMap.normalizedMap||depMap)}),req.onResourceLoad(context,this.map,resLoadMaps)}cleanRegistry(id),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(context.defQueueMap,id)||this.fetch()}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap),on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,bundleId=getOwn(bundlesMap,this.map.id),name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(plugin.normalize&&(name=plugin.normalize(name,function(name){return normalize(name,parentName,!0)})||""),on(normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap,!0),"defined",bind(this,function(value){this.map.normalizedMap=normalizedMap,this.init([],function(){return value},null,{enabled:!0,ignore:!0})})),void((normalizedMod=getOwn(registry,normalizedMap.id))&&(this.depMaps.push(normalizedMap),this.events.error&&normalizedMod.on("error",bind(this,function(err){this.emit("error",err)})),normalizedMod.enable()))):bundleId?(this.map.url=context.nameToUrl(bundleId),void this.load()):((load=bind(this,function(value){this.init([],function(){return value},null,{enabled:!0})})).error=bind(this,function(err){this.inited=!0,(this.error=err).requireModules=[id],eachProp(registry,function(mod){0===mod.map.id.indexOf(id+"_unnormalized")&&cleanRegistry(mod.map.id)}),onError(err)}),load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;textAlt&&(text=textAlt),hasInteractive&&(useInteractive=!1),getModule(moduleMap),hasProp(config.config,id)&&(config.config[moduleName]=config.config[id]);try{req.exec(text)}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))}hasInteractive&&(useInteractive=!0),this.depMaps.push(moduleMap),context.completeLoad(moduleName),localRequire([moduleName],load)}),void plugin.load(map.name,localRequire,load,config))})),context.enable(pluginMap,this),this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){(enabledRegistry[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if("string"==typeof depMap){if(depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=depMap,handler=getOwn(handlers,depMap.id))return void(this.depExports[i]=handler(this));this.depCount+=1,on(depMap,"defined",bind(this,function(depExports){this.undefed||(this.defineDep(i,depExports),this.check())})),this.errback?on(depMap,"error",bind(this,this.errback)):this.events.error&&on(depMap,"error",bind(this,function(err){this.emit("error",err)}))}id=depMap.id,mod=registry[id],hasProp(handlers,id)||!mod||mod.enabled||context.enable(depMap,this)})),eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,pluginMap.id);mod&&!mod.enabled&&context.enable(pluginMap,this)})),this.enabling=!1,this.check()},on:function(name,cb){var cbs=this.events[name];(cbs=cbs||(this.events[name]=[])).push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)}),"error"===name&&delete this.events[name]}},(context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,defQueueMap:{},Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,onError:onError,configure:function(cfg){if(cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/"),"string"==typeof cfg.urlArgs){var urlArgs=cfg.urlArgs;cfg.urlArgs=function(id,url){return(-1===url.indexOf("?")?"?":"&")+urlArgs}}var shim=config.shim,objs={paths:!0,bundles:!0,config:!0,map:!0};eachProp(cfg,function(value,prop){objs[prop]?(config[prop]||(config[prop]={}),mixin(config[prop],value,!0,!0)):config[prop]=value}),cfg.bundles&&eachProp(cfg.bundles,function(value,prop){each(value,function(v){v!==prop&&(bundlesMap[v]=prop)})}),cfg.shim&&(eachProp(cfg.shim,function(value,id){isArray(value)&&(value={deps:value}),!value.exports&&!value.init||value.exportsFn||(value.exportsFn=context.makeShimExports(value)),shim[id]=value}),config.shim=shim),cfg.packages&&each(cfg.packages,function(pkgObj){var name;name=(pkgObj="string"==typeof pkgObj?{name:pkgObj}:pkgObj).name,pkgObj.location&&(config.paths[name]=pkgObj.location),config.pkgs[name]=pkgObj.name+"/"+(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(registry,function(mod,id){mod.inited||mod.map.unnormalized||(mod.map=makeModuleMap(id,null,!0))}),(cfg.deps||cfg.callback)&&context.require(cfg.deps||[],cfg.callback)},makeShimExports:function(value){return function(){var ret;return value.init&&(ret=value.init.apply(global,arguments)),ret||value.exports&&getGlobal(value.exports)}},makeRequire:function(relMap,options){function localRequire(deps,callback,errback){var id,requireMod;return options.enableBuildCallback&&callback&&isFunction(callback)&&(callback.__requireJsBuild=!0),"string"==typeof deps?isFunction(callback)?onError(makeError("requireargs","Invalid require call"),errback):relMap&&hasProp(handlers,deps)?handlers[deps](registry[relMap.id]):req.get?req.get(context,deps,relMap,localRequire):(id=makeModuleMap(deps,relMap,!1,!0).id,hasProp(defined,id)?defined[id]:onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))):(intakeDefines(),context.nextTick(function(){intakeDefines(),(requireMod=getModule(makeModuleMap(null,relMap))).skipMap=options.skipMap,requireMod.init(deps,callback,errback,{enabled:!0}),checkLoaded()}),localRequire)}return options=options||{},mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0];return-1!==index&&(!("."===segment||".."===segment)||1<index)&&(ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length),moduleNamePlusExt=moduleNamePlusExt.substring(0,index)),context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,!0),ext,!0)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,!1,!0).id)},specified:function(id){return id=makeModuleMap(id,relMap,!1,!0).id,hasProp(defined,id)||hasProp(registry,id)}}),relMap||(localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,!0),mod=getOwn(registry,id);mod.undefed=!0,removeScript(id),delete defined[id],delete urlFetched[map.url],delete undefEvents[id],eachReverse(defQueue,function(args,i){args[0]===id&&defQueue.splice(i,1)}),delete context.defQueueMap[id],mod&&(mod.events.defined&&(undefEvents[id]=mod.events),cleanRegistry(id))}),localRequire},enable:function(depMap){getOwn(registry,depMap.id)&&getModule(depMap).enable()},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0]){if(args[0]=moduleName,found)break;found=!0}else args[0]===moduleName&&(found=!0);callGetModule(args)}if(context.defQueueMap={},mod=getOwn(registry,moduleName),!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(!(!config.enforceDefine||shExports&&getGlobal(shExports)))return hasPathFallback(moduleName)?void 0:onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]));callGetModule([moduleName,shim.deps||[],shim.exportsFn])}checkLoaded()},nameToUrl:function(moduleName,ext,skipExt){var paths,syms,i,url,parentPath,bundleId,pkgMain=getOwn(config.pkgs,moduleName);if(pkgMain&&(moduleName=pkgMain),bundleId=getOwn(bundlesMap,moduleName))return context.nameToUrl(bundleId,ext,skipExt);if(req.jsExtRegExp.test(moduleName))url=moduleName+(ext||"");else{for(paths=config.paths,i=(syms=moduleName.split("/")).length;0<i;--i)if(parentPath=getOwn(paths,syms.slice(0,i).join("/"))){isArray(parentPath)&&(parentPath=parentPath[0]),syms.splice(0,i,parentPath);break}url=syms.join("/"),url=("/"===(url+=ext||(/^data\:|^blob\:|\?/.test(url)||skipExt?"":".js")).charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs&&!/^blob\:/.test(url)?url+config.urlArgs(moduleName,url):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if("load"===evt.type||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);if(!hasPathFallback(data.id)){var parents=[];return eachProp(registry,function(value,key){0!==key.indexOf("_@r")&&each(value.depMaps,function(depMap){if(depMap.id===data.id)return parents.push(key),!0})}),onError(makeError("scripterror",'Script error for "'+data.id+(parents.length?'", needed by: '+parents.join(", "):'"'),evt,[data.id]))}}}).require=context.makeRequire(),context}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(script){if("interactive"===script.readyState)return interactiveScript=script}),interactiveScript}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),this.requirejsVars={require:require,requirejs:require,define:define},"browser"===env?function(){function exec(){eval(arguments[0])}require.load=function(context,moduleName,url){var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.send(),xhr.onreadystatechange=function(){4===xhr.readyState&&(exec(xhr.responseText),context.completeLoad(moduleName))}}}():"rhino"===env?function(){"use strict";require.load=function(context,moduleName,url){load(url),context.completeLoad(moduleName)}}():"node"===env?(this.requirejsVars.nodeRequire=nodeRequire,require.nodeRequire=nodeRequire,function(){var nodeReq=requirejsVars.nodeRequire,req=requirejsVars.require,def=requirejsVars.define,fs=nodeReq("fs"),path=nodeReq("path"),vm=nodeReq("vm"),exists=fs.existsSync||path.existsSync,hasOwn=Object.prototype.hasOwnProperty;function hasProp(obj,prop){return hasOwn.call(obj,prop)}function syncTick(fn){fn()}function makeError(message,moduleName){var err=new Error(message);return err.requireModules=[moduleName],err}req.get=function(context,moduleName,relModuleMap,localRequire){"require"!==moduleName&&"exports"!==moduleName&&"module"!==moduleName||context.onError(makeError("Explicit require of "+moduleName+" is not allowed.",moduleName));var ret,oldTick,moduleMap=context.makeModuleMap(moduleName,relModuleMap,!1,!0);if(moduleName=moduleMap.id,hasProp(context.defined,moduleName))ret=context.defined[moduleName];else if(void 0===ret){oldTick=context.nextTick,context.nextTick=syncTick;try{moduleMap.prefix?(localRequire([moduleMap.originalName]),moduleName=(moduleMap=context.makeModuleMap(moduleMap.originalName,relModuleMap,!1,!0)).id):(req.load(context,moduleName,moduleMap.url),context.enable(moduleMap,relModuleMap)),context.require([moduleName]),ret=context.defined[moduleName]}finally{context.nextTick=oldTick}}return ret},req.nextTick=function(fn){process.nextTick(fn)},req.makeNodeWrapper=function(contents){return"(function (require, requirejs, define) { "+contents+"\n}(requirejsVars.require, requirejsVars.requirejs, requirejsVars.define));"},req.load=function(context,moduleName,url){var contents,err,config=context.config;if(!config.shim[moduleName]||config.suppress&&config.suppress.nodeShim||console.warn("Shim config not supported in Node, may or may not work. Detected for module: "+moduleName),exists(url)){contents=fs.readFileSync(url,"utf8"),contents=req.makeNodeWrapper(contents);try{vm.runInThisContext(contents,fs.realpathSync(url))}catch(e){return(err=new Error("Evaluating "+url+' as module "'+moduleName+'" failed with error: '+e)).originalError=e,err.moduleName=moduleName,err.requireModules=[moduleName],err.fileName=url,context.onError(err)}}else def(moduleName,function(){var dirName,map=hasProp(context.registry,moduleName)&&context.registry[moduleName].map,parentMap=map&&map.parentMap,originalName=map&&map.originalName;"."===originalName.charAt(0)&&parentMap&&((dirName=parentMap.url.split("/")).pop(),originalName=dirName.join("/")+"/"+originalName);try{return(context.config.nodeRequire||req.nodeRequire)(originalName)}catch(e){throw(err=new Error('Tried loading "'+moduleName+'" at '+url+" then tried node's require(\""+originalName+'") and it failed with error: '+e)).originalError=e,err.moduleName=originalName,err.requireModules=[moduleName],err}});context.completeLoad(moduleName)},req.exec=function(text){return text=req.makeNodeWrapper(text),eval(text)}}()):"xpconnect"===env&&function(){"use strict";require.load=function(context,moduleName,url){load(url),context.completeLoad(moduleName)}}(),"o"===commandOption||fileName&&jsSuffixRegExp.test(fileName)||(fileName="main.js"),"node"===env&&reqMain!==module?(setBaseUrl(path.resolve(reqMain?reqMain.filename:".")),createRjsApi(),module.exports=requirejs):"browser"===env?(setBaseUrl(location.href),createRjsApi()):"rhino"!==env&&"xpconnect"!==env||"undefined"==typeof requirejsAsLib||!requirejsAsLib?"o"===commandOption?(loadLib(),require({baseUrl:require.s.contexts._.config.baseUrl,context:"build",catchError:{define:!0}},["env!env/args","env!env/quit","logger","build"],function(args,quit,logger,build){build(args).then(function(){},function(err){logger.error(err),quit(1)})})):"v"===commandOption?console.log("r.js: "+version+", RequireJS: "+this.requirejsVars.require.version+", UglifyJS: 2.8.29"):"convert"===commandOption?(loadLib(),this.requirejsVars.require(["env!env/args","commonJs","env!env/print"],function(args,commonJs,print){var srcDir,outDir;srcDir=args[0],outDir=args[1],srcDir&&outDir?commonJs.convertDir(args[0],args[1]):print("Usage: path/to/commonjs/modules output/dir")})):("lib"===commandOption&&loadLib(),setBaseUrl(fileName),exists(fileName)?exec(readFile(fileName),fileName):showHelp()):(setBaseUrl(fileName),createRjsApi())}("undefined"!=typeof console?console:void 0,"undefined"!=typeof Packages||"undefined"==typeof window&&"undefined"!=typeof Components&&Components.interfaces?Array.prototype.slice.call(arguments,0):[],"undefined"!=typeof readFile?readFile:void 0);
//# sourceMappingURL=r.js.map
